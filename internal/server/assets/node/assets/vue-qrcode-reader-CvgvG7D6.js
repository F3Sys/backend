import{d as Go,r as wt,x as br,i as Jo,D as Yo,h as Ma,o as Xo,c as Qo,a as un,I as Zo,k as Ko,J as ei,K as ti}from"./index-D2eC2A49.js";var no=r=>{throw TypeError(r)},ao=(r,c,i)=>c.has(r)||no("Cannot "+i),ri=(r,c,i)=>(ao(r,c,"read from private field"),i?i.call(r):c.get(r)),ni=(r,c,i)=>c.has(r)?no("Cannot add the same private member more than once"):c instanceof WeakSet?c.add(r):c.set(r,i),ai=(r,c,i,p)=>(ao(r,c,"write to private field"),c.set(r,i),i);const Va=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function oi(r){return r.join("|")}function ii(r){const c=Ba(r);let i=0,p=Va.length-1;for(;i<=p;){const d=Math.floor((i+p)/2),T=Va[d],P=Ba(T);if(P===c)return T;P<c?i=d+1:p=d-1}return"None"}function Ba(r){return r.toLowerCase().replace(/_-\[\]/g,"")}function si(r,c){return r.Binarizer[c]}function ci(r,c){return r.CharacterSet[c]}const ui=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function li(r){return ui[r.value]}function di(r,c){return r.EanAddOnSymbol[c]}function fi(r,c){return r.TextMode[c]}const Yt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function oo(r,c){return{...c,formats:oi(c.formats),binarizer:si(r,c.binarizer),eanAddOnSymbol:di(r,c.eanAddOnSymbol),textMode:fi(r,c.textMode),characterSet:ci(r,c.characterSet)}}function io(r){return{...r,format:ii(r.format),eccLevel:r.eccLevel,contentType:li(r.contentType)}}const hi={locateFile:(r,c)=>{const i=r.match(/_(.+?)\.wasm$/);return i?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.2.14/dist/${i[1]}/${r}`:c+r}};let Na=new WeakMap;function Ra(r,c){var i;const p=Na.get(r);if(p!=null&&p.modulePromise&&c===void 0)return p.modulePromise;const d=(i=p==null?void 0:p.moduleOverrides)!=null?i:hi,T=r({...d});return Na.set(r,{moduleOverrides:d,modulePromise:T}),T}async function pi(r,c,i=Yt){const p={...Yt,...i},d=await Ra(r),{size:T}=c,P=new Uint8Array(await c.arrayBuffer()),j=d._malloc(T);d.HEAPU8.set(P,j);const C=d.readBarcodesFromImage(j,T,oo(d,p));d._free(j);const E=[];for(let x=0;x<C.size();++x)E.push(io(C.get(x)));return E}async function vi(r,c,i=Yt){const p={...Yt,...i},d=await Ra(r),{data:T,width:P,height:j,data:{byteLength:C}}=c,E=d._malloc(C);d.HEAPU8.set(T,E);const x=d.readBarcodesFromPixmap(E,P,j,oo(d,p));d._free(E);const D=[];for(let W=0;W<x.size();++W)D.push(io(x.get(W)));return D}({...Yt,formats:[...Yt.formats]});var ka=(()=>{var r,c=typeof document<"u"&&((r=document.currentScript)==null?void 0:r.tagName.toUpperCase())==="SCRIPT"?document.currentScript.src:void 0;return function(i={}){var p,d=i,T,P,j=new Promise((e,t)=>{T=e,P=t}),C=typeof window=="object",E=typeof Bun<"u",x=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var D=Object.assign({},d),W="./this.program",F="";function H(e){return d.locateFile?d.locateFile(e,F):F+e}var q,G;if(C||x||E){var J;x?F=self.location.href:typeof document<"u"&&((J=document.currentScript)===null||J===void 0?void 0:J.tagName.toUpperCase())==="SCRIPT"&&(F=document.currentScript.src),c&&(F=c),F.startsWith("blob:")?F="":F=F.substr(0,F.replace(/[?#].*/,"").lastIndexOf("/")+1),x&&(G=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),q=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url)))}var Ue=d.print||console.log.bind(console),V=d.printErr||console.error.bind(console);Object.assign(d,D),D=null,d.arguments&&d.arguments,d.thisProgram&&(W=d.thisProgram);var k=d.wasmBinary,I,xe=!1,ce,ae,Te,De,Pe,z,bt,$t;function Ct(){var e=I.buffer;d.HEAP8=ce=new Int8Array(e),d.HEAP16=Te=new Int16Array(e),d.HEAPU8=ae=new Uint8Array(e),d.HEAPU16=De=new Uint16Array(e),d.HEAP32=Pe=new Int32Array(e),d.HEAPU32=z=new Uint32Array(e),d.HEAPF32=bt=new Float32Array(e),d.HEAPF64=$t=new Float64Array(e)}var Tt=[],et=[],Se=[];function ze(){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)me(d.preRun.shift());nr(Tt)}function Qt(){nr(et)}function Le(){if(d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;)Pt(d.postRun.shift());nr(Se)}function me(e){Tt.unshift(e)}function Zt(e){et.unshift(e)}function Pt(e){Se.unshift(e)}var ve=0,He=null;function Kt(e){var t;ve++,(t=d.monitorRunDependencies)===null||t===void 0||t.call(d,ve)}function St(e){var t;if(ve--,(t=d.monitorRunDependencies)===null||t===void 0||t.call(d,ve),ve==0&&He){var o=He;He=null,o()}}function er(e){var t;(t=d.onAbort)===null||t===void 0||t.call(d,e),e="Aborted("+e+")",V(e),xe=!0,e+=". Build with -sASSERTIONS for more info.";var o=new WebAssembly.RuntimeError(e);throw P(o),o}var vn="data:application/octet-stream;base64,",_t=e=>e.startsWith(vn);function Et(){var e="zxing_reader.wasm";return _t(e)?e:H(e)}var qe;function Cr(e){if(e==qe&&k)return new Uint8Array(k);if(G)return G(e);throw"both async and sync fetching of the wasm failed"}function Me(e){return k?Promise.resolve().then(()=>Cr(e)):q(e).then(t=>new Uint8Array(t),()=>Cr(e))}function Tr(e,t,o){return Me(e).then(l=>WebAssembly.instantiate(l,t)).then(o,l=>{V(`failed to asynchronously prepare wasm: ${l}`),er(l)})}function tr(e,t,o,l){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!_t(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(h=>{var m=WebAssembly.instantiateStreaming(h,o);return m.then(l,function(w){return V(`wasm streaming compile failed: ${w}`),V("falling back to ArrayBuffer instantiation"),Tr(t,o,l)})}):Tr(t,o,l)}function mn(){return{a:Yr}}function rr(){var e,t=mn();function o(h,m){return Z=h.exports,I=Z.ma,Ct(),Wt=Z.qa,Zt(Z.na),St(),Z}Kt();function l(h){o(h.instance)}if(d.instantiateWasm)try{return d.instantiateWasm(t,o)}catch(h){V(`Module.instantiateWasm callback failed with error: ${h}`),P(h)}return(e=qe)!==null&&e!==void 0||(qe=Et()),tr(k,qe,t,l).catch(P),{}}var nr=e=>{for(;e.length>0;)e.shift()(d)};d.noExitRuntime;var oe=e=>Qr(e),ie=()=>Zr(),Ot=[],At=0,yn=e=>{var t=new ct(e);return t.get_caught()||(t.set_caught(!0),At--),t.set_rethrown(!1),Ot.push(t),en(e),rn(e)},be=0,ar=()=>{K(0,0);var e=Ot.pop();Kr(e.excPtr),be=0};class ct{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){z[this.ptr+4>>2]=t}get_type(){return z[this.ptr+4>>2]}set_destructor(t){z[this.ptr+8>>2]=t}get_destructor(){return z[this.ptr+8>>2]}set_caught(t){t=t?1:0,ce[this.ptr+12]=t}get_caught(){return ce[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,ce[this.ptr+13]=t}get_rethrown(){return ce[this.ptr+13]!=0}init(t,o){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(o)}set_adjusted_ptr(t){z[this.ptr+16>>2]=t}get_adjusted_ptr(){return z[this.ptr+16>>2]}}var tt=e=>{throw be||(be=e),be},Ae=e=>Xr(e),rt=e=>{var t=be;if(!t)return Ae(0),0;var o=new ct(t);o.set_adjusted_ptr(t);var l=o.get_type();if(!l)return Ae(0),t;for(var h of e){if(h===0||h===l)break;var m=o.ptr+16;if(tn(h,l,m))return Ae(h),t}return Ae(l),t},Pr=()=>rt([]),xt=e=>rt([e]),Ge=(e,t)=>rt([e,t]),gn=()=>{var e=Ot.pop();e||er("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(Ot.push(e),e.set_rethrown(!0),e.set_caught(!1),At++),be=t,be},wn=(e,t,o)=>{var l=new ct(e);throw l.init(t,o),be=e,At++,be},bn=()=>At,Sr=()=>{er("")},se={},Ve=e=>{for(;e.length;){var t=e.pop(),o=e.pop();o(t)}};function L(e){return this.fromWireType(z[e>>2])}var nt={},he={},ye={},_r,Dt=e=>{throw new _r(e)},je=(e,t,o)=>{e.forEach(f=>ye[f]=t);function l(f){var g=o(f);g.length!==e.length&&Dt("Mismatched type converter count");for(var _=0;_<e.length;++_)pe(e[_],g[_])}var h=new Array(t.length),m=[],w=0;t.forEach((f,g)=>{he.hasOwnProperty(f)?h[g]=he[f]:(m.push(f),nt.hasOwnProperty(f)||(nt[f]=[]),nt[f].push(()=>{h[g]=he[f],++w,w===m.length&&l(h)}))}),m.length===0&&l(h)},or=e=>{var t=se[e];delete se[e];var o=t.rawConstructor,l=t.rawDestructor,h=t.fields,m=h.map(w=>w.getterReturnType).concat(h.map(w=>w.setterArgumentType));je([e],m,w=>{var f={};return h.forEach((g,_)=>{var A=g.fieldName,R=w[_],U=g.getter,B=g.getterContext,X=w[_+h.length],fe=g.setter,le=g.setterContext;f[A]={read:de=>R.fromWireType(U(B,de)),write:(de,gt)=>{var we=[];fe(le,de,X.toWireType(we,gt)),Ve(we)}}}),[{name:t.name,fromWireType:g=>{var _={};for(var A in f)_[A]=f[A].read(g);return l(g),_},toWireType:(g,_)=>{for(var A in f)if(!(A in _))throw new TypeError(`Missing field: "${A}"`);var R=o();for(A in f)f[A].write(R,_[A]);return g!==null&&g.push(l,R),R},argPackAdvance:$e,readValueFromPointer:L,destructorFunction:l}]})},Er=(e,t,o,l,h)=>{},$n=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ir=e},ir,ue=e=>{for(var t="",o=e;ae[o];)t+=ir[ae[o++]];return t},Je,N=e=>{throw new Je(e)};function Cn(e,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var l=t.name;if(e||N(`type "${l}" must have a positive integer typeid pointer`),he.hasOwnProperty(e)){if(o.ignoreDuplicateRegistrations)return;N(`Cannot register type '${l}' twice`)}if(he[e]=t,delete ye[e],nt.hasOwnProperty(e)){var h=nt[e];delete nt[e],h.forEach(m=>m())}}function pe(e,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Cn(e,t,o)}var $e=8,ut=(e,t,o,l)=>{t=ue(t),pe(e,{name:t,fromWireType:function(h){return!!h},toWireType:function(h,m){return m?o:l},argPackAdvance:$e,readValueFromPointer:function(h){return this.fromWireType(ae[h])},destructorFunction:null})},Tn=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),sr=e=>{function t(o){return o.$$.ptrType.registeredClass.name}N(t(e)+" instance already deleted")},Ye=!1,Or=e=>{},Pn=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},lt=e=>{e.count.value-=1;var t=e.count.value===0;t&&Pn(e)},Ar=(e,t,o)=>{if(t===o)return e;if(o.baseClass===void 0)return null;var l=Ar(e,t,o.baseClass);return l===null?null:o.downcast(l)},at={},Sn=()=>Object.keys(dt).length,Mt=()=>{var e=[];for(var t in dt)dt.hasOwnProperty(t)&&e.push(dt[t]);return e},Re=[],jt=()=>{for(;Re.length;){var e=Re.pop();e.$$.deleteScheduled=!1,e.delete()}},Xe,_n=e=>{Xe=e,Re.length&&Xe&&Xe(jt)},En=()=>{d.getInheritedInstanceCount=Sn,d.getLiveInheritedInstances=Mt,d.flushPendingDeletes=jt,d.setDelayFunction=_n},dt={},On=(e,t)=>{for(t===void 0&&N("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},cr=(e,t)=>(t=On(e,t),dt[t]),Rt=(e,t)=>{(!t.ptrType||!t.ptr)&&Dt("makeClassHandle requires ptr and ptrType");var o=!!t.smartPtrType,l=!!t.smartPtr;return o!==l&&Dt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ft(Object.create(e,{$$:{value:t,writable:!0}}))};function An(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var o=cr(this.registeredClass,t);if(o!==void 0){if(o.$$.count.value===0)return o.$$.ptr=t,o.$$.smartPtr=e,o.clone();var l=o.clone();return this.destructor(e),l}function h(){return this.isSmartPointer?Rt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Rt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var m=this.registeredClass.getActualType(t),w=at[m];if(!w)return h.call(this);var f;this.isConst?f=w.constPointerType:f=w.pointerType;var g=Ar(t,this.registeredClass,f.registeredClass);return g===null?h.call(this):this.isSmartPointer?Rt(f.registeredClass.instancePrototype,{ptrType:f,ptr:g,smartPtrType:this,smartPtr:e}):Rt(f.registeredClass.instancePrototype,{ptrType:f,ptr:g})}var ft=e=>typeof FinalizationRegistry>"u"?(ft=t=>t,e):(Ye=new FinalizationRegistry(t=>{lt(t.$$)}),ft=t=>{var o=t.$$,l=!!o.smartPtr;if(l){var h={$$:o};Ye.register(t,h,t)}return t},Or=t=>Ye.unregister(t),ft(e)),xr=()=>{Object.assign(kt.prototype,{isAliasOf(e){if(!(this instanceof kt)||!(e instanceof kt))return!1;var t=this.$$.ptrType.registeredClass,o=this.$$.ptr;e.$$=e.$$;for(var l=e.$$.ptrType.registeredClass,h=e.$$.ptr;t.baseClass;)o=t.upcast(o),t=t.baseClass;for(;l.baseClass;)h=l.upcast(h),l=l.baseClass;return t===l&&o===h},clone(){if(this.$$.ptr||sr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=ft(Object.create(Object.getPrototypeOf(this),{$$:{value:Tn(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||sr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&N("Object already scheduled for deletion"),Or(this),lt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||sr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&N("Object already scheduled for deletion"),Re.push(this),Re.length===1&&Xe&&Xe(jt),this.$$.deleteScheduled=!0,this}})};function kt(){}var Be=(e,t)=>Object.defineProperty(t,"name",{value:e}),ur=(e,t,o)=>{if(e[t].overloadTable===void 0){var l=e[t];e[t]=function(){for(var h=arguments.length,m=new Array(h),w=0;w<h;w++)m[w]=arguments[w];return e[t].overloadTable.hasOwnProperty(m.length)||N(`Function '${o}' called with an invalid number of arguments (${m.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[m.length].apply(this,m)},e[t].overloadTable=[],e[t].overloadTable[l.argCount]=l}},lr=(e,t,o)=>{d.hasOwnProperty(e)?((o===void 0||d[e].overloadTable!==void 0&&d[e].overloadTable[o]!==void 0)&&N(`Cannot register public name '${e}' twice`),ur(d,e,e),d.hasOwnProperty(o)&&N(`Cannot register multiple overloads of a function with the same number of arguments (${o})!`),d[e].overloadTable[o]=t):(d[e]=t,o!==void 0&&(d[e].numArguments=o))},Ft=48,Dr=57,ee=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Ft&&t<=Dr?`_${e}`:e};function xn(e,t,o,l,h,m,w,f){this.name=e,this.constructor=t,this.instancePrototype=o,this.rawDestructor=l,this.baseClass=h,this.getActualType=m,this.upcast=w,this.downcast=f,this.pureVirtualFunctions=[]}var dr=(e,t,o)=>{for(;t!==o;)t.upcast||N(`Expected null or instance of ${o.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function _e(e,t){if(t===null)return this.isReference&&N(`null is not a valid ${this.name}`),0;t.$$||N(`Cannot pass "${pt(t)}" as a ${this.name}`),t.$$.ptr||N(`Cannot pass deleted object as a pointer of type ${this.name}`);var o=t.$$.ptrType.registeredClass,l=dr(t.$$.ptr,o,this.registeredClass);return l}function Dn(e,t){var o;if(t===null)return this.isReference&&N(`null is not a valid ${this.name}`),this.isSmartPointer?(o=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,o),o):0;(!t||!t.$$)&&N(`Cannot pass "${pt(t)}" as a ${this.name}`),t.$$.ptr||N(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&N(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var l=t.$$.ptrType.registeredClass;if(o=dr(t.$$.ptr,l,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&N("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?o=t.$$.smartPtr:N(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:o=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)o=t.$$.smartPtr;else{var h=t.clone();o=this.rawShare(o,Fe.toHandle(()=>h.delete())),e!==null&&e.push(this.rawDestructor,o)}break;default:N("Unsupporting sharing policy")}return o}function Mr(e,t){if(t===null)return this.isReference&&N(`null is not a valid ${this.name}`),0;t.$$||N(`Cannot pass "${pt(t)}" as a ${this.name}`),t.$$.ptr||N(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&N(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var o=t.$$.ptrType.registeredClass,l=dr(t.$$.ptr,o,this.registeredClass);return l}var jr=()=>{Object.assign(Qe.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:$e,readValueFromPointer:L,fromWireType:An})};function Qe(e,t,o,l,h,m,w,f,g,_,A){this.name=e,this.registeredClass=t,this.isReference=o,this.isConst=l,this.isSmartPointer=h,this.pointeeType=m,this.sharingPolicy=w,this.rawGetPointee=f,this.rawConstructor=g,this.rawShare=_,this.rawDestructor=A,!h&&t.baseClass===void 0?l?(this.toWireType=_e,this.destructorFunction=null):(this.toWireType=Mr,this.destructorFunction=null):this.toWireType=Dn}var Rr=(e,t,o)=>{d.hasOwnProperty(e)||Dt("Replacing nonexistent public symbol"),d[e].overloadTable!==void 0&&o!==void 0?d[e].overloadTable[o]=t:(d[e]=t,d[e].argCount=o)},fr=(e,t,o)=>{e=e.replace(/p/g,"i");var l=d["dynCall_"+e];return l(t,...o)},It=[],Wt,te=e=>{var t=It[e];return t||(e>=It.length&&(It.length=e+1),It[e]=t=Wt.get(e)),t},kr=function(e,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(e.includes("j"))return fr(e,t,o);var l=te(t)(...o);return l},Mn=(e,t)=>function(){for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];return kr(e,t,l)},Ee=(e,t)=>{e=ue(e);function o(){return e.includes("j")?Mn(e,t):te(t)}var l=o();return typeof l!="function"&&N(`unknown function pointer with signature ${e}: ${t}`),l},Fr=(e,t)=>{var o=Be(t,function(l){this.name=t,this.message=l;var h=new Error(l).stack;h!==void 0&&(this.stack=this.toString()+`
`+h.replace(/^Error(:[^\n]*)?\n/,""))});return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},o},ge,Ut=e=>{var t=gr(e),o=ue(t);return We(t),o},Lt=(e,t)=>{var o=[],l={};function h(m){if(!l[m]&&!he[m]){if(ye[m]){ye[m].forEach(h);return}o.push(m),l[m]=!0}}throw t.forEach(h),new ge(`${e}: `+o.map(Ut).join([", "]))},jn=(e,t,o,l,h,m,w,f,g,_,A,R,U)=>{A=ue(A),m=Ee(h,m),f&&(f=Ee(w,f)),_&&(_=Ee(g,_)),U=Ee(R,U);var B=ee(A);lr(B,function(){Lt(`Cannot construct ${A} due to unbound types`,[l])}),je([e,t,o],l?[l]:[],X=>{X=X[0];var fe,le;l?(fe=X.registeredClass,le=fe.instancePrototype):le=kt.prototype;var de=Be(A,function(){if(Object.getPrototypeOf(this)!==gt)throw new Je("Use 'new' to construct "+A);if(we.constructor_body===void 0)throw new Je(A+" has no accessible constructor");for(var La=arguments.length,sn=new Array(La),cn=0;cn<La;cn++)sn[cn]=arguments[cn];var Ha=we.constructor_body[sn.length];if(Ha===void 0)throw new Je(`Tried to invoke ctor of ${A} with invalid number of parameters (${sn.length}) - expected (${Object.keys(we.constructor_body).toString()}) parameters instead!`);return Ha.apply(this,sn)}),gt=Object.create(le,{constructor:{value:de}});de.prototype=gt;var we=new xn(A,de,gt,U,fe,m,f,_);if(we.baseClass){var Ze,on;(on=(Ze=we.baseClass).__derivedClasses)!==null&&on!==void 0||(Ze.__derivedClasses=[]),we.baseClass.__derivedClasses.push(we)}var qo=new Qe(A,we,!0,!1,!1),Wa=new Qe(A+"*",we,!1,!1,!1),Ua=new Qe(A+" const*",we,!1,!0,!1);return at[e]={pointerType:Wa,constPointerType:Ua},Rr(B,de),[qo,Wa,Ua]})},Oe=(e,t)=>{for(var o=[],l=0;l<e;l++)o.push(z[t+l*4>>2]);return o};function Rn(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function hr(e,t,o,l,h,m){var w=t.length;w<2&&N("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=t[1]!==null&&o!==null,g=Rn(t),_=t[0].name!=="void",A=w-2,R=new Array(A),U=[],B=[],X=function(){B.length=0;var fe;U.length=f?2:1,U[0]=h,f&&(fe=t[1].toWireType(B,this),U[1]=fe);for(var le=0;le<A;++le)R[le]=t[le+2].toWireType(B,le<0||arguments.length<=le?void 0:arguments[le]),U.push(R[le]);var de=l(...U);function gt(we){if(g)Ve(B);else for(var Ze=f?1:2;Ze<t.length;Ze++){var on=Ze===1?fe:R[Ze-2];t[Ze].destructorFunction!==null&&t[Ze].destructorFunction(on)}if(_)return t[0].fromWireType(we)}return gt(de)};return Be(e,X)}var kn=(e,t,o,l,h,m)=>{var w=Oe(t,o);h=Ee(l,h),je([],[e],f=>{f=f[0];var g=`constructor ${f.name}`;if(f.registeredClass.constructor_body===void 0&&(f.registeredClass.constructor_body=[]),f.registeredClass.constructor_body[t-1]!==void 0)throw new Je(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${f.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return f.registeredClass.constructor_body[t-1]=()=>{Lt(`Cannot construct ${f.name} due to unbound types`,w)},je([],w,_=>(_.splice(1,0,null),f.registeredClass.constructor_body[t-1]=hr(g,_,null,h,m),[])),[]})},Ht=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},Fn=(e,t,o,l,h,m,w,f,g,_)=>{var A=Oe(o,l);t=ue(t),t=Ht(t),m=Ee(h,m),je([],[e],R=>{R=R[0];var U=`${R.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),f&&R.registeredClass.pureVirtualFunctions.push(t);function B(){Lt(`Cannot call ${U} due to unbound types`,A)}var X=R.registeredClass.instancePrototype,fe=X[t];return fe===void 0||fe.overloadTable===void 0&&fe.className!==R.name&&fe.argCount===o-2?(B.argCount=o-2,B.className=R.name,X[t]=B):(ur(X,t,U),X[t].overloadTable[o-2]=B),je([],A,le=>{var de=hr(U,le,R,m,w);return X[t].overloadTable===void 0?(de.argCount=o-2,X[t]=de):X[t].overloadTable[o-2]=de,[]}),[]})},ht=[],ke=[],pr=e=>{e>9&&--ke[e+1]===0&&(ke[e]=void 0,ht.push(e))},In=()=>ke.length/2-5-ht.length,Wn=()=>{ke.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=In},Fe={toValue:e=>(e||N("Cannot use deleted val. handle = "+e),ke[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=ht.pop()||ke.length;return ke[t]=e,ke[t+1]=1,t}}}},Ir={name:"emscripten::val",fromWireType:e=>{var t=Fe.toValue(e);return pr(e),t},toWireType:(e,t)=>Fe.toHandle(t),argPackAdvance:$e,readValueFromPointer:L,destructorFunction:null},Wr=e=>pe(e,Ir),Un=(e,t,o)=>{switch(t){case 1:return o?function(l){return this.fromWireType(ce[l])}:function(l){return this.fromWireType(ae[l])};case 2:return o?function(l){return this.fromWireType(Te[l>>1])}:function(l){return this.fromWireType(De[l>>1])};case 4:return o?function(l){return this.fromWireType(Pe[l>>2])}:function(l){return this.fromWireType(z[l>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Ur=(e,t,o,l)=>{t=ue(t);function h(){}h.values={},pe(e,{name:t,constructor:h,fromWireType:function(m){return this.constructor.values[m]},toWireType:(m,w)=>w.value,argPackAdvance:$e,readValueFromPointer:Un(t,o,l),destructorFunction:null}),lr(t,h)},Vt=(e,t)=>{var o=he[e];return o===void 0&&N(`${t} has unknown type ${Ut(e)}`),o},Ln=(e,t,o)=>{var l=Vt(e,"enum");t=ue(t);var h=l.constructor,m=Object.create(l.constructor.prototype,{value:{value:o},constructor:{value:Be(`${l.name}_${t}`,function(){})}});h.values[o]=m,h[t]=m},pt=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},Hn=(e,t)=>{switch(t){case 4:return function(o){return this.fromWireType(bt[o>>2])};case 8:return function(o){return this.fromWireType($t[o>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Lr=(e,t,o)=>{t=ue(t),pe(e,{name:t,fromWireType:l=>l,toWireType:(l,h)=>h,argPackAdvance:$e,readValueFromPointer:Hn(t,o),destructorFunction:null})},Vn=(e,t,o,l,h,m,w,f)=>{var g=Oe(t,o);e=ue(e),e=Ht(e),h=Ee(l,h),lr(e,function(){Lt(`Cannot call ${e} due to unbound types`,g)},t-1),je([],g,_=>{var A=[_[0],null].concat(_.slice(1));return Rr(e,hr(e,A,null,h,m),t-1),[]})},Bn=(e,t,o)=>{switch(t){case 1:return o?l=>ce[l]:l=>ae[l];case 2:return o?l=>Te[l>>1]:l=>De[l>>1];case 4:return o?l=>Pe[l>>2]:l=>z[l>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Nn=(e,t,o,l,h)=>{t=ue(t);var m=A=>A;if(l===0){var w=32-8*o;m=A=>A<<w>>>w}var f=t.includes("unsigned"),g=(A,R)=>{},_;f?_=function(A,R){return g(R,this.name),R>>>0}:_=function(A,R){return g(R,this.name),R},pe(e,{name:t,fromWireType:m,toWireType:_,argPackAdvance:$e,readValueFromPointer:Bn(t,o,l!==0),destructorFunction:null})},zn=(e,t,o)=>{var l=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],h=l[t];function m(w){var f=z[w>>2],g=z[w+4>>2];return new h(ce.buffer,g,f)}o=ue(o),pe(e,{name:o,fromWireType:m,argPackAdvance:$e,readValueFromPointer:m},{ignoreDuplicateRegistrations:!0})},qn=Object.assign({optional:!0},Ir),Gn=(e,t)=>{pe(e,qn)},Jn=(e,t,o,l)=>{if(!(l>0))return 0;for(var h=o,m=o+l-1,w=0;w<e.length;++w){var f=e.charCodeAt(w);if(f>=55296&&f<=57343){var g=e.charCodeAt(++w);f=65536+((f&1023)<<10)|g&1023}if(f<=127){if(o>=m)break;t[o++]=f}else if(f<=2047){if(o+1>=m)break;t[o++]=192|f>>6,t[o++]=128|f&63}else if(f<=65535){if(o+2>=m)break;t[o++]=224|f>>12,t[o++]=128|f>>6&63,t[o++]=128|f&63}else{if(o+3>=m)break;t[o++]=240|f>>18,t[o++]=128|f>>12&63,t[o++]=128|f>>6&63,t[o++]=128|f&63}}return t[o]=0,o-h},vt=(e,t,o)=>Jn(e,ae,t,o),Yn=e=>{for(var t=0,o=0;o<e.length;++o){var l=e.charCodeAt(o);l<=127?t++:l<=2047?t+=2:l>=55296&&l<=57343?(t+=4,++o):t+=3}return t},Hr=typeof TextDecoder<"u"?new TextDecoder:void 0,Bt=(e,t,o)=>{for(var l=t+o,h=t;e[h]&&!(h>=l);)++h;if(h-t>16&&e.buffer&&Hr)return Hr.decode(e.subarray(t,h));for(var m="";t<h;){var w=e[t++];if(!(w&128)){m+=String.fromCharCode(w);continue}var f=e[t++]&63;if((w&224)==192){m+=String.fromCharCode((w&31)<<6|f);continue}var g=e[t++]&63;if((w&240)==224?w=(w&15)<<12|f<<6|g:w=(w&7)<<18|f<<12|g<<6|e[t++]&63,w<65536)m+=String.fromCharCode(w);else{var _=w-65536;m+=String.fromCharCode(55296|_>>10,56320|_&1023)}}return m},Xn=(e,t)=>e?Bt(ae,e,t):"",Qn=(e,t)=>{t=ue(t);var o=t==="std::string";pe(e,{name:t,fromWireType(l){var h=z[l>>2],m=l+4,w;if(o)for(var f=m,g=0;g<=h;++g){var _=m+g;if(g==h||ae[_]==0){var A=_-f,R=Xn(f,A);w===void 0?w=R:(w+="\0",w+=R),f=_+1}}else{for(var U=new Array(h),g=0;g<h;++g)U[g]=String.fromCharCode(ae[m+g]);w=U.join("")}return We(l),w},toWireType(l,h){h instanceof ArrayBuffer&&(h=new Uint8Array(h));var m,w=typeof h=="string";w||h instanceof Uint8Array||h instanceof Uint8ClampedArray||h instanceof Int8Array||N("Cannot pass non-string to std::string"),o&&w?m=Yn(h):m=h.length;var f=wr(4+m+1),g=f+4;if(z[f>>2]=m,o&&w)vt(h,g,m+1);else if(w)for(var _=0;_<m;++_){var A=h.charCodeAt(_);A>255&&(We(g),N("String has UTF-16 code units that do not fit in 8 bits")),ae[g+_]=A}else for(var _=0;_<m;++_)ae[g+_]=h[_];return l!==null&&l.push(We,f),f},argPackAdvance:$e,readValueFromPointer:L,destructorFunction(l){We(l)}})},Vr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Br=(e,t)=>{for(var o=e,l=o>>1,h=l+t/2;!(l>=h)&&De[l];)++l;if(o=l<<1,o-e>32&&Vr)return Vr.decode(ae.subarray(e,o));for(var m="",w=0;!(w>=t/2);++w){var f=Te[e+w*2>>1];if(f==0)break;m+=String.fromCharCode(f)}return m},Zn=(e,t,o)=>{var l;if((l=o)!==null&&l!==void 0||(o=2147483647),o<2)return 0;o-=2;for(var h=t,m=o<e.length*2?o/2:e.length,w=0;w<m;++w){var f=e.charCodeAt(w);Te[t>>1]=f,t+=2}return Te[t>>1]=0,t-h},Kn=e=>e.length*2,ea=(e,t)=>{for(var o=0,l="";!(o>=t/4);){var h=Pe[e+o*4>>2];if(h==0)break;if(++o,h>=65536){var m=h-65536;l+=String.fromCharCode(55296|m>>10,56320|m&1023)}else l+=String.fromCharCode(h)}return l},ta=(e,t,o)=>{var l;if((l=o)!==null&&l!==void 0||(o=2147483647),o<4)return 0;for(var h=t,m=h+o-4,w=0;w<e.length;++w){var f=e.charCodeAt(w);if(f>=55296&&f<=57343){var g=e.charCodeAt(++w);f=65536+((f&1023)<<10)|g&1023}if(Pe[t>>2]=f,t+=4,t+4>m)break}return Pe[t>>2]=0,t-h},ra=e=>{for(var t=0,o=0;o<e.length;++o){var l=e.charCodeAt(o);l>=55296&&l<=57343&&++o,t+=4}return t},na=(e,t,o)=>{o=ue(o);var l,h,m,w;t===2?(l=Br,h=Zn,w=Kn,m=f=>De[f>>1]):t===4&&(l=ea,h=ta,w=ra,m=f=>z[f>>2]),pe(e,{name:o,fromWireType:f=>{for(var g=z[f>>2],_,A=f+4,R=0;R<=g;++R){var U=f+4+R*t;if(R==g||m(U)==0){var B=U-A,X=l(A,B);_===void 0?_=X:(_+="\0",_+=X),A=U+t}}return We(f),_},toWireType:(f,g)=>{typeof g!="string"&&N(`Cannot pass non-string to C++ string type ${o}`);var _=w(g),A=wr(4+_+t);return z[A>>2]=_/t,h(g,A+4,_+t),f!==null&&f.push(We,A),A},argPackAdvance:$e,readValueFromPointer:L,destructorFunction(f){We(f)}})},aa=(e,t,o,l,h,m)=>{se[e]={name:ue(t),rawConstructor:Ee(o,l),rawDestructor:Ee(h,m),fields:[]}},oa=(e,t,o,l,h,m,w,f,g,_)=>{se[e].fields.push({fieldName:ue(t),getterReturnType:o,getter:Ee(l,h),getterContext:m,setterArgumentType:w,setter:Ee(f,g),setterContext:_})},ia=(e,t)=>{t=ue(t),pe(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(o,l)=>{}})},sa=(e,t,o)=>ae.copyWithin(e,t,t+o),vr=[],ca=(e,t,o,l)=>(e=vr[e],t=Fe.toValue(t),e(null,t,o,l)),ua={},la=e=>{var t=ua[e];return t===void 0?ue(e):t},Nt=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var o=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return o||delete t.$$$embind_global$$$,o}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},da=e=>e===0?Fe.toHandle(Nt()):(e=la(e),Fe.toHandle(Nt()[e])),mt=e=>{var t=vr.length;return vr.push(e),t},fa=(e,t)=>{for(var o=new Array(e),l=0;l<e;++l)o[l]=Vt(z[t+l*4>>2],"parameter "+l);return o},ha=Reflect.construct,pa=(e,t,o)=>{var l=[],h=e.toWireType(l,o);return l.length&&(z[t>>2]=Fe.toHandle(l)),h},va=(e,t,o)=>{var l=fa(e,t),h=l.shift();e--;var m=new Array(e),w=(g,_,A,R)=>{for(var U=0,B=0;B<e;++B)m[B]=l[B].readValueFromPointer(R+U),U+=l[B].argPackAdvance;var X=o===1?ha(_,m):_.apply(g,m);return pa(h,A,X)},f=`methodCaller<(${l.map(g=>g.name).join(", ")}) => ${h.name}>`;return mt(Be(f,w))},zt=e=>{e>9&&(ke[e+1]+=1)},ma=e=>{var t=Fe.toValue(e);Ve(t),pr(e)},Nr=(e,t)=>{e=Vt(e,"_emval_take_value");var o=e.readValueFromPointer(t);return Fe.toHandle(o)},zr=(e,t,o,l)=>{var h=new Date().getFullYear(),m=new Date(h,0,1),w=new Date(h,6,1),f=m.getTimezoneOffset(),g=w.getTimezoneOffset(),_=Math.max(f,g);z[e>>2]=_*60,Pe[t>>2]=+(f!=g);var A=B=>{var X=B>=0?"-":"+",fe=Math.abs(B),le=String(Math.floor(fe/60)).padStart(2,"0"),de=String(fe%60).padStart(2,"0");return`UTC${X}${le}${de}`},R=A(f),U=A(g);g<f?(vt(R,o,17),vt(U,l,17)):(vt(R,l,17),vt(U,o,17))},ya=()=>2147483648,ga=(e,t)=>Math.ceil(e/t)*t,wa=e=>{var t=I.buffer,o=(e-t.byteLength+65535)/65536;try{return I.grow(o),Ct(),1}catch{}},ba=e=>{var t=ae.length;e>>>=0;var o=ya();if(e>o)return!1;for(var l=1;l<=4;l*=2){var h=t*(1+.2/l);h=Math.min(h,e+100663296);var m=Math.min(o,ga(Math.max(e,h),65536)),w=wa(m);if(w)return!0}return!1},mr={},$a=()=>W||"./this.program",Y=()=>{if(!Y.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:$a()};for(var o in mr)mr[o]===void 0?delete t[o]:t[o]=mr[o];var l=[];for(var o in t)l.push(`${o}=${t[o]}`);Y.strings=l}return Y.strings},Ie=(e,t)=>{for(var o=0;o<e.length;++o)ce[t++]=e.charCodeAt(o);ce[t]=0},yr=(e,t)=>{var o=0;return Y().forEach((l,h)=>{var m=t+o;z[e+h*4>>2]=m,Ie(l,m),o+=l.length+1}),0},qr=(e,t)=>{var o=Y();z[e>>2]=o.length;var l=0;return o.forEach(h=>l+=h.length+1),z[t>>2]=l,0},Q=e=>52;function yt(e,t,o,l,h){return 70}var re=[null,[],[]],ne=(e,t)=>{var o=re[e];t===0||t===10?((e===1?Ue:V)(Bt(o,0)),o.length=0):o.push(t)},Gr=(e,t,o,l)=>{for(var h=0,m=0;m<o;m++){var w=z[t>>2],f=z[t+4>>2];t+=8;for(var g=0;g<f;g++)ne(e,ae[w+g]);h+=f}return z[l>>2]=h,0},Jr=e=>e;_r=d.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},$n(),Je=d.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},xr(),En(),jr(),ge=d.UnboundTypeError=Fr(Error,"UnboundTypeError"),Wn();var Yr={s:yn,v:ar,b:Pr,g:xt,q:Ge,Y:gn,f:wn,X:bn,e:tt,T:Sr,ha:or,S:Er,ba:ut,fa:jn,ea:kn,w:Fn,aa:Wr,x:Ur,h:Ln,M:Lr,N:Vn,t:Nn,o:zn,ga:Gn,L:Qn,C:na,B:aa,ia:oa,ca:ia,$:sa,E:ca,ka:pr,la:da,K:va,O:zt,P:ma,da:Nr,U:zr,Z:ba,V:yr,W:qr,_:Q,R:yt,J:Gr,F:u,D:_a,G:s,n:v,a:Ca,d:Oa,p:Sa,j:a,I:an,u:qt,H:n,z:b,Q:S,l:Aa,k:Ea,c:Pa,m:Ta,A:Da,r:y,i:xa,y:$,ja:Jr},Z=rr(),gr=e=>(gr=Z.oa)(e),We=d._free=e=>(We=d._free=Z.pa)(e),wr=d._malloc=e=>(wr=d._malloc=Z.ra)(e),K=(e,t)=>(K=Z.sa)(e,t),Xr=e=>(Xr=Z.ta)(e),Qr=e=>(Qr=Z.ua)(e),Zr=()=>(Zr=Z.va)(),Kr=e=>(Kr=Z.wa)(e),en=e=>(en=Z.xa)(e),tn=(e,t,o)=>(tn=Z.ya)(e,t,o),rn=e=>(rn=Z.za)(e);d.dynCall_viijii=(e,t,o,l,h,m,w)=>(d.dynCall_viijii=Z.Aa)(e,t,o,l,h,m,w),d.dynCall_jiji=(e,t,o,l,h)=>(d.dynCall_jiji=Z.Ba)(e,t,o,l,h);var nn=d.dynCall_jiiii=(e,t,o,l,h)=>(nn=d.dynCall_jiiii=Z.Ca)(e,t,o,l,h);d.dynCall_iiiiij=(e,t,o,l,h,m,w)=>(d.dynCall_iiiiij=Z.Da)(e,t,o,l,h,m,w),d.dynCall_iiiiijj=(e,t,o,l,h,m,w,f,g)=>(d.dynCall_iiiiijj=Z.Ea)(e,t,o,l,h,m,w,f,g),d.dynCall_iiiiiijj=(e,t,o,l,h,m,w,f,g,_)=>(d.dynCall_iiiiiijj=Z.Fa)(e,t,o,l,h,m,w,f,g,_);function Ca(e,t){var o=ie();try{return te(e)(t)}catch(l){if(oe(o),l!==l+0)throw l;K(1,0)}}function Ta(e,t,o,l){var h=ie();try{te(e)(t,o,l)}catch(m){if(oe(h),m!==m+0)throw m;K(1,0)}}function Pa(e,t,o){var l=ie();try{te(e)(t,o)}catch(h){if(oe(l),h!==h+0)throw h;K(1,0)}}function Sa(e,t,o,l){var h=ie();try{return te(e)(t,o,l)}catch(m){if(oe(h),m!==m+0)throw m;K(1,0)}}function _a(e,t,o,l,h){var m=ie();try{return te(e)(t,o,l,h)}catch(w){if(oe(m),w!==w+0)throw w;K(1,0)}}function Ea(e,t){var o=ie();try{te(e)(t)}catch(l){if(oe(o),l!==l+0)throw l;K(1,0)}}function Oa(e,t,o){var l=ie();try{return te(e)(t,o)}catch(h){if(oe(l),h!==h+0)throw h;K(1,0)}}function Aa(e){var t=ie();try{te(e)()}catch(o){if(oe(t),o!==o+0)throw o;K(1,0)}}function xa(e,t,o,l,h,m,w,f,g,_,A){var R=ie();try{te(e)(t,o,l,h,m,w,f,g,_,A)}catch(U){if(oe(R),U!==U+0)throw U;K(1,0)}}function Da(e,t,o,l,h){var m=ie();try{te(e)(t,o,l,h)}catch(w){if(oe(m),w!==w+0)throw w;K(1,0)}}function qt(e,t,o,l,h,m,w){var f=ie();try{return te(e)(t,o,l,h,m,w)}catch(g){if(oe(f),g!==g+0)throw g;K(1,0)}}function an(e,t,o,l,h,m){var w=ie();try{return te(e)(t,o,l,h,m)}catch(f){if(oe(w),f!==f+0)throw f;K(1,0)}}function n(e,t,o,l,h,m,w,f){var g=ie();try{return te(e)(t,o,l,h,m,w,f)}catch(_){if(oe(g),_!==_+0)throw _;K(1,0)}}function a(e,t,o,l,h){var m=ie();try{return te(e)(t,o,l,h)}catch(w){if(oe(m),w!==w+0)throw w;K(1,0)}}function s(e,t,o,l){var h=ie();try{return te(e)(t,o,l)}catch(m){if(oe(h),m!==m+0)throw m;K(1,0)}}function u(e,t,o,l){var h=ie();try{return te(e)(t,o,l)}catch(m){if(oe(h),m!==m+0)throw m;K(1,0)}}function v(e){var t=ie();try{return te(e)()}catch(o){if(oe(t),o!==o+0)throw o;K(1,0)}}function y(e,t,o,l,h,m,w,f){var g=ie();try{te(e)(t,o,l,h,m,w,f)}catch(_){if(oe(g),_!==_+0)throw _;K(1,0)}}function b(e,t,o,l,h,m,w,f,g,_,A,R){var U=ie();try{return te(e)(t,o,l,h,m,w,f,g,_,A,R)}catch(B){if(oe(U),B!==B+0)throw B;K(1,0)}}function $(e,t,o,l,h,m,w,f,g,_,A,R,U,B,X,fe){var le=ie();try{te(e)(t,o,l,h,m,w,f,g,_,A,R,U,B,X,fe)}catch(de){if(oe(le),de!==de+0)throw de;K(1,0)}}function S(e,t,o,l,h){var m=ie();try{return nn(e,t,o,l,h)}catch(w){if(oe(m),w!==w+0)throw w;K(1,0)}}var O;He=function e(){O||M(),O||(He=e)};function M(){if(ve>0||(ze(),ve>0))return;function e(){var t;O||(O=!0,d.calledRun=!0,!xe&&(Qt(),T(d),(t=d.onRuntimeInitialized)===null||t===void 0||t.call(d),Le()))}d.setStatus?(d.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>d.setStatus(""),1),e()},1)):e()}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();return M(),p=j,p}})();function mi(r){return Ra(ka,r)}async function yi(r,c){return pi(ka,r,c)}async function gi(r,c){return vi(ka,r,c)}const so=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],wi=[...so,["unknown"]].map(r=>r[0]),ja=new Map(so);function bi(r){for(const[c,i]of ja)if(r===i)return c;return"unknown"}function $i(r){if(co(r))return{width:r.naturalWidth,height:r.naturalHeight};if(uo(r))return{width:r.width.baseVal.value,height:r.height.baseVal.value};if(lo(r))return{width:r.videoWidth,height:r.videoHeight};if(ho(r))return{width:r.width,height:r.height};if(vo(r))return{width:r.displayWidth,height:r.displayHeight};if(fo(r))return{width:r.width,height:r.height};if(po(r))return{width:r.width,height:r.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function co(r){var c,i;try{return r instanceof((i=(c=r==null?void 0:r.ownerDocument)==null?void 0:c.defaultView)==null?void 0:i.HTMLImageElement)}catch{return!1}}function uo(r){var c,i;try{return r instanceof((i=(c=r==null?void 0:r.ownerDocument)==null?void 0:c.defaultView)==null?void 0:i.SVGImageElement)}catch{return!1}}function lo(r){var c,i;try{return r instanceof((i=(c=r==null?void 0:r.ownerDocument)==null?void 0:c.defaultView)==null?void 0:i.HTMLVideoElement)}catch{return!1}}function fo(r){var c,i;try{return r instanceof((i=(c=r==null?void 0:r.ownerDocument)==null?void 0:c.defaultView)==null?void 0:i.HTMLCanvasElement)}catch{return!1}}function ho(r){try{return r instanceof ImageBitmap||Object.prototype.toString.call(r)==="[object ImageBitmap]"}catch{return!1}}function po(r){try{return r instanceof OffscreenCanvas||Object.prototype.toString.call(r)==="[object OffscreenCanvas]"}catch{return!1}}function vo(r){try{return r instanceof VideoFrame||Object.prototype.toString.call(r)==="[object VideoFrame]"}catch{return!1}}function mo(r){try{return r instanceof Blob||Object.prototype.toString.call(r)==="[object Blob]"}catch{return!1}}function Ci(r){try{return r instanceof ImageData||Object.prototype.toString.call(r)==="[object ImageData]"}catch{return!1}}function Ti(r,c){try{const i=new OffscreenCanvas(r,c);if(i.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return i;throw void 0}catch{const i=document.createElement("canvas");return i.width=r,i.height=c,i}}async function yo(r){if(co(r)&&!await Ei(r))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(uo(r)&&!await Oi(r))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(vo(r)&&Ai(r))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(lo(r)&&(r.readyState===0||r.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(ho(r)&&Di(r))throw new DOMException("The image source is detached.","InvalidStateError");const{width:c,height:i}=$i(r);if(c===0||i===0)return null;const p=Ti(c,i).getContext("2d");p.drawImage(r,0,0);try{return p.getImageData(0,0,c,i)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Pi(r){let c;try{if(globalThis.createImageBitmap)c=await createImageBitmap(r);else if(globalThis.Image){c=new Image;let i="";try{i=URL.createObjectURL(r),c.src=i,await c.decode()}finally{URL.revokeObjectURL(i)}}else return r}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await yo(c)}function Si(r){const{width:c,height:i}=r;if(c===0||i===0)return null;const p=r.getContext("2d");try{return p.getImageData(0,0,c,i)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function _i(r){if(mo(r))return await Pi(r);if(Ci(r)){if(xi(r))throw new DOMException("The image data has been detached.","InvalidStateError");return r}return fo(r)||po(r)?Si(r):await yo(r)}async function Ei(r){try{return await r.decode(),!0}catch{return!1}}async function Oi(r){var c;try{return await((c=r.decode)==null?void 0:c.call(r)),!0}catch{return!1}}function Ai(r){return r.format===null}function xi(r){return r.data.buffer.byteLength===0}function Di(r){return r.width===0&&r.height===0}function za(r,c){return Mi(r)?new DOMException(`${c}: ${r.message}`,r.name):ji(r)?new r.constructor(`${c}: ${r.message}`):new Error(`${c}: ${r}`)}function Mi(r){return r instanceof DOMException||Object.prototype.toString.call(r)==="[object DOMException]"}function ji(r){return r instanceof Error||Object.prototype.toString.call(r)==="[object Error]"}var dn;let qs=class extends EventTarget{constructor(c={}){var i;super(),ni(this,dn);try{const p=(i=c==null?void 0:c.formats)==null?void 0:i.filter(d=>d!=="unknown");if((p==null?void 0:p.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const d of p??[])if(!ja.has(d))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${d}' is not a valid enum value of type BarcodeFormat.`);ai(this,dn,p??[]),mi().then(d=>{this.dispatchEvent(new CustomEvent("load",{detail:d}))}).catch(d=>{this.dispatchEvent(new CustomEvent("error",{detail:d}))})}catch(p){throw za(p,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return wi.filter(c=>c!=="unknown")}async detect(c){try{const i=await _i(c);if(i===null)return[];let p;const d={tryHarder:!0,returnCodabarStartEnd:!0,formats:ri(this,dn).map(T=>ja.get(T))};try{mo(i)?p=await yi(i,d):p=await gi(i,d)}catch(T){throw console.error(T),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return p.map(T=>{const{topLeft:{x:P,y:j},topRight:{x:C,y:E},bottomLeft:{x,y:D},bottomRight:{x:W,y:F}}=T.position,H=Math.min(P,C,x,W),q=Math.min(j,E,D,F),G=Math.max(P,C,x,W),J=Math.max(j,E,D,F);return{boundingBox:new DOMRectReadOnly(H,q,G-H,J-q),rawValue:T.text,format:bi(T.format),cornerPoints:[{x:P,y:j},{x:C,y:E},{x:W,y:F},{x,y:D}]}})}catch(i){throw za(i,"Failed to execute 'detect' on 'BarcodeDetector'")}}};dn=new WeakMap;var go=(r,c,i)=>{if(!c.has(r))throw TypeError("Cannot "+i)},qa=(r,c,i)=>(go(r,c,"read from private field"),i?i.call(r):c.get(r)),Ri=(r,c,i)=>{if(c.has(r))throw TypeError("Cannot add the same private member more than once");c instanceof WeakSet?c.add(r):c.set(r,i)},ki=(r,c,i,p)=>(go(r,c,"write to private field"),c.set(r,i),i);const wo=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],Fi=[...wo,["unknown"]].map(r=>r[0]),fn=new Map(wo);function Ii(r){for(const[c,i]of fn)if(r===i)return c;return"unknown"}function Wi(r){if(bo(r))return{width:r.naturalWidth,height:r.naturalHeight};if($o(r))return{width:r.width.baseVal.value,height:r.height.baseVal.value};if(Co(r))return{width:r.videoWidth,height:r.videoHeight};if(Po(r))return{width:r.width,height:r.height};if(_o(r))return{width:r.displayWidth,height:r.displayHeight};if(To(r))return{width:r.width,height:r.height};if(So(r))return{width:r.width,height:r.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function bo(r){try{return r instanceof HTMLImageElement}catch{return!1}}function $o(r){try{return r instanceof SVGImageElement}catch{return!1}}function Co(r){try{return r instanceof HTMLVideoElement}catch{return!1}}function To(r){try{return r instanceof HTMLCanvasElement}catch{return!1}}function Po(r){try{return r instanceof ImageBitmap}catch{return!1}}function So(r){try{return r instanceof OffscreenCanvas}catch{return!1}}function _o(r){try{return r instanceof VideoFrame}catch{return!1}}function Eo(r){try{return r instanceof Blob}catch{return!1}}function Ui(r){try{return r instanceof ImageData}catch{return!1}}function Li(r,c){try{const i=new OffscreenCanvas(r,c);if(i.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return i;throw void 0}catch{const p=document.createElement("canvas");return p.width=r,p.height=c,p}}async function Oo(r){if(bo(r)&&!await Ni(r))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if($o(r)&&!await zi(r))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(_o(r)&&qi(r))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Co(r)&&(r.readyState===0||r.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Po(r)&&Ji(r))throw new DOMException("The image source is detached.","InvalidStateError");const{width:c,height:i}=Wi(r);if(c===0||i===0)return null;const p=Li(c,i).getContext("2d");p.drawImage(r,0,0);try{return p.getImageData(0,0,c,i)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Hi(r){let c;try{if(globalThis.createImageBitmap)c=await createImageBitmap(r);else if(globalThis.Image){c=new Image;let i="";try{i=URL.createObjectURL(r),c.src=i,await c.decode()}finally{URL.revokeObjectURL(i)}}else return r}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Oo(c)}function Vi(r){const{width:c,height:i}=r;if(c===0||i===0)return null;const p=r.getContext("2d");try{return p.getImageData(0,0,c,i)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Bi(r){if(Eo(r))return await Hi(r);if(Ui(r)){if(Gi(r))throw new DOMException("The image data has been detached.","InvalidStateError");return r}return To(r)||So(r)?Vi(r):await Oo(r)}async function Ni(r){try{return await r.decode(),!0}catch{return!1}}async function zi(r){var c;try{return await((c=r.decode)==null?void 0:c.call(r)),!0}catch{return!1}}function qi(r){return r.format===null}function Gi(r){return r.data.buffer.byteLength===0}function Ji(r){return r.width===0&&r.height===0}function Ga(r,c){return r instanceof DOMException?new DOMException(`${c}: ${r.message}`,r.name):r instanceof Error?new r.constructor(`${c}: ${r.message}`):new Error(`${c}: ${r}`)}const Ja=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function Yi(r){return r.join("|")}function Xi(r){const c=Ya(r);let i=0,p=Ja.length-1;for(;i<=p;){const d=Math.floor((i+p)/2),T=Ja[d],P=Ya(T);if(P===c)return T;P<c?i=d+1:p=d-1}return"None"}function Ya(r){return r.toLowerCase().replace(/_-\[\]/g,"")}function Qi(r,c){return r.Binarizer[c]}function Zi(r,c){return r.CharacterSet[c]}const Ki=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function es(r){return Ki[r.value]}function ts(r,c){return r.EanAddOnSymbol[c]}function rs(r,c){return r.TextMode[c]}const Xt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Ao(r,c){return{...c,formats:Yi(c.formats),binarizer:Qi(r,c.binarizer),eanAddOnSymbol:ts(r,c.eanAddOnSymbol),textMode:rs(r,c.textMode),characterSet:Zi(r,c.characterSet)}}function xo(r){return{...r,format:Xi(r.format),eccLevel:r.eccLevel,contentType:es(r.contentType)}}const ns={locateFile:(r,c)=>{const i=r.match(/_(.+?)\.wasm$/);return i?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${i[1]}/${r}`:c+r}};let Xa=new WeakMap;function Fa(r,c){var i;const p=Xa.get(r);if(p!=null&&p.modulePromise&&c===void 0)return p.modulePromise;const d=(i=p==null?void 0:p.moduleOverrides)!=null?i:ns,T=r({...d});return Xa.set(r,{moduleOverrides:d,modulePromise:T}),T}async function as(r,c,i=Xt){const p={...Xt,...i},d=await Fa(r),{size:T}=c,P=new Uint8Array(await c.arrayBuffer()),j=d._malloc(T);d.HEAPU8.set(P,j);const C=d.readBarcodesFromImage(j,T,Ao(d,p));d._free(j);const E=[];for(let x=0;x<C.size();++x)E.push(xo(C.get(x)));return E}async function os(r,c,i=Xt){const p={...Xt,...i},d=await Fa(r),{data:T,width:P,height:j,data:{byteLength:C}}=c,E=d._malloc(C);d.HEAPU8.set(T,E);const x=d.readBarcodesFromPixmap(E,P,j,Ao(d,p));d._free(E);const D=[];for(let W=0;W<x.size();++W)D.push(xo(x.get(W)));return D}({...Xt,formats:[...Xt.formats]});var Ia=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(c={}){var i=c,p,d;i.ready=new Promise((n,a)=>{p=n,d=a});var T=Object.assign({},i),P="./this.program",j=typeof window=="object",C=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var E="";function x(n){return i.locateFile?i.locateFile(n,E):E+n}var D;(j||C)&&(C?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),r&&(E=r),E.indexOf("blob:")!==0?E=E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):E="",C&&(D=n=>{var a=new XMLHttpRequest;return a.open("GET",n,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)})),i.print||console.log.bind(console);var W=i.printErr||console.error.bind(console);Object.assign(i,T),T=null,i.arguments&&i.arguments,i.thisProgram&&(P=i.thisProgram),i.quit&&i.quit;var F;i.wasmBinary&&(F=i.wasmBinary),typeof WebAssembly!="object"&&me("no native wasm support detected");var H,q=!1,G,J,Ue,V,k,I,xe,ce;function ae(){var n=H.buffer;i.HEAP8=G=new Int8Array(n),i.HEAP16=Ue=new Int16Array(n),i.HEAPU8=J=new Uint8Array(n),i.HEAPU16=V=new Uint16Array(n),i.HEAP32=k=new Int32Array(n),i.HEAPU32=I=new Uint32Array(n),i.HEAPF32=xe=new Float32Array(n),i.HEAPF64=ce=new Float64Array(n)}var Te=[],De=[],Pe=[];function z(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Ct(i.preRun.shift());_t(Te)}function bt(){_t(De)}function $t(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)et(i.postRun.shift());_t(Pe)}function Ct(n){Te.unshift(n)}function Tt(n){De.unshift(n)}function et(n){Pe.unshift(n)}var Se=0,ze=null;function Qt(n){var a;Se++,(a=i.monitorRunDependencies)===null||a===void 0||a.call(i,Se)}function Le(n){var a;if(Se--,(a=i.monitorRunDependencies)===null||a===void 0||a.call(i,Se),Se==0&&ze){var s=ze;ze=null,s()}}function me(n){var a;(a=i.onAbort)===null||a===void 0||a.call(i,n),n="Aborted("+n+")",W(n),q=!0,n+=". Build with -sASSERTIONS for more info.";var s=new WebAssembly.RuntimeError(n);throw d(s),s}var Zt="data:application/octet-stream;base64,",Pt=n=>n.startsWith(Zt),ve;ve="zxing_reader.wasm",Pt(ve)||(ve=x(ve));function He(n){if(n==ve&&F)return new Uint8Array(F);if(D)return D(n);throw"both async and sync fetching of the wasm failed"}function Kt(n){return!F&&(j||C)&&typeof fetch=="function"?fetch(n,{credentials:"same-origin"}).then(a=>{if(!a.ok)throw"failed to load wasm binary file at '"+n+"'";return a.arrayBuffer()}).catch(()=>He(n)):Promise.resolve().then(()=>He(n))}function St(n,a,s){return Kt(n).then(u=>WebAssembly.instantiate(u,a)).then(u=>u).then(s,u=>{W(`failed to asynchronously prepare wasm: ${u}`),me(u)})}function er(n,a,s,u){return!n&&typeof WebAssembly.instantiateStreaming=="function"&&!Pt(a)&&typeof fetch=="function"?fetch(a,{credentials:"same-origin"}).then(v=>{var y=WebAssembly.instantiateStreaming(v,s);return y.then(u,function(b){return W(`wasm streaming compile failed: ${b}`),W("falling back to ArrayBuffer instantiation"),St(a,s,u)})}):St(a,s,u)}function vn(){var n={a:$a};function a(u,v){return Y=u.exports,H=Y.ia,ae(),Dr=Y.ma,Tt(Y.ja),Le(),Y}Qt();function s(u){a(u.instance)}if(i.instantiateWasm)try{return i.instantiateWasm(n,a)}catch(u){W(`Module.instantiateWasm callback failed with error: ${u}`),d(u)}return er(F,ve,n,s).catch(d),{}}var _t=n=>{for(;n.length>0;)n.shift()(i)};i.noExitRuntime;var Et=[],qe=0,Cr=n=>{var a=new tr(n);return a.get_caught()||(a.set_caught(!0),qe--),a.set_rethrown(!1),Et.push(a),Jr(a.excPtr),a.get_exception_ptr()},Me=0,Tr=()=>{Q(0,0);var n=Et.pop();Gr(n.excPtr),Me=0};function tr(n){this.excPtr=n,this.ptr=n-24,this.set_type=function(a){I[this.ptr+4>>2]=a},this.get_type=function(){return I[this.ptr+4>>2]},this.set_destructor=function(a){I[this.ptr+8>>2]=a},this.get_destructor=function(){return I[this.ptr+8>>2]},this.set_caught=function(a){a=a?1:0,G[this.ptr+12>>0]=a},this.get_caught=function(){return G[this.ptr+12>>0]!=0},this.set_rethrown=function(a){a=a?1:0,G[this.ptr+13>>0]=a},this.get_rethrown=function(){return G[this.ptr+13>>0]!=0},this.init=function(a,s){this.set_adjusted_ptr(0),this.set_type(a),this.set_destructor(s)},this.set_adjusted_ptr=function(a){I[this.ptr+16>>2]=a},this.get_adjusted_ptr=function(){return I[this.ptr+16>>2]},this.get_exception_ptr=function(){var a=Z(this.get_type());if(a)return I[this.excPtr>>2];var s=this.get_adjusted_ptr();return s!==0?s:this.excPtr}}var mn=n=>{throw Me||(Me=n),Me},rr=n=>{var a=Me;if(!a)return yt(0),0;var s=new tr(a);s.set_adjusted_ptr(a);var u=s.get_type();if(!u)return yt(0),a;for(var v in n){var y=n[v];if(y===0||y===u)break;var b=s.ptr+16;if(Yr(y,u,b))return yt(y),a}return yt(u),a},nr=()=>rr([]),oe=n=>rr([n]),ie=(n,a)=>rr([n,a]),Ot=()=>{var n=Et.pop();n||me("no exception to throw");var a=n.excPtr;throw n.get_rethrown()||(Et.push(n),n.set_rethrown(!0),n.set_caught(!1),qe++),Me=a,Me},At=(n,a,s)=>{var u=new tr(n);throw u.init(a,s),Me=n,qe++,Me},yn=()=>qe,be={},ar=n=>{for(;n.length;){var a=n.pop(),s=n.pop();s(a)}};function ct(n){return this.fromWireType(k[n>>2])}var tt={},Ae={},rt={},Pr,xt=n=>{throw new Pr(n)},Ge=(n,a,s)=>{n.forEach(function($){rt[$]=a});function u($){var S=s($);S.length!==n.length&&xt("Mismatched type converter count");for(var O=0;O<n.length;++O)he(n[O],S[O])}var v=new Array(a.length),y=[],b=0;a.forEach(($,S)=>{Ae.hasOwnProperty($)?v[S]=Ae[$]:(y.push($),tt.hasOwnProperty($)||(tt[$]=[]),tt[$].push(()=>{v[S]=Ae[$],++b,b===y.length&&u(v)}))}),y.length===0&&u(v)},gn=n=>{var a=be[n];delete be[n];var s=a.rawConstructor,u=a.rawDestructor,v=a.fields,y=v.map(b=>b.getterReturnType).concat(v.map(b=>b.setterArgumentType));Ge([n],y,b=>{var $={};return v.forEach((S,O)=>{var M=S.fieldName,e=b[O],t=S.getter,o=S.getterContext,l=b[O+v.length],h=S.setter,m=S.setterContext;$[M]={read:w=>e.fromWireType(t(o,w)),write:(w,f)=>{var g=[];h(m,w,l.toWireType(g,f)),ar(g)}}}),[{name:a.name,fromWireType:S=>{var O={};for(var M in $)O[M]=$[M].read(S);return u(S),O},toWireType:(S,O)=>{for(var M in $)if(!(M in O))throw new TypeError(`Missing field: "${M}"`);var e=s();for(M in $)$[M].write(e,O[M]);return S!==null&&S.push(u,e),e},argPackAdvance:ye,readValueFromPointer:ct,destructorFunction:u}]})},wn=(n,a,s,u,v)=>{},bn=()=>{for(var n=new Array(256),a=0;a<256;++a)n[a]=String.fromCharCode(a);Sr=n},Sr,se=n=>{for(var a="",s=n;J[s];)a+=Sr[J[s++]];return a},Ve,L=n=>{throw new Ve(n)};function nt(n,a){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var u=a.name;if(n||L(`type "${u}" must have a positive integer typeid pointer`),Ae.hasOwnProperty(n)){if(s.ignoreDuplicateRegistrations)return;L(`Cannot register type '${u}' twice`)}if(Ae[n]=a,delete rt[n],tt.hasOwnProperty(n)){var v=tt[n];delete tt[n],v.forEach(y=>y())}}function he(n,a){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in a))throw new TypeError("registerType registeredInstance requires argPackAdvance");return nt(n,a,s)}var ye=8,_r=(n,a,s,u)=>{a=se(a),he(n,{name:a,fromWireType:function(v){return!!v},toWireType:function(v,y){return y?s:u},argPackAdvance:ye,readValueFromPointer:function(v){return this.fromWireType(J[v])},destructorFunction:null})},Dt=n=>({count:n.count,deleteScheduled:n.deleteScheduled,preservePointerOnDelete:n.preservePointerOnDelete,ptr:n.ptr,ptrType:n.ptrType,smartPtr:n.smartPtr,smartPtrType:n.smartPtrType}),je=n=>{function a(s){return s.$$.ptrType.registeredClass.name}L(a(n)+" instance already deleted")},or=!1,Er=n=>{},$n=n=>{n.smartPtr?n.smartPtrType.rawDestructor(n.smartPtr):n.ptrType.registeredClass.rawDestructor(n.ptr)},ir=n=>{n.count.value-=1;var a=n.count.value===0;a&&$n(n)},ue=(n,a,s)=>{if(a===s)return n;if(s.baseClass===void 0)return null;var u=ue(n,a,s.baseClass);return u===null?null:s.downcast(u)},Je={},N=()=>Object.keys(Ye).length,Cn=()=>{var n=[];for(var a in Ye)Ye.hasOwnProperty(a)&&n.push(Ye[a]);return n},pe=[],$e=()=>{for(;pe.length;){var n=pe.pop();n.$$.deleteScheduled=!1,n.delete()}},ut,Tn=n=>{ut=n,pe.length&&ut&&ut($e)},sr=()=>{i.getInheritedInstanceCount=N,i.getLiveInheritedInstances=Cn,i.flushPendingDeletes=$e,i.setDelayFunction=Tn},Ye={},Or=(n,a)=>{for(a===void 0&&L("ptr should not be undefined");n.baseClass;)a=n.upcast(a),n=n.baseClass;return a},Pn=(n,a)=>(a=Or(n,a),Ye[a]),lt=(n,a)=>{(!a.ptrType||!a.ptr)&&xt("makeClassHandle requires ptr and ptrType");var s=!!a.smartPtrType,u=!!a.smartPtr;return s!==u&&xt("Both smartPtrType and smartPtr must be specified"),a.count={value:1},at(Object.create(n,{$$:{value:a,writable:!0}}))};function Ar(n){var a=this.getPointee(n);if(!a)return this.destructor(n),null;var s=Pn(this.registeredClass,a);if(s!==void 0){if(s.$$.count.value===0)return s.$$.ptr=a,s.$$.smartPtr=n,s.clone();var u=s.clone();return this.destructor(n),u}function v(){return this.isSmartPointer?lt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:a,smartPtrType:this,smartPtr:n}):lt(this.registeredClass.instancePrototype,{ptrType:this,ptr:n})}var y=this.registeredClass.getActualType(a),b=Je[y];if(!b)return v.call(this);var $;this.isConst?$=b.constPointerType:$=b.pointerType;var S=ue(a,this.registeredClass,$.registeredClass);return S===null?v.call(this):this.isSmartPointer?lt($.registeredClass.instancePrototype,{ptrType:$,ptr:S,smartPtrType:this,smartPtr:n}):lt($.registeredClass.instancePrototype,{ptrType:$,ptr:S})}var at=n=>typeof FinalizationRegistry>"u"?(at=a=>a,n):(or=new FinalizationRegistry(a=>{ir(a.$$)}),at=a=>{var s=a.$$,u=!!s.smartPtr;if(u){var v={$$:s};or.register(a,v,a)}return a},Er=a=>or.unregister(a),at(n)),Sn=()=>{Object.assign(Mt.prototype,{isAliasOf(n){if(!(this instanceof Mt)||!(n instanceof Mt))return!1;var a=this.$$.ptrType.registeredClass,s=this.$$.ptr;n.$$=n.$$;for(var u=n.$$.ptrType.registeredClass,v=n.$$.ptr;a.baseClass;)s=a.upcast(s),a=a.baseClass;for(;u.baseClass;)v=u.upcast(v),u=u.baseClass;return a===u&&s===v},clone(){if(this.$$.ptr||je(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var n=at(Object.create(Object.getPrototypeOf(this),{$$:{value:Dt(this.$$)}}));return n.$$.count.value+=1,n.$$.deleteScheduled=!1,n},delete(){this.$$.ptr||je(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&L("Object already scheduled for deletion"),Er(this),ir(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||je(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&L("Object already scheduled for deletion"),pe.push(this),pe.length===1&&ut&&ut($e),this.$$.deleteScheduled=!0,this}})};function Mt(){}var Re=(n,a)=>Object.defineProperty(a,"name",{value:n}),jt=(n,a,s)=>{if(n[a].overloadTable===void 0){var u=n[a];n[a]=function(){return n[a].overloadTable.hasOwnProperty(arguments.length)||L(`Function '${s}' called with an invalid number of arguments (${arguments.length}) - expects one of (${n[a].overloadTable})!`),n[a].overloadTable[arguments.length].apply(this,arguments)},n[a].overloadTable=[],n[a].overloadTable[u.argCount]=u}},Xe=(n,a,s)=>{i.hasOwnProperty(n)?((s===void 0||i[n].overloadTable!==void 0&&i[n].overloadTable[s]!==void 0)&&L(`Cannot register public name '${n}' twice`),jt(i,n,n),i.hasOwnProperty(s)&&L(`Cannot register multiple overloads of a function with the same number of arguments (${s})!`),i[n].overloadTable[s]=a):(i[n]=a,s!==void 0&&(i[n].numArguments=s))},_n=48,En=57,dt=n=>{if(n===void 0)return"_unknown";n=n.replace(/[^a-zA-Z0-9_]/g,"$");var a=n.charCodeAt(0);return a>=_n&&a<=En?`_${n}`:n};function On(n,a,s,u,v,y,b,$){this.name=n,this.constructor=a,this.instancePrototype=s,this.rawDestructor=u,this.baseClass=v,this.getActualType=y,this.upcast=b,this.downcast=$,this.pureVirtualFunctions=[]}var cr=(n,a,s)=>{for(;a!==s;)a.upcast||L(`Expected null or instance of ${s.name}, got an instance of ${a.name}`),n=a.upcast(n),a=a.baseClass;return n};function Rt(n,a){if(a===null)return this.isReference&&L(`null is not a valid ${this.name}`),0;a.$$||L(`Cannot pass "${ht(a)}" as a ${this.name}`),a.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`);var s=a.$$.ptrType.registeredClass,u=cr(a.$$.ptr,s,this.registeredClass);return u}function An(n,a){var s;if(a===null)return this.isReference&&L(`null is not a valid ${this.name}`),this.isSmartPointer?(s=this.rawConstructor(),n!==null&&n.push(this.rawDestructor,s),s):0;(!a||!a.$$)&&L(`Cannot pass "${ht(a)}" as a ${this.name}`),a.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&a.$$.ptrType.isConst&&L(`Cannot convert argument of type ${a.$$.smartPtrType?a.$$.smartPtrType.name:a.$$.ptrType.name} to parameter type ${this.name}`);var u=a.$$.ptrType.registeredClass;if(s=cr(a.$$.ptr,u,this.registeredClass),this.isSmartPointer)switch(a.$$.smartPtr===void 0&&L("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:a.$$.smartPtrType===this?s=a.$$.smartPtr:L(`Cannot convert argument of type ${a.$$.smartPtrType?a.$$.smartPtrType.name:a.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:s=a.$$.smartPtr;break;case 2:if(a.$$.smartPtrType===this)s=a.$$.smartPtr;else{var v=a.clone();s=this.rawShare(s,Oe.toHandle(()=>v.delete())),n!==null&&n.push(this.rawDestructor,s)}break;default:L("Unsupporting sharing policy")}return s}function ft(n,a){if(a===null)return this.isReference&&L(`null is not a valid ${this.name}`),0;a.$$||L(`Cannot pass "${ht(a)}" as a ${this.name}`),a.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`),a.$$.ptrType.isConst&&L(`Cannot convert argument of type ${a.$$.ptrType.name} to parameter type ${this.name}`);var s=a.$$.ptrType.registeredClass,u=cr(a.$$.ptr,s,this.registeredClass);return u}function xr(n){return this.fromWireType(I[n>>2])}var kt=()=>{Object.assign(Be.prototype,{getPointee(n){return this.rawGetPointee&&(n=this.rawGetPointee(n)),n},destructor(n){var a;(a=this.rawDestructor)===null||a===void 0||a.call(this,n)},argPackAdvance:ye,readValueFromPointer:xr,deleteObject(n){n!==null&&n.delete()},fromWireType:Ar})};function Be(n,a,s,u,v,y,b,$,S,O,M){this.name=n,this.registeredClass=a,this.isReference=s,this.isConst=u,this.isSmartPointer=v,this.pointeeType=y,this.sharingPolicy=b,this.rawGetPointee=$,this.rawConstructor=S,this.rawShare=O,this.rawDestructor=M,!v&&a.baseClass===void 0?u?(this.toWireType=Rt,this.destructorFunction=null):(this.toWireType=ft,this.destructorFunction=null):this.toWireType=An}var ur=(n,a,s)=>{i.hasOwnProperty(n)||xt("Replacing nonexistant public symbol"),i[n].overloadTable!==void 0&&s!==void 0?i[n].overloadTable[s]=a:(i[n]=a,i[n].argCount=s)},lr=(n,a,s)=>{var u=i["dynCall_"+n];return s&&s.length?u.apply(null,[a].concat(s)):u.call(null,a)},Ft=[],Dr,ee=n=>{var a=Ft[n];return a||(n>=Ft.length&&(Ft.length=n+1),Ft[n]=a=Dr.get(n)),a},xn=(n,a,s)=>{if(n.includes("j"))return lr(n,a,s);var u=ee(a).apply(null,s);return u},dr=(n,a)=>{var s=[];return function(){return s.length=0,Object.assign(s,arguments),xn(n,a,s)}},_e=(n,a)=>{n=se(n);function s(){return n.includes("j")?dr(n,a):ee(a)}var u=s();return typeof u!="function"&&L(`unknown function pointer with signature ${n}: ${a}`),u},Dn=(n,a)=>{var s=Re(a,function(u){this.name=a,this.message=u;var v=new Error(u).stack;v!==void 0&&(this.stack=this.toString()+`
`+v.replace(/^Error(:[^\n]*)?\n/,""))});return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},s},Mr,jr=n=>{var a=qr(n),s=se(a);return Ie(a),s},Qe=(n,a)=>{var s=[],u={};function v(y){if(!u[y]&&!Ae[y]){if(rt[y]){rt[y].forEach(v);return}s.push(y),u[y]=!0}}throw a.forEach(v),new Mr(`${n}: `+s.map(jr).join([", "]))},Rr=(n,a,s,u,v,y,b,$,S,O,M,e,t)=>{M=se(M),y=_e(v,y),$&&($=_e(b,$)),O&&(O=_e(S,O)),t=_e(e,t);var o=dt(M);Xe(o,function(){Qe(`Cannot construct ${M} due to unbound types`,[u])}),Ge([n,a,s],u?[u]:[],function(l){l=l[0];var h,m;u?(h=l.registeredClass,m=h.instancePrototype):m=Mt.prototype;var w=Re(M,function(){if(Object.getPrototypeOf(this)!==f)throw new Ve("Use 'new' to construct "+M);if(g.constructor_body===void 0)throw new Ve(M+" has no accessible constructor");var X=g.constructor_body[arguments.length];if(X===void 0)throw new Ve(`Tried to invoke ctor of ${M} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(g.constructor_body).toString()}) parameters instead!`);return X.apply(this,arguments)}),f=Object.create(m,{constructor:{value:w}});w.prototype=f;var g=new On(M,w,f,t,h,y,$,O);if(g.baseClass){var _,A;(A=(_=g.baseClass).__derivedClasses)!==null&&A!==void 0||(_.__derivedClasses=[]),g.baseClass.__derivedClasses.push(g)}var R=new Be(M,g,!0,!1,!1),U=new Be(M+"*",g,!1,!1,!1),B=new Be(M+" const*",g,!1,!0,!1);return Je[n]={pointerType:U,constPointerType:B},ur(o,w),[R,U,B]})},fr=(n,a)=>{for(var s=[],u=0;u<n;u++)s.push(I[a+u*4>>2]);return s};function It(n){for(var a=1;a<n.length;++a)if(n[a]!==null&&n[a].destructorFunction===void 0)return!0;return!1}function Wt(n,a,s,u,v,y){var b=a.length;b<2&&L("argTypes array size mismatch! Must at least get return value and 'this' types!");var $=a[1]!==null&&s!==null,S=It(a),O=a[0].name!=="void",M=b-2,e=new Array(M),t=[],o=[],l=function(){arguments.length!==M&&L(`function ${n} called with ${arguments.length} arguments, expected ${M}`),o.length=0;var h;t.length=$?2:1,t[0]=v,$&&(h=a[1].toWireType(o,this),t[1]=h);for(var m=0;m<M;++m)e[m]=a[m+2].toWireType(o,arguments[m]),t.push(e[m]);var w=u.apply(null,t);function f(g){if(S)ar(o);else for(var _=$?1:2;_<a.length;_++){var A=_===1?h:e[_-2];a[_].destructorFunction!==null&&a[_].destructorFunction(A)}if(O)return a[0].fromWireType(g)}return f(w)};return Re(n,l)}var te=(n,a,s,u,v,y)=>{var b=fr(a,s);v=_e(u,v),Ge([],[n],function($){$=$[0];var S=`constructor ${$.name}`;if($.registeredClass.constructor_body===void 0&&($.registeredClass.constructor_body=[]),$.registeredClass.constructor_body[a-1]!==void 0)throw new Ve(`Cannot register multiple constructors with identical number of parameters (${a-1}) for class '${$.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return $.registeredClass.constructor_body[a-1]=()=>{Qe(`Cannot construct ${$.name} due to unbound types`,b)},Ge([],b,O=>(O.splice(1,0,null),$.registeredClass.constructor_body[a-1]=Wt(S,O,null,v,y),[])),[]})},kr=n=>{n=n.trim();const a=n.indexOf("(");return a!==-1?n.substr(0,a):n},Mn=(n,a,s,u,v,y,b,$,S)=>{var O=fr(s,u);a=se(a),a=kr(a),y=_e(v,y),Ge([],[n],function(M){M=M[0];var e=`${M.name}.${a}`;a.startsWith("@@")&&(a=Symbol[a.substring(2)]),$&&M.registeredClass.pureVirtualFunctions.push(a);function t(){Qe(`Cannot call ${e} due to unbound types`,O)}var o=M.registeredClass.instancePrototype,l=o[a];return l===void 0||l.overloadTable===void 0&&l.className!==M.name&&l.argCount===s-2?(t.argCount=s-2,t.className=M.name,o[a]=t):(jt(o,a,e),o[a].overloadTable[s-2]=t),Ge([],O,function(h){var m=Wt(e,h,M,y,b);return o[a].overloadTable===void 0?(m.argCount=s-2,o[a]=m):o[a].overloadTable[s-2]=m,[]}),[]})};function Ee(){Object.assign(Fr.prototype,{get(n){return this.allocated[n]},has(n){return this.allocated[n]!==void 0},allocate(n){var a=this.freelist.pop()||this.allocated.length;return this.allocated[a]=n,a},free(n){this.allocated[n]=void 0,this.freelist.push(n)}})}function Fr(){this.allocated=[void 0],this.freelist=[]}var ge=new Fr,Ut=n=>{n>=ge.reserved&&--ge.get(n).refcount===0&&ge.free(n)},Lt=()=>{for(var n=0,a=ge.reserved;a<ge.allocated.length;++a)ge.allocated[a]!==void 0&&++n;return n},jn=()=>{ge.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ge.reserved=ge.allocated.length,i.count_emval_handles=Lt},Oe={toValue:n=>(n||L("Cannot use deleted val. handle = "+n),ge.get(n).value),toHandle:n=>{switch(n){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ge.allocate({refcount:1,value:n})}}},Rn=(n,a)=>{a=se(a),he(n,{name:a,fromWireType:s=>{var u=Oe.toValue(s);return Ut(s),u},toWireType:(s,u)=>Oe.toHandle(u),argPackAdvance:ye,readValueFromPointer:ct,destructorFunction:null})},hr=(n,a,s)=>{switch(a){case 1:return s?function(u){return this.fromWireType(G[u>>0])}:function(u){return this.fromWireType(J[u>>0])};case 2:return s?function(u){return this.fromWireType(Ue[u>>1])}:function(u){return this.fromWireType(V[u>>1])};case 4:return s?function(u){return this.fromWireType(k[u>>2])}:function(u){return this.fromWireType(I[u>>2])};default:throw new TypeError(`invalid integer width (${a}): ${n}`)}},kn=(n,a,s,u)=>{a=se(a);function v(){}v.values={},he(n,{name:a,constructor:v,fromWireType:function(y){return this.constructor.values[y]},toWireType:(y,b)=>b.value,argPackAdvance:ye,readValueFromPointer:hr(a,s,u),destructorFunction:null}),Xe(a,v)},Ht=(n,a)=>{var s=Ae[n];return s===void 0&&L(a+" has unknown type "+jr(n)),s},Fn=(n,a,s)=>{var u=Ht(n,"enum");a=se(a);var v=u.constructor,y=Object.create(u.constructor.prototype,{value:{value:s},constructor:{value:Re(`${u.name}_${a}`,function(){})}});v.values[s]=y,v[a]=y},ht=n=>{if(n===null)return"null";var a=typeof n;return a==="object"||a==="array"||a==="function"?n.toString():""+n},ke=(n,a)=>{switch(a){case 4:return function(s){return this.fromWireType(xe[s>>2])};case 8:return function(s){return this.fromWireType(ce[s>>3])};default:throw new TypeError(`invalid float width (${a}): ${n}`)}},pr=(n,a,s)=>{a=se(a),he(n,{name:a,fromWireType:u=>u,toWireType:(u,v)=>v,argPackAdvance:ye,readValueFromPointer:ke(a,s),destructorFunction:null})},In=(n,a,s,u,v,y,b)=>{var $=fr(a,s);n=se(n),n=kr(n),v=_e(u,v),Xe(n,function(){Qe(`Cannot call ${n} due to unbound types`,$)},a-1),Ge([],$,function(S){var O=[S[0],null].concat(S.slice(1));return ur(n,Wt(n,O,null,v,y),a-1),[]})},Wn=(n,a,s)=>{switch(a){case 1:return s?u=>G[u>>0]:u=>J[u>>0];case 2:return s?u=>Ue[u>>1]:u=>V[u>>1];case 4:return s?u=>k[u>>2]:u=>I[u>>2];default:throw new TypeError(`invalid integer width (${a}): ${n}`)}},Fe=(n,a,s,u,v)=>{a=se(a);var y=M=>M;if(u===0){var b=32-8*s;y=M=>M<<b>>>b}var $=a.includes("unsigned"),S=(M,e)=>{},O;$?O=function(M,e){return S(e,this.name),e>>>0}:O=function(M,e){return S(e,this.name),e},he(n,{name:a,fromWireType:y,toWireType:O,argPackAdvance:ye,readValueFromPointer:Wn(a,s,u!==0),destructorFunction:null})},Ir=(n,a,s)=>{var u=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],v=u[a];function y(b){var $=I[b>>2],S=I[b+4>>2];return new v(G.buffer,S,$)}s=se(s),he(n,{name:s,fromWireType:y,argPackAdvance:ye,readValueFromPointer:y},{ignoreDuplicateRegistrations:!0})},Wr=(n,a,s,u)=>{if(!(u>0))return 0;for(var v=s,y=s+u-1,b=0;b<n.length;++b){var $=n.charCodeAt(b);if($>=55296&&$<=57343){var S=n.charCodeAt(++b);$=65536+(($&1023)<<10)|S&1023}if($<=127){if(s>=y)break;a[s++]=$}else if($<=2047){if(s+1>=y)break;a[s++]=192|$>>6,a[s++]=128|$&63}else if($<=65535){if(s+2>=y)break;a[s++]=224|$>>12,a[s++]=128|$>>6&63,a[s++]=128|$&63}else{if(s+3>=y)break;a[s++]=240|$>>18,a[s++]=128|$>>12&63,a[s++]=128|$>>6&63,a[s++]=128|$&63}}return a[s]=0,s-v},Un=(n,a,s)=>Wr(n,J,a,s),Ur=n=>{for(var a=0,s=0;s<n.length;++s){var u=n.charCodeAt(s);u<=127?a++:u<=2047?a+=2:u>=55296&&u<=57343?(a+=4,++s):a+=3}return a},Vt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ln=(n,a,s)=>{for(var u=a+s,v=a;n[v]&&!(v>=u);)++v;if(v-a>16&&n.buffer&&Vt)return Vt.decode(n.subarray(a,v));for(var y="";a<v;){var b=n[a++];if(!(b&128)){y+=String.fromCharCode(b);continue}var $=n[a++]&63;if((b&224)==192){y+=String.fromCharCode((b&31)<<6|$);continue}var S=n[a++]&63;if((b&240)==224?b=(b&15)<<12|$<<6|S:b=(b&7)<<18|$<<12|S<<6|n[a++]&63,b<65536)y+=String.fromCharCode(b);else{var O=b-65536;y+=String.fromCharCode(55296|O>>10,56320|O&1023)}}return y},pt=(n,a)=>n?Ln(J,n,a):"",Hn=(n,a)=>{a=se(a);var s=a==="std::string";he(n,{name:a,fromWireType(u){var v=I[u>>2],y=u+4,b;if(s)for(var $=y,S=0;S<=v;++S){var O=y+S;if(S==v||J[O]==0){var M=O-$,e=pt($,M);b===void 0?b=e:(b+="\0",b+=e),$=O+1}}else{for(var t=new Array(v),S=0;S<v;++S)t[S]=String.fromCharCode(J[y+S]);b=t.join("")}return Ie(u),b},toWireType(u,v){v instanceof ArrayBuffer&&(v=new Uint8Array(v));var y,b=typeof v=="string";b||v instanceof Uint8Array||v instanceof Uint8ClampedArray||v instanceof Int8Array||L("Cannot pass non-string to std::string"),s&&b?y=Ur(v):y=v.length;var $=yr(4+y+1),S=$+4;if(I[$>>2]=y,s&&b)Un(v,S,y+1);else if(b)for(var O=0;O<y;++O){var M=v.charCodeAt(O);M>255&&(Ie(S),L("String has UTF-16 code units that do not fit in 8 bits")),J[S+O]=M}else for(var O=0;O<y;++O)J[S+O]=v[O];return u!==null&&u.push(Ie,$),$},argPackAdvance:ye,readValueFromPointer:xr,destructorFunction(u){Ie(u)}})},Lr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Vn=(n,a)=>{for(var s=n,u=s>>1,v=u+a/2;!(u>=v)&&V[u];)++u;if(s=u<<1,s-n>32&&Lr)return Lr.decode(J.subarray(n,s));for(var y="",b=0;!(b>=a/2);++b){var $=Ue[n+b*2>>1];if($==0)break;y+=String.fromCharCode($)}return y},Bn=(n,a,s)=>{var u;if((u=s)!==null&&u!==void 0||(s=2147483647),s<2)return 0;s-=2;for(var v=a,y=s<n.length*2?s/2:n.length,b=0;b<y;++b){var $=n.charCodeAt(b);Ue[a>>1]=$,a+=2}return Ue[a>>1]=0,a-v},Nn=n=>n.length*2,zn=(n,a)=>{for(var s=0,u="";!(s>=a/4);){var v=k[n+s*4>>2];if(v==0)break;if(++s,v>=65536){var y=v-65536;u+=String.fromCharCode(55296|y>>10,56320|y&1023)}else u+=String.fromCharCode(v)}return u},qn=(n,a,s)=>{var u;if((u=s)!==null&&u!==void 0||(s=2147483647),s<4)return 0;for(var v=a,y=v+s-4,b=0;b<n.length;++b){var $=n.charCodeAt(b);if($>=55296&&$<=57343){var S=n.charCodeAt(++b);$=65536+(($&1023)<<10)|S&1023}if(k[a>>2]=$,a+=4,a+4>y)break}return k[a>>2]=0,a-v},Gn=n=>{for(var a=0,s=0;s<n.length;++s){var u=n.charCodeAt(s);u>=55296&&u<=57343&&++s,a+=4}return a},Jn=(n,a,s)=>{s=se(s);var u,v,y,b,$;a===2?(u=Vn,v=Bn,b=Nn,y=()=>V,$=1):a===4&&(u=zn,v=qn,b=Gn,y=()=>I,$=2),he(n,{name:s,fromWireType:S=>{for(var O=I[S>>2],M=y(),e,t=S+4,o=0;o<=O;++o){var l=S+4+o*a;if(o==O||M[l>>$]==0){var h=l-t,m=u(t,h);e===void 0?e=m:(e+="\0",e+=m),t=l+a}}return Ie(S),e},toWireType:(S,O)=>{typeof O!="string"&&L(`Cannot pass non-string to C++ string type ${s}`);var M=b(O),e=yr(4+M+a);return I[e>>2]=M>>$,v(O,e+4,M+a),S!==null&&S.push(Ie,e),e},argPackAdvance:ye,readValueFromPointer:ct,destructorFunction(S){Ie(S)}})},vt=(n,a,s,u,v,y)=>{be[n]={name:se(a),rawConstructor:_e(s,u),rawDestructor:_e(v,y),fields:[]}},Yn=(n,a,s,u,v,y,b,$,S,O)=>{be[n].fields.push({fieldName:se(a),getterReturnType:s,getter:_e(u,v),getterContext:y,setterArgumentType:b,setter:_e($,S),setterContext:O})},Hr=(n,a)=>{a=se(a),he(n,{isVoid:!0,name:a,argPackAdvance:0,fromWireType:()=>{},toWireType:(s,u)=>{}})},Bt=[],Xn=(n,a,s,u)=>(n=Bt[n],a=Oe.toValue(a),n(null,a,s,u)),Qn={},Vr=n=>{var a=Qn[n];return a===void 0?se(n):a},Br=()=>{if(typeof globalThis=="object")return globalThis;function n(a){a.$$$embind_global$$$=a;var s=typeof $$$embind_global$$$=="object"&&a.$$$embind_global$$$==a;return s||delete a.$$$embind_global$$$,s}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&n(global)?$$$embind_global$$$=global:typeof self=="object"&&n(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Zn=n=>n===0?Oe.toHandle(Br()):(n=Vr(n),Oe.toHandle(Br()[n])),Kn=n=>{var a=Bt.length;return Bt.push(n),a},ea=(n,a)=>{for(var s=new Array(n),u=0;u<n;++u)s[u]=Ht(I[a+u*4>>2],"parameter "+u);return s},ta=Reflect.construct,ra=(n,a,s)=>{var u=[],v=n.toWireType(u,s);return u.length&&(I[a>>2]=Oe.toHandle(u)),v},na=(n,a,s)=>{var u=ea(n,a),v=u.shift();n--;var y=new Array(n),b=(S,O,M,e)=>{for(var t=0,o=0;o<n;++o)y[o]=u[o].readValueFromPointer(e+t),t+=u[o].argPackAdvance;for(var l=s===1?ta(O,y):O.apply(S,y),o=0;o<n;++o){var h,m;(h=(m=u[o]).deleteObject)===null||h===void 0||h.call(m,y[o])}return ra(v,M,l)},$=`methodCaller<(${u.map(S=>S.name).join(", ")}) => ${v.name}>`;return Kn(Re($,b))},aa=n=>{n>4&&(ge.get(n).refcount+=1)},oa=n=>{var a=Oe.toValue(n);ar(a),Ut(n)},ia=(n,a)=>{n=Ht(n,"_emval_take_value");var s=n.readValueFromPointer(a);return Oe.toHandle(s)},sa=()=>{me("")},vr=(n,a,s)=>J.copyWithin(n,a,a+s),ca=()=>2147483648,ua=n=>{var a=H.buffer,s=(n-a.byteLength+65535)/65536;try{return H.grow(s),ae(),1}catch{}},la=n=>{var a=J.length;n>>>=0;var s=ca();if(n>s)return!1;for(var u=(S,O)=>S+(O-S%O)%O,v=1;v<=4;v*=2){var y=a*(1+.2/v);y=Math.min(y,n+100663296);var b=Math.min(s,u(Math.max(n,y),65536)),$=ua(b);if($)return!0}return!1},Nt={},da=()=>P||"./this.program",mt=()=>{if(!mt.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:da()};for(var s in Nt)Nt[s]===void 0?delete a[s]:a[s]=Nt[s];var u=[];for(var s in a)u.push(`${s}=${a[s]}`);mt.strings=u}return mt.strings},fa=(n,a)=>{for(var s=0;s<n.length;++s)G[a++>>0]=n.charCodeAt(s);G[a>>0]=0},ha=(n,a)=>{var s=0;return mt().forEach((u,v)=>{var y=a+s;I[n+v*4>>2]=y,fa(u,y),s+=u.length+1}),0},pa=(n,a)=>{var s=mt();I[n>>2]=s.length;var u=0;return s.forEach(v=>u+=v.length+1),I[a>>2]=u,0},va=n=>n,zt=n=>n%4===0&&(n%100!==0||n%400===0),ma=(n,a)=>{for(var s=0,u=0;u<=a;s+=n[u++]);return s},Nr=[31,29,31,30,31,30,31,31,30,31,30,31],zr=[31,28,31,30,31,30,31,31,30,31,30,31],ya=(n,a)=>{for(var s=new Date(n.getTime());a>0;){var u=zt(s.getFullYear()),v=s.getMonth(),y=(u?Nr:zr)[v];if(a>y-s.getDate())a-=y-s.getDate()+1,s.setDate(1),v<11?s.setMonth(v+1):(s.setMonth(0),s.setFullYear(s.getFullYear()+1));else return s.setDate(s.getDate()+a),s}return s};function ga(n,a,s){var u=Ur(n)+1,v=new Array(u);return Wr(n,v,0,v.length),v}var wa=(n,a)=>{G.set(n,a)},ba=(n,a,s,u)=>{var v=I[u+40>>2],y={tm_sec:k[u>>2],tm_min:k[u+4>>2],tm_hour:k[u+8>>2],tm_mday:k[u+12>>2],tm_mon:k[u+16>>2],tm_year:k[u+20>>2],tm_wday:k[u+24>>2],tm_yday:k[u+28>>2],tm_isdst:k[u+32>>2],tm_gmtoff:k[u+36>>2],tm_zone:v?pt(v):""},b=pt(s),$={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var S in $)b=b.replace(new RegExp(S,"g"),$[S]);var O=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=["January","February","March","April","May","June","July","August","September","October","November","December"];function e(f,g,_){for(var A=typeof f=="number"?f.toString():f||"";A.length<g;)A=_[0]+A;return A}function t(f,g){return e(f,g,"0")}function o(f,g){function _(R){return R<0?-1:R>0?1:0}var A;return(A=_(f.getFullYear()-g.getFullYear()))===0&&(A=_(f.getMonth()-g.getMonth()))===0&&(A=_(f.getDate()-g.getDate())),A}function l(f){switch(f.getDay()){case 0:return new Date(f.getFullYear()-1,11,29);case 1:return f;case 2:return new Date(f.getFullYear(),0,3);case 3:return new Date(f.getFullYear(),0,2);case 4:return new Date(f.getFullYear(),0,1);case 5:return new Date(f.getFullYear()-1,11,31);case 6:return new Date(f.getFullYear()-1,11,30)}}function h(f){var g=ya(new Date(f.tm_year+1900,0,1),f.tm_yday),_=new Date(g.getFullYear(),0,4),A=new Date(g.getFullYear()+1,0,4),R=l(_),U=l(A);return o(R,g)<=0?o(U,g)<=0?g.getFullYear()+1:g.getFullYear():g.getFullYear()-1}var m={"%a":f=>O[f.tm_wday].substring(0,3),"%A":f=>O[f.tm_wday],"%b":f=>M[f.tm_mon].substring(0,3),"%B":f=>M[f.tm_mon],"%C":f=>{var g=f.tm_year+1900;return t(g/100|0,2)},"%d":f=>t(f.tm_mday,2),"%e":f=>e(f.tm_mday,2," "),"%g":f=>h(f).toString().substring(2),"%G":f=>h(f),"%H":f=>t(f.tm_hour,2),"%I":f=>{var g=f.tm_hour;return g==0?g=12:g>12&&(g-=12),t(g,2)},"%j":f=>t(f.tm_mday+ma(zt(f.tm_year+1900)?Nr:zr,f.tm_mon-1),3),"%m":f=>t(f.tm_mon+1,2),"%M":f=>t(f.tm_min,2),"%n":()=>`
`,"%p":f=>f.tm_hour>=0&&f.tm_hour<12?"AM":"PM","%S":f=>t(f.tm_sec,2),"%t":()=>"	","%u":f=>f.tm_wday||7,"%U":f=>{var g=f.tm_yday+7-f.tm_wday;return t(Math.floor(g/7),2)},"%V":f=>{var g=Math.floor((f.tm_yday+7-(f.tm_wday+6)%7)/7);if((f.tm_wday+371-f.tm_yday-2)%7<=2&&g++,g){if(g==53){var _=(f.tm_wday+371-f.tm_yday)%7;_!=4&&(_!=3||!zt(f.tm_year))&&(g=1)}}else{g=52;var A=(f.tm_wday+7-f.tm_yday-1)%7;(A==4||A==5&&zt(f.tm_year%400-1))&&g++}return t(g,2)},"%w":f=>f.tm_wday,"%W":f=>{var g=f.tm_yday+7-(f.tm_wday+6)%7;return t(Math.floor(g/7),2)},"%y":f=>(f.tm_year+1900).toString().substring(2),"%Y":f=>f.tm_year+1900,"%z":f=>{var g=f.tm_gmtoff,_=g>=0;return g=Math.abs(g)/60,g=g/60*100+g%60,(_?"+":"-")+("0000"+g).slice(-4)},"%Z":f=>f.tm_zone,"%%":()=>"%"};b=b.replace(/%%/g,"\0\0");for(var S in m)b.includes(S)&&(b=b.replace(new RegExp(S,"g"),m[S](y)));b=b.replace(/\0\0/g,"%");var w=ga(b);return w.length>a?0:(wa(w,n),w.length-1)},mr=(n,a,s,u,v)=>ba(n,a,s,u);Pr=i.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},bn(),Ve=i.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},Sn(),sr(),kt(),Mr=i.UnboundTypeError=Dn(Error,"UnboundTypeError"),Ee(),jn();var $a={s:Cr,u:Tr,b:nr,g:oe,q:ie,J:Ot,f:At,V:yn,d:mn,da:gn,Q:wn,_:_r,ca:Rr,ba:te,w:Mn,Y:Rn,x:kn,h:Fn,L:pr,M:In,t:Fe,o:Ir,K:Hn,C:Jn,A:vt,ea:Yn,$:Hr,R:Xn,ha:Ut,fa:Zn,Z:na,N:aa,O:oa,aa:ia,B:sa,X:vr,W:la,T:ha,U:pa,E:_a,D:Qr,F:Sa,n:Ea,a:We,e:Kr,m:Xr,k:tn,H:Ta,v:nn,G:Pa,z:Aa,P:Da,l:en,j:Zr,c:K,p:wr,I:Ca,r:Oa,i:rn,y:xa,ga:va,S:mr},Y=vn(),Ie=i._free=n=>(Ie=i._free=Y.ka)(n),yr=i._malloc=n=>(yr=i._malloc=Y.la)(n),qr=n=>(qr=Y.na)(n),Q=(n,a)=>(Q=Y.oa)(n,a),yt=n=>(yt=Y.pa)(n),re=()=>(re=Y.qa)(),ne=n=>(ne=Y.ra)(n),Gr=n=>(Gr=Y.sa)(n),Jr=n=>(Jr=Y.ta)(n),Yr=(n,a,s)=>(Yr=Y.ua)(n,a,s),Z=n=>(Z=Y.va)(n);i.dynCall_viijii=(n,a,s,u,v,y,b)=>(i.dynCall_viijii=Y.wa)(n,a,s,u,v,y,b);var gr=i.dynCall_jiiii=(n,a,s,u,v)=>(gr=i.dynCall_jiiii=Y.xa)(n,a,s,u,v);i.dynCall_iiiiij=(n,a,s,u,v,y,b)=>(i.dynCall_iiiiij=Y.ya)(n,a,s,u,v,y,b),i.dynCall_iiiiijj=(n,a,s,u,v,y,b,$,S)=>(i.dynCall_iiiiijj=Y.za)(n,a,s,u,v,y,b,$,S),i.dynCall_iiiiiijj=(n,a,s,u,v,y,b,$,S,O)=>(i.dynCall_iiiiiijj=Y.Aa)(n,a,s,u,v,y,b,$,S,O);function We(n,a){var s=re();try{return ee(n)(a)}catch(u){if(ne(s),u!==u+0)throw u;Q(1,0)}}function wr(n,a,s,u){var v=re();try{ee(n)(a,s,u)}catch(y){if(ne(v),y!==y+0)throw y;Q(1,0)}}function K(n,a,s){var u=re();try{ee(n)(a,s)}catch(v){if(ne(u),v!==v+0)throw v;Q(1,0)}}function Xr(n,a,s,u){var v=re();try{return ee(n)(a,s,u)}catch(y){if(ne(v),y!==y+0)throw y;Q(1,0)}}function Qr(n,a,s,u,v){var y=re();try{return ee(n)(a,s,u,v)}catch(b){if(ne(y),b!==b+0)throw b;Q(1,0)}}function Zr(n,a){var s=re();try{ee(n)(a)}catch(u){if(ne(s),u!==u+0)throw u;Q(1,0)}}function Kr(n,a,s){var u=re();try{return ee(n)(a,s)}catch(v){if(ne(u),v!==v+0)throw v;Q(1,0)}}function en(n){var a=re();try{ee(n)()}catch(s){if(ne(a),s!==s+0)throw s;Q(1,0)}}function tn(n,a,s,u,v){var y=re();try{return ee(n)(a,s,u,v)}catch(b){if(ne(y),b!==b+0)throw b;Q(1,0)}}function rn(n,a,s,u,v,y,b,$,S,O,M){var e=re();try{ee(n)(a,s,u,v,y,b,$,S,O,M)}catch(t){if(ne(e),t!==t+0)throw t;Q(1,0)}}function nn(n,a,s,u,v,y,b){var $=re();try{return ee(n)(a,s,u,v,y,b)}catch(S){if(ne($),S!==S+0)throw S;Q(1,0)}}function Ca(n,a,s,u,v){var y=re();try{ee(n)(a,s,u,v)}catch(b){if(ne(y),b!==b+0)throw b;Q(1,0)}}function Ta(n,a,s,u,v,y){var b=re();try{return ee(n)(a,s,u,v,y)}catch($){if(ne(b),$!==$+0)throw $;Q(1,0)}}function Pa(n,a,s,u,v,y,b,$){var S=re();try{return ee(n)(a,s,u,v,y,b,$)}catch(O){if(ne(S),O!==O+0)throw O;Q(1,0)}}function Sa(n,a,s,u){var v=re();try{return ee(n)(a,s,u)}catch(y){if(ne(v),y!==y+0)throw y;Q(1,0)}}function _a(n,a,s,u){var v=re();try{return ee(n)(a,s,u)}catch(y){if(ne(v),y!==y+0)throw y;Q(1,0)}}function Ea(n){var a=re();try{return ee(n)()}catch(s){if(ne(a),s!==s+0)throw s;Q(1,0)}}function Oa(n,a,s,u,v,y,b,$){var S=re();try{ee(n)(a,s,u,v,y,b,$)}catch(O){if(ne(S),O!==O+0)throw O;Q(1,0)}}function Aa(n,a,s,u,v,y,b,$,S,O,M,e){var t=re();try{return ee(n)(a,s,u,v,y,b,$,S,O,M,e)}catch(o){if(ne(t),o!==o+0)throw o;Q(1,0)}}function xa(n,a,s,u,v,y,b,$,S,O,M,e,t,o,l,h){var m=re();try{ee(n)(a,s,u,v,y,b,$,S,O,M,e,t,o,l,h)}catch(w){if(ne(m),w!==w+0)throw w;Q(1,0)}}function Da(n,a,s,u,v){var y=re();try{return gr(n,a,s,u,v)}catch(b){if(ne(y),b!==b+0)throw b;Q(1,0)}}var qt;ze=function n(){qt||an(),qt||(ze=n)};function an(){if(Se>0||(z(),Se>0))return;function n(){qt||(qt=!0,i.calledRun=!0,!q&&(bt(),p(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),$t()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),n()},1)):n()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return an(),c.ready}})();function is(r){return Fa(Ia,r)}async function ss(r,c){return as(Ia,r,c)}async function cs(r,c){return os(Ia,r,c)}var $r;class Qa extends EventTarget{constructor(c={}){var i;super(),Ri(this,$r,void 0);try{const p=(i=c==null?void 0:c.formats)==null?void 0:i.filter(d=>d!=="unknown");if((p==null?void 0:p.length)===0)throw new TypeError("Hint option provided, but is empty.");p==null||p.forEach(d=>{if(!fn.has(d))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${d}' is not a valid enum value of type BarcodeFormat.`)}),ki(this,$r,p??[]),is().then(d=>{this.dispatchEvent(new CustomEvent("load",{detail:d}))}).catch(d=>{this.dispatchEvent(new CustomEvent("error",{detail:d}))})}catch(p){throw Ga(p,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return Fi.filter(c=>c!=="unknown")}async detect(c){try{const i=await Bi(c);if(i===null)return[];let p;try{Eo(i)?p=await ss(i,{tryHarder:!0,formats:qa(this,$r).map(d=>fn.get(d))}):p=await cs(i,{tryHarder:!0,formats:qa(this,$r).map(d=>fn.get(d))})}catch(d){throw console.error(d),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return p.map(d=>{const{topLeft:{x:T,y:P},topRight:{x:j,y:C},bottomLeft:{x:E,y:x},bottomRight:{x:D,y:W}}=d.position,F=Math.min(T,j,E,D),H=Math.min(P,C,x,W),q=Math.max(T,j,E,D),G=Math.max(P,C,x,W);return{boundingBox:new DOMRectReadOnly(F,H,q-F,G-H),rawValue:d.text,format:Ii(d.format),cornerPoints:[{x:T,y:P},{x:j,y:C},{x:D,y:W},{x:E,y:x}]}})}catch(i){throw Ga(i,"Failed to execute 'detect' on 'BarcodeDetector'")}}}$r=new WeakMap;const Do=(r,c,i="error")=>{let p,d;const T=new Promise((P,j)=>{p=P,d=j,r.addEventListener(c,p),r.addEventListener(i,d)});return T.finally(()=>{r.removeEventListener(c,p),r.removeEventListener(i,d)}),T},Za=r=>new Promise(c=>setTimeout(c,r));class Mo extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class us extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class ls extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let jo;async function ds(r){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new Qa({formats:r});const c=await window.BarcodeDetector.getSupportedFormats(),i=r.filter(p=>!c.includes(p));return i.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(i)}. Will use polyfill.`),new Qa({formats:r})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:r}))}async function Ro(r){jo=await ds(r)}const fs=async(r,{detectHandler:c,locateHandler:i,minDelay:p,formats:d})=>{console.debug("[vue-qrcode-reader] start scanning"),await Ro(d);const T=P=>async j=>{if(r.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:C,contentBefore:E,lastScanHadContent:x}=P;if(j-C<p)window.requestAnimationFrame(T(P));else{const D=await jo.detect(r),W=D.some(q=>!E.includes(q.rawValue));W&&c(D);const F=D.length>0;F&&i(D),!F&&x&&i(D);const H={lastScanned:j,lastScanHadContent:F,contentBefore:W?D.map(q=>q.rawValue):E};window.requestAnimationFrame(T(H))}}};T({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var ko={},Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.compactObject=Wo;Ce.deprecated=$s;var hs=Ce.detectBrowser=Cs;Ce.disableLog=gs;Ce.disableWarnings=ws;Ce.extractVersion=hn;Ce.filterStats=Ts;Ce.log=bs;Ce.walkStats=pn;Ce.wrapPeerConnectionEvent=ys;function ps(r,c,i){return c=vs(c),c in r?Object.defineProperty(r,c,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[c]=i,r}function vs(r){var c=ms(r,"string");return it(c)==="symbol"?c:String(c)}function ms(r,c){if(it(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var p=i.call(r,c||"default");if(it(p)!=="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(r)}function it(r){"@babel/helpers - typeof";return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},it(r)}var Fo=!0,Io=!0;function hn(r,c,i){var p=r.match(c);return p&&p.length>=i&&parseInt(p[i],10)}function ys(r,c,i){if(r.RTCPeerConnection){var p=r.RTCPeerConnection.prototype,d=p.addEventListener;p.addEventListener=function(P,j){if(P!==c)return d.apply(this,arguments);var C=function(E){var x=i(E);x&&(j.handleEvent?j.handleEvent(x):j(x))};return this._eventMap=this._eventMap||{},this._eventMap[c]||(this._eventMap[c]=new Map),this._eventMap[c].set(j,C),d.apply(this,[P,C])};var T=p.removeEventListener;p.removeEventListener=function(P,j){if(P!==c||!this._eventMap||!this._eventMap[c])return T.apply(this,arguments);if(!this._eventMap[c].has(j))return T.apply(this,arguments);var C=this._eventMap[c].get(j);return this._eventMap[c].delete(j),this._eventMap[c].size===0&&delete this._eventMap[c],Object.keys(this._eventMap).length===0&&delete this._eventMap,T.apply(this,[P,C])},Object.defineProperty(p,"on"+c,{get:function(){return this["_on"+c]},set:function(P){this["_on"+c]&&(this.removeEventListener(c,this["_on"+c]),delete this["_on"+c]),P&&this.addEventListener(c,this["_on"+c]=P)},enumerable:!0,configurable:!0})}}function gs(r){return typeof r!="boolean"?new Error("Argument type: "+it(r)+". Please use a boolean."):(Fo=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function ws(r){return typeof r!="boolean"?new Error("Argument type: "+it(r)+". Please use a boolean."):(Io=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function bs(){if((typeof window>"u"?"undefined":it(window))==="object"){if(Fo)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function $s(r,c){Io&&console.warn(r+" is deprecated, please use "+c+" instead.")}function Cs(r){var c={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return c.browser="Not a browser.",c;var i=r.navigator;if(i.mozGetUserMedia)c.browser="firefox",c.version=hn(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)c.browser="chrome",c.version=hn(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))c.browser="safari",c.version=hn(i.userAgent,/AppleWebKit\/(\d+)\./,1),c.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return c.browser="Not a supported browser.",c;return c}function Ka(r){return Object.prototype.toString.call(r)==="[object Object]"}function Wo(r){return Ka(r)?Object.keys(r).reduce(function(c,i){var p=Ka(r[i]),d=p?Wo(r[i]):r[i],T=p&&!Object.keys(d).length;return d===void 0||T?c:Object.assign(c,ps({},i,d))},{}):r}function pn(r,c,i){!c||i.has(c.id)||(i.set(c.id,c),Object.keys(c).forEach(function(p){p.endsWith("Id")?pn(r,r.get(c[p]),i):p.endsWith("Ids")&&c[p].forEach(function(d){pn(r,r.get(d),i)})}))}function Ts(r,c,i){var p=i?"outbound-rtp":"inbound-rtp",d=new Map;if(c===null)return d;var T=[];return r.forEach(function(P){P.type==="track"&&P.trackIdentifier===c.id&&T.push(P)}),T.forEach(function(P){r.forEach(function(j){j.type===p&&j.trackId===P.id&&pn(r,j,d)})}),d}Object.defineProperty(ko,"__esModule",{value:!0});var Ps=ko.shimGetUserMedia=Es,Ss=_s(Ce);function Uo(r){if(typeof WeakMap!="function")return null;var c=new WeakMap,i=new WeakMap;return(Uo=function(p){return p?i:c})(r)}function _s(r,c){if(r&&r.__esModule)return r;if(r===null||ot(r)!=="object"&&typeof r!="function")return{default:r};var i=Uo(c);if(i&&i.has(r))return i.get(r);var p={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in r)if(T!=="default"&&Object.prototype.hasOwnProperty.call(r,T)){var P=d?Object.getOwnPropertyDescriptor(r,T):null;P&&(P.get||P.set)?Object.defineProperty(p,T,P):p[T]=r[T]}return p.default=r,i&&i.set(r,p),p}function ot(r){"@babel/helpers - typeof";return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},ot(r)}var eo=Ss.log;function Es(r,c){var i=r&&r.navigator;if(i.mediaDevices){var p=function(C){if(ot(C)!=="object"||C.mandatory||C.optional)return C;var E={};return Object.keys(C).forEach(function(x){if(!(x==="require"||x==="advanced"||x==="mediaSource")){var D=ot(C[x])==="object"?C[x]:{ideal:C[x]};D.exact!==void 0&&typeof D.exact=="number"&&(D.min=D.max=D.exact);var W=function(H,q){return H?H+q.charAt(0).toUpperCase()+q.slice(1):q==="deviceId"?"sourceId":q};if(D.ideal!==void 0){E.optional=E.optional||[];var F={};typeof D.ideal=="number"?(F[W("min",x)]=D.ideal,E.optional.push(F),F={},F[W("max",x)]=D.ideal,E.optional.push(F)):(F[W("",x)]=D.ideal,E.optional.push(F))}D.exact!==void 0&&typeof D.exact!="number"?(E.mandatory=E.mandatory||{},E.mandatory[W("",x)]=D.exact):["min","max"].forEach(function(H){D[H]!==void 0&&(E.mandatory=E.mandatory||{},E.mandatory[W(H,x)]=D[H])})}}),C.advanced&&(E.optional=(E.optional||[]).concat(C.advanced)),E},d=function(C,E){if(c.version>=61)return E(C);if(C=JSON.parse(JSON.stringify(C)),C&&ot(C.audio)==="object"){var x=function(H,q,G){q in H&&!(G in H)&&(H[G]=H[q],delete H[q])};C=JSON.parse(JSON.stringify(C)),x(C.audio,"autoGainControl","googAutoGainControl"),x(C.audio,"noiseSuppression","googNoiseSuppression"),C.audio=p(C.audio)}if(C&&ot(C.video)==="object"){var D=C.video.facingMode;D=D&&(ot(D)==="object"?D:{ideal:D});var W=c.version<66;if(D&&(D.exact==="user"||D.exact==="environment"||D.ideal==="user"||D.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!W)){delete C.video.facingMode;var F;if(D.exact==="environment"||D.ideal==="environment"?F=["back","rear"]:(D.exact==="user"||D.ideal==="user")&&(F=["front"]),F)return i.mediaDevices.enumerateDevices().then(function(H){H=H.filter(function(G){return G.kind==="videoinput"});var q=H.find(function(G){return F.some(function(J){return G.label.toLowerCase().includes(J)})});return!q&&H.length&&F.includes("back")&&(q=H[H.length-1]),q&&(C.video.deviceId=D.exact?{exact:q.deviceId}:{ideal:q.deviceId}),C.video=p(C.video),eo("chrome: "+JSON.stringify(C)),E(C)})}C.video=p(C.video)}return eo("chrome: "+JSON.stringify(C)),E(C)},T=function(C){return c.version>=64?C:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[C.name]||C.name,message:C.message,constraint:C.constraint||C.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},P=function(C,E,x){d(C,function(D){i.webkitGetUserMedia(D,E,function(W){x&&x(T(W))})})};if(i.getUserMedia=P.bind(i),i.mediaDevices.getUserMedia){var j=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(C){return d(C,function(E){return j(E).then(function(x){if(E.audio&&!x.getAudioTracks().length||E.video&&!x.getVideoTracks().length)throw x.getTracks().forEach(function(D){D.stop()}),new DOMException("","NotFoundError");return x},function(x){return Promise.reject(T(x))})})}}}}var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});var Os=Lo.shimGetUserMedia=Ds,As=xs(Ce);function Ho(r){if(typeof WeakMap!="function")return null;var c=new WeakMap,i=new WeakMap;return(Ho=function(p){return p?i:c})(r)}function xs(r,c){if(r&&r.__esModule)return r;if(r===null||Gt(r)!=="object"&&typeof r!="function")return{default:r};var i=Ho(c);if(i&&i.has(r))return i.get(r);var p={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in r)if(T!=="default"&&Object.prototype.hasOwnProperty.call(r,T)){var P=d?Object.getOwnPropertyDescriptor(r,T):null;P&&(P.get||P.set)?Object.defineProperty(p,T,P):p[T]=r[T]}return p.default=r,i&&i.set(r,p),p}function Gt(r){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Gt(r)}function Ds(r,c){var i=r&&r.navigator,p=r&&r.MediaStreamTrack;if(i.getUserMedia=function(C,E,x){As.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(C).then(E,x)},!(c.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){var d=function(C,E,x){E in C&&!(x in C)&&(C[x]=C[E],delete C[E])},T=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(C){return Gt(C)==="object"&&Gt(C.audio)==="object"&&(C=JSON.parse(JSON.stringify(C)),d(C.audio,"autoGainControl","mozAutoGainControl"),d(C.audio,"noiseSuppression","mozNoiseSuppression")),T(C)},p&&p.prototype.getSettings){var P=p.prototype.getSettings;p.prototype.getSettings=function(){var C=P.apply(this,arguments);return d(C,"mozAutoGainControl","autoGainControl"),d(C,"mozNoiseSuppression","noiseSuppression"),C}}if(p&&p.prototype.applyConstraints){var j=p.prototype.applyConstraints;p.prototype.applyConstraints=function(C){return this.kind==="audio"&&Gt(C)==="object"&&(C=JSON.parse(JSON.stringify(C)),d(C,"autoGainControl","mozAutoGainControl"),d(C,"noiseSuppression","mozNoiseSuppression")),j.apply(this,[C])}}}}var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.shimAudioContext=Hs;Ne.shimCallbacksAPI=Fs;Ne.shimConstraints=No;Ne.shimCreateOfferLegacy=Ls;var Ms=Ne.shimGetUserMedia=Is;Ne.shimLocalStreamsAPI=Rs;Ne.shimRTCIceServerUrls=Ws;Ne.shimRemoteStreamsAPI=ks;Ne.shimTrackEventTransceiver=Us;var Vo=js(Ce);function Bo(r){if(typeof WeakMap!="function")return null;var c=new WeakMap,i=new WeakMap;return(Bo=function(p){return p?i:c})(r)}function js(r,c){if(r&&r.__esModule)return r;if(r===null||st(r)!=="object"&&typeof r!="function")return{default:r};var i=Bo(c);if(i&&i.has(r))return i.get(r);var p={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in r)if(T!=="default"&&Object.prototype.hasOwnProperty.call(r,T)){var P=d?Object.getOwnPropertyDescriptor(r,T):null;P&&(P.get||P.set)?Object.defineProperty(p,T,P):p[T]=r[T]}return p.default=r,i&&i.set(r,p),p}function st(r){"@babel/helpers - typeof";return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},st(r)}function Rs(r){if(!(st(r)!=="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){var c=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(i){var p=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(function(d){return c.call(p,d,i)}),i.getVideoTracks().forEach(function(d){return c.call(p,d,i)})},r.RTCPeerConnection.prototype.addTrack=function(i){for(var p=this,d=arguments.length,T=new Array(d>1?d-1:0),P=1;P<d;P++)T[P-1]=arguments[P];return T&&T.forEach(function(j){p._localStreams?p._localStreams.includes(j)||p._localStreams.push(j):p._localStreams=[j]}),c.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(i){var p=this;this._localStreams||(this._localStreams=[]);var d=this._localStreams.indexOf(i);if(d!==-1){this._localStreams.splice(d,1);var T=i.getTracks();this.getSenders().forEach(function(P){T.includes(P.track)&&p.removeTrack(P)})}})}}function ks(r){if(!(st(r)!=="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(i){var p=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=function(d){d.streams.forEach(function(T){if(p._remoteStreams||(p._remoteStreams=[]),!p._remoteStreams.includes(T)){p._remoteStreams.push(T);var P=new Event("addstream");P.stream=T,p.dispatchEvent(P)}})})}});var c=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(p){p.streams.forEach(function(d){if(i._remoteStreams||(i._remoteStreams=[]),!(i._remoteStreams.indexOf(d)>=0)){i._remoteStreams.push(d);var T=new Event("addstream");T.stream=d,i.dispatchEvent(T)}})}),c.apply(i,arguments)}}}function Fs(r){if(!(st(r)!=="object"||!r.RTCPeerConnection)){var c=r.RTCPeerConnection.prototype,i=c.createOffer,p=c.createAnswer,d=c.setLocalDescription,T=c.setRemoteDescription,P=c.addIceCandidate;c.createOffer=function(C,E){var x=arguments.length>=2?arguments[2]:arguments[0],D=i.apply(this,[x]);return E?(D.then(C,E),Promise.resolve()):D},c.createAnswer=function(C,E){var x=arguments.length>=2?arguments[2]:arguments[0],D=p.apply(this,[x]);return E?(D.then(C,E),Promise.resolve()):D};var j=function(C,E,x){var D=d.apply(this,[C]);return x?(D.then(E,x),Promise.resolve()):D};c.setLocalDescription=j,j=function(C,E,x){var D=T.apply(this,[C]);return x?(D.then(E,x),Promise.resolve()):D},c.setRemoteDescription=j,j=function(C,E,x){var D=P.apply(this,[C]);return x?(D.then(E,x),Promise.resolve()):D},c.addIceCandidate=j}}function Is(r){var c=r&&r.navigator;if(c.mediaDevices&&c.mediaDevices.getUserMedia){var i=c.mediaDevices,p=i.getUserMedia.bind(i);c.mediaDevices.getUserMedia=function(d){return p(No(d))}}!c.getUserMedia&&c.mediaDevices&&c.mediaDevices.getUserMedia&&(c.getUserMedia=(function(d,T,P){c.mediaDevices.getUserMedia(d).then(T,P)}).bind(c))}function No(r){return r&&r.video!==void 0?Object.assign({},r,{video:Vo.compactObject(r.video)}):r}function Ws(r){if(r.RTCPeerConnection){var c=r.RTCPeerConnection;r.RTCPeerConnection=function(i,p){if(i&&i.iceServers){for(var d=[],T=0;T<i.iceServers.length;T++){var P=i.iceServers[T];P.urls===void 0&&P.url?(Vo.deprecated("RTCIceServer.url","RTCIceServer.urls"),P=JSON.parse(JSON.stringify(P)),P.urls=P.url,delete P.url,d.push(P)):d.push(i.iceServers[T])}i.iceServers=d}return new c(i,p)},r.RTCPeerConnection.prototype=c.prototype,"generateCertificate"in c&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return c.generateCertificate}})}}function Us(r){st(r)==="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Ls(r){var c=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);var p=this.getTransceivers().find(function(T){return T.receiver.track.kind==="audio"});i.offerToReceiveAudio===!1&&p?p.direction==="sendrecv"?p.setDirection?p.setDirection("sendonly"):p.direction="sendonly":p.direction==="recvonly"&&(p.setDirection?p.setDirection("inactive"):p.direction="inactive"):i.offerToReceiveAudio===!0&&!p&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);var d=this.getTransceivers().find(function(T){return T.receiver.track.kind==="video"});i.offerToReceiveVideo===!1&&d?d.direction==="sendrecv"?d.setDirection?d.setDirection("sendonly"):d.direction="sendonly":d.direction==="recvonly"&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive"):i.offerToReceiveVideo===!0&&!d&&this.addTransceiver("video",{direction:"recvonly"})}return c.apply(this,arguments)}}function Hs(r){st(r)!=="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const Vs=r=>{let c=!1,i;return(...p)=>(c||(i=r(p),c=!0),i)};function Ke(r,c){if(r===!1)throw new Error(c??"assertion failure")}function to(r){throw new Error("this code should be unreachable")}const Bs=Vs(()=>{const r=hs(window);switch(r.browser){case"chrome":Ps(window,r);break;case"firefox":Os(window,r);break;case"safari":Ms(window,r);break;default:throw new Mo}});let Jt=Promise.resolve({type:"stop",data:{}});async function ro(r,c,i){var p,d,T;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(c)),window.isSecureContext!==!0)throw new us;if(((p=navigator==null?void 0:navigator.mediaDevices)==null?void 0:p.getUserMedia)===void 0)throw new Mo;Bs(),console.debug("[vue-qrcode-reader] calling getUserMedia");const P=await navigator.mediaDevices.getUserMedia({audio:!1,video:c});r.srcObject!==void 0?r.srcObject=P:r.mozSrcObject!==void 0?r.mozSrcObject=P:window.URL.createObjectURL?r.src=window.URL.createObjectURL(P):window.webkitURL?r.src=window.webkitURL.createObjectURL(P):r.src=P.id,r.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([Do(r,"loadeddata"),Za(6e3).then(()=>{throw new ls})]),console.debug("[vue-qrcode-reader] video element loaded"),await Za(500);const[j]=P.getVideoTracks(),C=(T=(d=j==null?void 0:j.getCapabilities)==null?void 0:d.call(j))!=null?T:{};let E=!1;return i&&C.torch&&(await j.applyConstraints({advanced:[{torch:!0}]}),E=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:r,stream:P,capabilities:C,constraints:c,isTorchOn:E}}}async function Ns(r,{constraints:c,torch:i,restart:p=!1}){Jt=Jt.then(T=>{if(T.type==="start"){const{data:{videoEl:P,stream:j,constraints:C,isTorchOn:E}}=T;return!p&&r===P&&c===C&&i===E?T:zo(P,j,E).then(()=>ro(r,c,i))}else if(T.type==="stop"||T.type==="failed")return ro(r,c,i);to()}).catch(T=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${T}"`),{type:"failed",error:T}));const d=await Jt;if(d.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(d.type==="failed")throw d.error;if(d.type==="start")return d.data.capabilities;to()}async function zo(r,c,i){console.debug("[vue-qrcode-reader] stopping camera"),r.src="",r.srcObject=null,r.load(),await Do(r,"error");for(const p of c.getTracks())i!=null||await p.applyConstraints({advanced:[{torch:!1}]}),c.removeTrack(p),p.stop();return{type:"stop",data:{}}}async function ln(){if(Jt=Jt.then(r=>{if(r.type==="stop"||r.type==="failed")return r;const{data:{videoEl:c,stream:i,isTorchOn:p}}=r;return zo(c,i,p)}),(await Jt).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const Js=Go({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(r,{emit:c}){const i=r,p=c,d=wt(i.constraints),T=wt(i.formats);br(()=>i.constraints,(V,k)=>{JSON.stringify(V)!==JSON.stringify(k)&&(d.value=V)},{deep:!0}),br(()=>i.formats,(V,k)=>{JSON.stringify(V)!==JSON.stringify(k)&&(T.value=V)},{deep:!0});const P=wt(),j=wt(),C=wt(),E=wt(!1),x=wt(!1);Jo(()=>{x.value=!0}),Yo(()=>{ln()});const D=Ma(()=>({torch:i.torch,constraints:d.value,shouldStream:x.value&&!i.paused}));br(D,async V=>{const k=C.value;Ke(k!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const I=P.value;Ke(I!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const xe=I.getContext("2d");if(Ke(xe!==null,"if cavnas is defined, canvas 2d context should also be non-null"),V.shouldStream){ln(),E.value=!1;try{const ce=await Ns(k,V);x.value?(E.value=!0,p("camera-on",ce)):await ln()}catch(ce){p("error",ce)}}else I.width=k.videoWidth,I.height=k.videoHeight,xe.drawImage(k,0,0,k.videoWidth,k.videoHeight),ln(),E.value=!1,p("camera-off")},{deep:!0}),br(T,async V=>{x.value&&await Ro(V)});const W=Ma(()=>D.value.shouldStream&&E.value);br(W,V=>{if(V){Ke(P.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),F(P.value),Ke(j.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),F(j.value);const k=()=>i.track===void 0?500:40;Ke(C.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),fs(C.value,{detectHandler:I=>p("detect",I),formats:T.value,locateHandler:H,minDelay:k()})}});const F=V=>{const k=V.getContext("2d");Ke(k!==null,"canvas 2d context should always be non-null"),k.clearRect(0,0,V.width,V.height)},H=V=>{const k=j.value;Ke(k!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const I=C.value;if(Ke(I!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),V.length===0||i.track===void 0)F(k);else{const xe=I.offsetWidth,ce=I.offsetHeight,ae=I.videoWidth,Te=I.videoHeight,De=Math.max(xe/ae,ce/Te),Pe=ae*De,z=Te*De,bt=Pe/ae,$t=z/Te,Ct=(xe-Pe)/2,Tt=(ce-z)/2,et=({x:Le,y:me})=>({x:Math.floor(Le*bt),y:Math.floor(me*$t)}),Se=({x:Le,y:me})=>({x:Math.floor(Le+Ct),y:Math.floor(me+Tt)}),ze=V.map(Le=>{const{boundingBox:me,cornerPoints:Zt}=Le,{x:Pt,y:ve}=Se(et({x:me.x,y:me.y})),{x:He,y:Kt}=et({x:me.width,y:me.height});return{...Le,cornerPoints:Zt.map(St=>Se(et(St))),boundingBox:DOMRectReadOnly.fromRect({x:Pt,y:ve,width:He,height:Kt})}});k.width=I.offsetWidth,k.height=I.offsetHeight;const Qt=k.getContext("2d");i.track(ze,Qt)}},q={width:"100%",height:"100%",position:"relative","z-index":"0"},G={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},J={width:"100%",height:"100%","object-fit":"cover"},Ue=Ma(()=>W.value?J:{...J,visibility:"hidden",position:"absolute"});return(V,k)=>(Xo(),Qo("div",{style:q},[un("video",{ref_key:"videoRef",ref:C,style:Zo(Ue.value),autoplay:"",muted:"",playsinline:""},null,4),Ko(un("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:P,style:J},null,512),[[ei,!W.value]]),un("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:j,style:G},null,512),un("div",{style:G},[ti(V.$slots,"default")])]))}});export{Js as F,qs as T};
