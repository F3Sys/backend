import{d as Jo,r as bt,x as wr,h as Yo,D as Xo,g as Da,o as Qo,c as Zo,a as un,K as Ko,e as ei,L as ti,M as ri}from"./index-DY-KYBUN.js";const Ma={alphabet:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",minLength:0,blocklist:new Set(["0rgasm","1d10t","1d1ot","1di0t","1diot","1eccacu10","1eccacu1o","1eccacul0","1eccaculo","1mbec11e","1mbec1le","1mbeci1e","1mbecile","a11upat0","a11upato","a1lupat0","a1lupato","aand","ah01e","ah0le","aho1e","ahole","al1upat0","al1upato","allupat0","allupato","ana1","ana1e","anal","anale","anus","arrapat0","arrapato","arsch","arse","ass","b00b","b00be","b01ata","b0ceta","b0iata","b0ob","b0obe","b0sta","b1tch","b1te","b1tte","ba1atkar","balatkar","bastard0","bastardo","batt0na","battona","bitch","bite","bitte","bo0b","bo0be","bo1ata","boceta","boiata","boob","boobe","bosta","bran1age","bran1er","bran1ette","bran1eur","bran1euse","branlage","branler","branlette","branleur","branleuse","c0ck","c0g110ne","c0g11one","c0g1i0ne","c0g1ione","c0gl10ne","c0gl1one","c0gli0ne","c0glione","c0na","c0nnard","c0nnasse","c0nne","c0u111es","c0u11les","c0u1l1es","c0u1lles","c0ui11es","c0ui1les","c0uil1es","c0uilles","c11t","c11t0","c11to","c1it","c1it0","c1ito","cabr0n","cabra0","cabrao","cabron","caca","cacca","cacete","cagante","cagar","cagare","cagna","cara1h0","cara1ho","caracu10","caracu1o","caracul0","caraculo","caralh0","caralho","cazz0","cazz1mma","cazzata","cazzimma","cazzo","ch00t1a","ch00t1ya","ch00tia","ch00tiya","ch0d","ch0ot1a","ch0ot1ya","ch0otia","ch0otiya","ch1asse","ch1avata","ch1er","ch1ng0","ch1ngadaz0s","ch1ngadazos","ch1ngader1ta","ch1ngaderita","ch1ngar","ch1ngo","ch1ngues","ch1nk","chatte","chiasse","chiavata","chier","ching0","chingadaz0s","chingadazos","chingader1ta","chingaderita","chingar","chingo","chingues","chink","cho0t1a","cho0t1ya","cho0tia","cho0tiya","chod","choot1a","choot1ya","chootia","chootiya","cl1t","cl1t0","cl1to","clit","clit0","clito","cock","cog110ne","cog11one","cog1i0ne","cog1ione","cogl10ne","cogl1one","cogli0ne","coglione","cona","connard","connasse","conne","cou111es","cou11les","cou1l1es","cou1lles","coui11es","coui1les","couil1es","couilles","cracker","crap","cu10","cu1att0ne","cu1attone","cu1er0","cu1ero","cu1o","cul0","culatt0ne","culattone","culer0","culero","culo","cum","cunt","d11d0","d11do","d1ck","d1ld0","d1ldo","damn","de1ch","deich","depp","di1d0","di1do","dick","dild0","dildo","dyke","encu1e","encule","enema","enf01re","enf0ire","enfo1re","enfoire","estup1d0","estup1do","estupid0","estupido","etr0n","etron","f0da","f0der","f0ttere","f0tters1","f0ttersi","f0tze","f0utre","f1ca","f1cker","f1ga","fag","fica","ficker","figa","foda","foder","fottere","fotters1","fottersi","fotze","foutre","fr0c10","fr0c1o","fr0ci0","fr0cio","fr0sc10","fr0sc1o","fr0sci0","fr0scio","froc10","froc1o","froci0","frocio","frosc10","frosc1o","frosci0","froscio","fuck","g00","g0o","g0u1ne","g0uine","gandu","go0","goo","gou1ne","gouine","gr0gnasse","grognasse","haram1","harami","haramzade","hund1n","hundin","id10t","id1ot","idi0t","idiot","imbec11e","imbec1le","imbeci1e","imbecile","j1zz","jerk","jizz","k1ke","kam1ne","kamine","kike","leccacu10","leccacu1o","leccacul0","leccaculo","m1erda","m1gn0tta","m1gnotta","m1nch1a","m1nchia","m1st","mam0n","mamahuev0","mamahuevo","mamon","masturbat10n","masturbat1on","masturbate","masturbati0n","masturbation","merd0s0","merd0so","merda","merde","merdos0","merdoso","mierda","mign0tta","mignotta","minch1a","minchia","mist","musch1","muschi","n1gger","neger","negr0","negre","negro","nerch1a","nerchia","nigger","orgasm","p00p","p011a","p01la","p0l1a","p0lla","p0mp1n0","p0mp1no","p0mpin0","p0mpino","p0op","p0rca","p0rn","p0rra","p0uff1asse","p0uffiasse","p1p1","p1pi","p1r1a","p1rla","p1sc10","p1sc1o","p1sci0","p1scio","p1sser","pa11e","pa1le","pal1e","palle","pane1e1r0","pane1e1ro","pane1eir0","pane1eiro","panele1r0","panele1ro","paneleir0","paneleiro","patakha","pec0r1na","pec0rina","pecor1na","pecorina","pen1s","pendej0","pendejo","penis","pip1","pipi","pir1a","pirla","pisc10","pisc1o","pisci0","piscio","pisser","po0p","po11a","po1la","pol1a","polla","pomp1n0","pomp1no","pompin0","pompino","poop","porca","porn","porra","pouff1asse","pouffiasse","pr1ck","prick","pussy","put1za","puta","puta1n","putain","pute","putiza","puttana","queca","r0mp1ba11e","r0mp1ba1le","r0mp1bal1e","r0mp1balle","r0mpiba11e","r0mpiba1le","r0mpibal1e","r0mpiballe","rand1","randi","rape","recch10ne","recch1one","recchi0ne","recchione","retard","romp1ba11e","romp1ba1le","romp1bal1e","romp1balle","rompiba11e","rompiba1le","rompibal1e","rompiballe","ruff1an0","ruff1ano","ruffian0","ruffiano","s1ut","sa10pe","sa1aud","sa1ope","sacanagem","sal0pe","salaud","salope","saugnapf","sb0rr0ne","sb0rra","sb0rrone","sbattere","sbatters1","sbattersi","sborr0ne","sborra","sborrone","sc0pare","sc0pata","sch1ampe","sche1se","sche1sse","scheise","scheisse","schlampe","schwachs1nn1g","schwachs1nnig","schwachsinn1g","schwachsinnig","schwanz","scopare","scopata","sexy","sh1t","shit","slut","sp0mp1nare","sp0mpinare","spomp1nare","spompinare","str0nz0","str0nza","str0nzo","stronz0","stronza","stronzo","stup1d","stupid","succh1am1","succh1ami","succhiam1","succhiami","sucker","t0pa","tapette","test1c1e","test1cle","testic1e","testicle","tette","topa","tr01a","tr0ia","tr0mbare","tr1ng1er","tr1ngler","tring1er","tringler","tro1a","troia","trombare","turd","twat","vaffancu10","vaffancu1o","vaffancul0","vaffanculo","vag1na","vagina","verdammt","verga","w1chsen","wank","wichsen","x0ch0ta","x0chota","xana","xoch0ta","xochota","z0cc01a","z0cc0la","z0cco1a","z0ccola","z1z1","z1zi","ziz1","zizi","zocc01a","zocc0la","zocco1a","zoccola"])};class Gs{constructor(i){var o,h,d;const w=(o=i==null?void 0:i.alphabet)!==null&&o!==void 0?o:Ma.alphabet,P=(h=i==null?void 0:i.minLength)!==null&&h!==void 0?h:Ma.minLength,j=(d=i==null?void 0:i.blocklist)!==null&&d!==void 0?d:Ma.blocklist;if(new Blob([w]).size!==w.length)throw new Error("Alphabet cannot contain multibyte characters");const C=3;if(w.length<C)throw new Error(`Alphabet length must be at least ${C}`);if(new Set(w).size!==w.length)throw new Error("Alphabet must contain unique characters");const S=255;if(typeof P!="number"||P<0||P>S)throw new Error(`Minimum length has to be between 0 and ${S}`);const A=new Set,D=w.toLowerCase().split("");for(const W of j)if(W.length>=3){const R=W.toLowerCase(),U=R.split("");U.filter(G=>D.includes(G)).length===U.length&&A.add(R)}this.alphabet=this.shuffle(w),this.minLength=P,this.blocklist=A}encode(i){if(i.length===0)return"";if(i.filter(h=>h>=0&&h<=this.maxValue()).length!==i.length)throw new Error(`Encoding supports numbers between 0 and ${this.maxValue()}`);return this.encodeNumbers(i)}decode(i){const o=[];if(i==="")return o;const h=this.alphabet.split("");for(const C of i.split(""))if(!h.includes(C))return o;const d=i.charAt(0),w=this.alphabet.indexOf(d);let P=this.alphabet.slice(w)+this.alphabet.slice(0,w);P=P.split("").reverse().join("");let j=i.slice(1);for(;j.length>0;){const C=P.slice(0,1),S=j.split(C);if(S.length>0){if(S[0]==="")return o;o.push(this.toNumber(S[0],P.slice(1))),S.length>1&&(P=this.shuffle(P))}j=S.slice(1).join(C)}return o}encodeNumbers(i,o=0){if(o>this.alphabet.length)throw new Error("Reached max attempts to re-generate the ID");let h=i.reduce((C,S,A)=>this.alphabet[S%this.alphabet.length].codePointAt(0)+A+C,i.length)%this.alphabet.length;h=(h+o)%this.alphabet.length;let d=this.alphabet.slice(h)+this.alphabet.slice(0,h);const w=d.charAt(0);d=d.split("").reverse().join("");const P=[w];for(let C=0;C!==i.length;C++){const S=i[C];P.push(this.toId(S,d.slice(1))),C<i.length-1&&(P.push(d.slice(0,1)),d=this.shuffle(d))}let j=P.join("");if(this.minLength>j.length)for(j+=d.slice(0,1);this.minLength-j.length>0;)d=this.shuffle(d),j+=d.slice(0,Math.min(this.minLength-j.length,d.length));return this.isBlockedId(j)&&(j=this.encodeNumbers(i,o+1)),j}shuffle(i){const o=i.split("");for(let h=0,d=o.length-1;d>0;h++,d--){const w=(h*d+o[h].codePointAt(0)+o[d].codePointAt(0))%o.length;[o[h],o[w]]=[o[w],o[h]]}return o.join("")}toId(i,o){const h=[],d=o.split("");let w=i;do h.unshift(d[w%d.length]),w=Math.floor(w/d.length);while(w>0);return h.join("")}toNumber(i,o){const h=o.split("");return i.split("").reduce((d,w)=>d*h.length+h.indexOf(w),0)}isBlockedId(i){const o=i.toLowerCase();for(const h of this.blocklist)if(h.length<=o.length){if(o.length<=3||h.length<=3){if(o===h)return!0}else if(/\d/.test(h)){if(o.startsWith(h)||o.endsWith(h))return!0}else if(o.includes(h))return!0}return!1}maxValue(){return Number.MAX_SAFE_INTEGER}}var ao=(r,i,o)=>{if(!i.has(r))throw TypeError("Cannot "+o)},Va=(r,i,o)=>(ao(r,i,"read from private field"),o?o.call(r):i.get(r)),ni=(r,i,o)=>{if(i.has(r))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(r):i.set(r,o)},ai=(r,i,o,h)=>(ao(r,i,"write to private field"),i.set(r,o),o);const oo=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],oi=[...oo,["unknown"]].map(r=>r[0]),dn=new Map(oo);function ii(r){for(const[i,o]of dn)if(r===o)return i;return"unknown"}function si(r){if(io(r))return{width:r.naturalWidth,height:r.naturalHeight};if(so(r))return{width:r.width.baseVal.value,height:r.height.baseVal.value};if(co(r))return{width:r.videoWidth,height:r.videoHeight};if(lo(r))return{width:r.width,height:r.height};if(ho(r))return{width:r.displayWidth,height:r.displayHeight};if(uo(r))return{width:r.width,height:r.height};if(fo(r))return{width:r.width,height:r.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function io(r){try{return r instanceof HTMLImageElement}catch{return!1}}function so(r){try{return r instanceof SVGImageElement}catch{return!1}}function co(r){try{return r instanceof HTMLVideoElement}catch{return!1}}function uo(r){try{return r instanceof HTMLCanvasElement}catch{return!1}}function lo(r){try{return r instanceof ImageBitmap}catch{return!1}}function fo(r){try{return r instanceof OffscreenCanvas}catch{return!1}}function ho(r){try{return r instanceof VideoFrame}catch{return!1}}function po(r){try{return r instanceof Blob}catch{return!1}}function ci(r){try{return r instanceof ImageData}catch{return!1}}function ui(r,i){try{const o=new OffscreenCanvas(r,i);if(o.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return o;throw void 0}catch{const h=document.createElement("canvas");return h.width=r,h.height=i,h}}async function mo(r){if(io(r)&&!await hi(r))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(so(r)&&!await pi(r))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(ho(r)&&mi(r))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(co(r)&&(r.readyState===0||r.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(lo(r)&&gi(r))throw new DOMException("The image source is detached.","InvalidStateError");const{width:i,height:o}=si(r);if(i===0||o===0)return null;const h=ui(i,o).getContext("2d");h.drawImage(r,0,0);try{return h.getImageData(0,0,i,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function li(r){let i;try{if(globalThis.createImageBitmap)i=await createImageBitmap(r);else if(globalThis.Image){i=new Image;let o="";try{o=URL.createObjectURL(r),i.src=o,await i.decode()}finally{URL.revokeObjectURL(o)}}else return r}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await mo(i)}function di(r){const{width:i,height:o}=r;if(i===0||o===0)return null;const h=r.getContext("2d");try{return h.getImageData(0,0,i,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function fi(r){if(po(r))return await li(r);if(ci(r)){if(vi(r))throw new DOMException("The image data has been detached.","InvalidStateError");return r}return uo(r)||fo(r)?di(r):await mo(r)}async function hi(r){try{return await r.decode(),!0}catch{return!1}}async function pi(r){var i;try{return await((i=r.decode)==null?void 0:i.call(r)),!0}catch{return!1}}function mi(r){return r.format===null}function vi(r){return r.data.buffer.byteLength===0}function gi(r){return r.width===0&&r.height===0}function Ba(r,i){return r instanceof DOMException?new DOMException(`${i}: ${r.message}`,r.name):r instanceof Error?new r.constructor(`${i}: ${r.message}`):new Error(`${i}: ${r}`)}const Na=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function yi(r){return r.join("|")}function bi(r){const i=qa(r);let o=0,h=Na.length-1;for(;o<=h;){const d=Math.floor((o+h)/2),w=Na[d],P=qa(w);if(P===i)return w;P<i?o=d+1:h=d-1}return"None"}function qa(r){return r.toLowerCase().replace(/_-\[\]/g,"")}function wi(r,i){return r.Binarizer[i]}function $i(r,i){return r.CharacterSet[i]}const Ci=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Ti(r){return Ci[r.value]}function Pi(r,i){return r.EanAddOnSymbol[i]}function Si(r,i){return r.TextMode[i]}const Yt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function vo(r,i){return{...i,formats:yi(i.formats),binarizer:wi(r,i.binarizer),eanAddOnSymbol:Pi(r,i.eanAddOnSymbol),textMode:Si(r,i.textMode),characterSet:$i(r,i.characterSet)}}function go(r){return{...r,format:bi(r.format),eccLevel:r.eccLevel,contentType:Ti(r.contentType)}}const _i={locateFile:(r,i)=>{const o=r.match(/_(.+?)\.wasm$/);return o?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${o[1]}/${r}`:i+r}};let Ga=new WeakMap;function Ra(r,i){var o;const h=Ga.get(r);if(h!=null&&h.modulePromise&&i===void 0)return h.modulePromise;const d=(o=h==null?void 0:h.moduleOverrides)!=null?o:_i,w=r({...d});return Ga.set(r,{moduleOverrides:d,modulePromise:w}),w}async function Ei(r,i,o=Yt){const h={...Yt,...o},d=await Ra(r),{size:w}=i,P=new Uint8Array(await i.arrayBuffer()),j=d._malloc(w);d.HEAPU8.set(P,j);const C=d.readBarcodesFromImage(j,w,vo(d,h));d._free(j);const S=[];for(let A=0;A<C.size();++A)S.push(go(C.get(A)));return S}async function Oi(r,i,o=Yt){const h={...Yt,...o},d=await Ra(r),{data:w,width:P,height:j,data:{byteLength:C}}=i,S=d._malloc(C);d.HEAPU8.set(w,S);const A=d.readBarcodesFromPixmap(S,P,j,vo(d,h));d._free(S);const D=[];for(let W=0;W<A.size();++W)D.push(go(A.get(W)));return D}({...Yt,formats:[...Yt.formats]});var Fa=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(i={}){var o=i,h,d;o.ready=new Promise((n,a)=>{h=n,d=a});var w=Object.assign({},o),P="./this.program",j=typeof window=="object",C=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var S="";function A(n){return o.locateFile?o.locateFile(n,S):S+n}var D;(j||C)&&(C?S=self.location.href:typeof document<"u"&&document.currentScript&&(S=document.currentScript.src),r&&(S=r),S.indexOf("blob:")!==0?S=S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):S="",C&&(D=n=>{var a=new XMLHttpRequest;return a.open("GET",n,!1),a.responseType="arraybuffer",a.send(null),new Uint8Array(a.response)})),o.print||console.log.bind(console);var W=o.printErr||console.error.bind(console);Object.assign(o,w),w=null,o.arguments&&o.arguments,o.thisProgram&&(P=o.thisProgram),o.quit&&o.quit;var R;o.wasmBinary&&(R=o.wasmBinary),typeof WebAssembly!="object"&&ve("no native wasm support detected");var U,N=!1,G,J,Le,H,F,I,xe,ce;function ae(){var n=U.buffer;o.HEAP8=G=new Int8Array(n),o.HEAP16=Le=new Int16Array(n),o.HEAPU8=J=new Uint8Array(n),o.HEAPU16=H=new Uint16Array(n),o.HEAP32=F=new Int32Array(n),o.HEAPU32=I=new Uint32Array(n),o.HEAPF32=xe=new Float32Array(n),o.HEAPF64=ce=new Float64Array(n)}var Te=[],je=[],Pe=[];function q(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Ct(o.preRun.shift());_t(Te)}function wt(){_t(je)}function $t(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)et(o.postRun.shift());_t(Pe)}function Ct(n){Te.unshift(n)}function Tt(n){je.unshift(n)}function et(n){Pe.unshift(n)}var Se=0,Ne=null;function Qt(n){var a;Se++,(a=o.monitorRunDependencies)===null||a===void 0||a.call(o,Se)}function Ue(n){var a;if(Se--,(a=o.monitorRunDependencies)===null||a===void 0||a.call(o,Se),Se==0&&Ne){var c=Ne;Ne=null,c()}}function ve(n){var a;(a=o.onAbort)===null||a===void 0||a.call(o,n),n="Aborted("+n+")",W(n),N=!0,n+=". Build with -sASSERTIONS for more info.";var c=new WebAssembly.RuntimeError(n);throw d(c),c}var Zt="data:application/octet-stream;base64,",Pt=n=>n.startsWith(Zt),me;me="zxing_reader.wasm",Pt(me)||(me=A(me));function ze(n){if(n==me&&R)return new Uint8Array(R);if(D)return D(n);throw"both async and sync fetching of the wasm failed"}function Kt(n){return!R&&(j||C)&&typeof fetch=="function"?fetch(n,{credentials:"same-origin"}).then(a=>{if(!a.ok)throw"failed to load wasm binary file at '"+n+"'";return a.arrayBuffer()}).catch(()=>ze(n)):Promise.resolve().then(()=>ze(n))}function St(n,a,c){return Kt(n).then(u=>WebAssembly.instantiate(u,a)).then(u=>u).then(c,u=>{W(`failed to asynchronously prepare wasm: ${u}`),ve(u)})}function er(n,a,c,u){return!n&&typeof WebAssembly.instantiateStreaming=="function"&&!Pt(a)&&typeof fetch=="function"?fetch(a,{credentials:"same-origin"}).then(m=>{var g=WebAssembly.instantiateStreaming(m,c);return g.then(u,function($){return W(`wasm streaming compile failed: ${$}`),W("falling back to ArrayBuffer instantiation"),St(a,c,u)})}):St(a,c,u)}function mn(){var n={a:$a};function a(u,m){return Y=u.exports,U=Y.ia,ae(),jr=Y.ma,Tt(Y.ja),Ue(),Y}Qt();function c(u){a(u.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(n,a)}catch(u){W(`Module.instantiateWasm callback failed with error: ${u}`),d(u)}return er(R,me,n,c).catch(d),{}}var _t=n=>{for(;n.length>0;)n.shift()(o)};o.noExitRuntime;var Et=[],qe=0,Cr=n=>{var a=new tr(n);return a.get_caught()||(a.set_caught(!0),qe--),a.set_rethrown(!1),Et.push(a),Jr(a.excPtr),a.get_exception_ptr()},De=0,Tr=()=>{Q(0,0);var n=Et.pop();Gr(n.excPtr),De=0};function tr(n){this.excPtr=n,this.ptr=n-24,this.set_type=function(a){I[this.ptr+4>>2]=a},this.get_type=function(){return I[this.ptr+4>>2]},this.set_destructor=function(a){I[this.ptr+8>>2]=a},this.get_destructor=function(){return I[this.ptr+8>>2]},this.set_caught=function(a){a=a?1:0,G[this.ptr+12>>0]=a},this.get_caught=function(){return G[this.ptr+12>>0]!=0},this.set_rethrown=function(a){a=a?1:0,G[this.ptr+13>>0]=a},this.get_rethrown=function(){return G[this.ptr+13>>0]!=0},this.init=function(a,c){this.set_adjusted_ptr(0),this.set_type(a),this.set_destructor(c)},this.set_adjusted_ptr=function(a){I[this.ptr+16>>2]=a},this.get_adjusted_ptr=function(){return I[this.ptr+16>>2]},this.get_exception_ptr=function(){var a=Z(this.get_type());if(a)return I[this.excPtr>>2];var c=this.get_adjusted_ptr();return c!==0?c:this.excPtr}}var vn=n=>{throw De||(De=n),De},rr=n=>{var a=De;if(!a)return gt(0),0;var c=new tr(a);c.set_adjusted_ptr(a);var u=c.get_type();if(!u)return gt(0),a;for(var m in n){var g=n[m];if(g===0||g===u)break;var $=c.ptr+16;if(Yr(g,u,$))return gt(g),a}return gt(u),a},nr=()=>rr([]),oe=n=>rr([n]),ie=(n,a)=>rr([n,a]),Ot=()=>{var n=Et.pop();n||ve("no exception to throw");var a=n.excPtr;throw n.get_rethrown()||(Et.push(n),n.set_rethrown(!0),n.set_caught(!1),qe++),De=a,De},At=(n,a,c)=>{var u=new tr(n);throw u.init(a,c),De=n,qe++,De},gn=()=>qe,we={},ar=n=>{for(;n.length;){var a=n.pop(),c=n.pop();c(a)}};function ct(n){return this.fromWireType(F[n>>2])}var tt={},Ae={},rt={},Pr,xt=n=>{throw new Pr(n)},Ge=(n,a,c)=>{n.forEach(function(T){rt[T]=a});function u(T){var _=c(T);_.length!==n.length&&xt("Mismatched type converter count");for(var O=0;O<n.length;++O)he(n[O],_[O])}var m=new Array(a.length),g=[],$=0;a.forEach((T,_)=>{Ae.hasOwnProperty(T)?m[_]=Ae[T]:(g.push(T),tt.hasOwnProperty(T)||(tt[T]=[]),tt[T].push(()=>{m[_]=Ae[T],++$,$===g.length&&u(m)}))}),g.length===0&&u(m)},yn=n=>{var a=we[n];delete we[n];var c=a.rawConstructor,u=a.rawDestructor,m=a.fields,g=m.map($=>$.getterReturnType).concat(m.map($=>$.setterArgumentType));Ge([n],g,$=>{var T={};return m.forEach((_,O)=>{var M=_.fieldName,e=$[O],t=_.getter,s=_.getterContext,l=$[O+m.length],p=_.setter,v=_.setterContext;T[M]={read:b=>e.fromWireType(t(s,b)),write:(b,f)=>{var y=[];p(v,b,l.toWireType(y,f)),ar(y)}}}),[{name:a.name,fromWireType:_=>{var O={};for(var M in T)O[M]=T[M].read(_);return u(_),O},toWireType:(_,O)=>{for(var M in T)if(!(M in O))throw new TypeError(`Missing field: "${M}"`);var e=c();for(M in T)T[M].write(e,O[M]);return _!==null&&_.push(u,e),e},argPackAdvance:ge,readValueFromPointer:ct,destructorFunction:u}]})},bn=(n,a,c,u,m)=>{},wn=()=>{for(var n=new Array(256),a=0;a<256;++a)n[a]=String.fromCharCode(a);Sr=n},Sr,se=n=>{for(var a="",c=n;J[c];)a+=Sr[J[c++]];return a},He,z=n=>{throw new He(n)};function nt(n,a){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var u=a.name;if(n||z(`type "${u}" must have a positive integer typeid pointer`),Ae.hasOwnProperty(n)){if(c.ignoreDuplicateRegistrations)return;z(`Cannot register type '${u}' twice`)}if(Ae[n]=a,delete rt[n],tt.hasOwnProperty(n)){var m=tt[n];delete tt[n],m.forEach(g=>g())}}function he(n,a){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in a))throw new TypeError("registerType registeredInstance requires argPackAdvance");return nt(n,a,c)}var ge=8,_r=(n,a,c,u)=>{a=se(a),he(n,{name:a,fromWireType:function(m){return!!m},toWireType:function(m,g){return g?c:u},argPackAdvance:ge,readValueFromPointer:function(m){return this.fromWireType(J[m])},destructorFunction:null})},jt=n=>({count:n.count,deleteScheduled:n.deleteScheduled,preservePointerOnDelete:n.preservePointerOnDelete,ptr:n.ptr,ptrType:n.ptrType,smartPtr:n.smartPtr,smartPtrType:n.smartPtrType}),Me=n=>{function a(c){return c.$$.ptrType.registeredClass.name}z(a(n)+" instance already deleted")},or=!1,Er=n=>{},$n=n=>{n.smartPtr?n.smartPtrType.rawDestructor(n.smartPtr):n.ptrType.registeredClass.rawDestructor(n.ptr)},ir=n=>{n.count.value-=1;var a=n.count.value===0;a&&$n(n)},ue=(n,a,c)=>{if(a===c)return n;if(c.baseClass===void 0)return null;var u=ue(n,a,c.baseClass);return u===null?null:c.downcast(u)},Je={},B=()=>Object.keys(Ye).length,Cn=()=>{var n=[];for(var a in Ye)Ye.hasOwnProperty(a)&&n.push(Ye[a]);return n},pe=[],$e=()=>{for(;pe.length;){var n=pe.pop();n.$$.deleteScheduled=!1,n.delete()}},ut,Tn=n=>{ut=n,pe.length&&ut&&ut($e)},sr=()=>{o.getInheritedInstanceCount=B,o.getLiveInheritedInstances=Cn,o.flushPendingDeletes=$e,o.setDelayFunction=Tn},Ye={},Or=(n,a)=>{for(a===void 0&&z("ptr should not be undefined");n.baseClass;)a=n.upcast(a),n=n.baseClass;return a},Pn=(n,a)=>(a=Or(n,a),Ye[a]),lt=(n,a)=>{(!a.ptrType||!a.ptr)&&xt("makeClassHandle requires ptr and ptrType");var c=!!a.smartPtrType,u=!!a.smartPtr;return c!==u&&xt("Both smartPtrType and smartPtr must be specified"),a.count={value:1},at(Object.create(n,{$$:{value:a,writable:!0}}))};function Ar(n){var a=this.getPointee(n);if(!a)return this.destructor(n),null;var c=Pn(this.registeredClass,a);if(c!==void 0){if(c.$$.count.value===0)return c.$$.ptr=a,c.$$.smartPtr=n,c.clone();var u=c.clone();return this.destructor(n),u}function m(){return this.isSmartPointer?lt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:a,smartPtrType:this,smartPtr:n}):lt(this.registeredClass.instancePrototype,{ptrType:this,ptr:n})}var g=this.registeredClass.getActualType(a),$=Je[g];if(!$)return m.call(this);var T;this.isConst?T=$.constPointerType:T=$.pointerType;var _=ue(a,this.registeredClass,T.registeredClass);return _===null?m.call(this):this.isSmartPointer?lt(T.registeredClass.instancePrototype,{ptrType:T,ptr:_,smartPtrType:this,smartPtr:n}):lt(T.registeredClass.instancePrototype,{ptrType:T,ptr:_})}var at=n=>typeof FinalizationRegistry>"u"?(at=a=>a,n):(or=new FinalizationRegistry(a=>{ir(a.$$)}),at=a=>{var c=a.$$,u=!!c.smartPtr;if(u){var m={$$:c};or.register(a,m,a)}return a},Er=a=>or.unregister(a),at(n)),Sn=()=>{Object.assign(Dt.prototype,{isAliasOf(n){if(!(this instanceof Dt)||!(n instanceof Dt))return!1;var a=this.$$.ptrType.registeredClass,c=this.$$.ptr;n.$$=n.$$;for(var u=n.$$.ptrType.registeredClass,m=n.$$.ptr;a.baseClass;)c=a.upcast(c),a=a.baseClass;for(;u.baseClass;)m=u.upcast(m),u=u.baseClass;return a===u&&c===m},clone(){if(this.$$.ptr||Me(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var n=at(Object.create(Object.getPrototypeOf(this),{$$:{value:jt(this.$$)}}));return n.$$.count.value+=1,n.$$.deleteScheduled=!1,n},delete(){this.$$.ptr||Me(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&z("Object already scheduled for deletion"),Er(this),ir(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Me(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&z("Object already scheduled for deletion"),pe.push(this),pe.length===1&&ut&&ut($e),this.$$.deleteScheduled=!0,this}})};function Dt(){}var ke=(n,a)=>Object.defineProperty(a,"name",{value:n}),Mt=(n,a,c)=>{if(n[a].overloadTable===void 0){var u=n[a];n[a]=function(){return n[a].overloadTable.hasOwnProperty(arguments.length)||z(`Function '${c}' called with an invalid number of arguments (${arguments.length}) - expects one of (${n[a].overloadTable})!`),n[a].overloadTable[arguments.length].apply(this,arguments)},n[a].overloadTable=[],n[a].overloadTable[u.argCount]=u}},Xe=(n,a,c)=>{o.hasOwnProperty(n)?((c===void 0||o[n].overloadTable!==void 0&&o[n].overloadTable[c]!==void 0)&&z(`Cannot register public name '${n}' twice`),Mt(o,n,n),o.hasOwnProperty(c)&&z(`Cannot register multiple overloads of a function with the same number of arguments (${c})!`),o[n].overloadTable[c]=a):(o[n]=a,c!==void 0&&(o[n].numArguments=c))},_n=48,En=57,dt=n=>{if(n===void 0)return"_unknown";n=n.replace(/[^a-zA-Z0-9_]/g,"$");var a=n.charCodeAt(0);return a>=_n&&a<=En?`_${n}`:n};function On(n,a,c,u,m,g,$,T){this.name=n,this.constructor=a,this.instancePrototype=c,this.rawDestructor=u,this.baseClass=m,this.getActualType=g,this.upcast=$,this.downcast=T,this.pureVirtualFunctions=[]}var cr=(n,a,c)=>{for(;a!==c;)a.upcast||z(`Expected null or instance of ${c.name}, got an instance of ${a.name}`),n=a.upcast(n),a=a.baseClass;return n};function kt(n,a){if(a===null)return this.isReference&&z(`null is not a valid ${this.name}`),0;a.$$||z(`Cannot pass "${ht(a)}" as a ${this.name}`),a.$$.ptr||z(`Cannot pass deleted object as a pointer of type ${this.name}`);var c=a.$$.ptrType.registeredClass,u=cr(a.$$.ptr,c,this.registeredClass);return u}function An(n,a){var c;if(a===null)return this.isReference&&z(`null is not a valid ${this.name}`),this.isSmartPointer?(c=this.rawConstructor(),n!==null&&n.push(this.rawDestructor,c),c):0;(!a||!a.$$)&&z(`Cannot pass "${ht(a)}" as a ${this.name}`),a.$$.ptr||z(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&a.$$.ptrType.isConst&&z(`Cannot convert argument of type ${a.$$.smartPtrType?a.$$.smartPtrType.name:a.$$.ptrType.name} to parameter type ${this.name}`);var u=a.$$.ptrType.registeredClass;if(c=cr(a.$$.ptr,u,this.registeredClass),this.isSmartPointer)switch(a.$$.smartPtr===void 0&&z("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:a.$$.smartPtrType===this?c=a.$$.smartPtr:z(`Cannot convert argument of type ${a.$$.smartPtrType?a.$$.smartPtrType.name:a.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:c=a.$$.smartPtr;break;case 2:if(a.$$.smartPtrType===this)c=a.$$.smartPtr;else{var m=a.clone();c=this.rawShare(c,Oe.toHandle(()=>m.delete())),n!==null&&n.push(this.rawDestructor,c)}break;default:z("Unsupporting sharing policy")}return c}function ft(n,a){if(a===null)return this.isReference&&z(`null is not a valid ${this.name}`),0;a.$$||z(`Cannot pass "${ht(a)}" as a ${this.name}`),a.$$.ptr||z(`Cannot pass deleted object as a pointer of type ${this.name}`),a.$$.ptrType.isConst&&z(`Cannot convert argument of type ${a.$$.ptrType.name} to parameter type ${this.name}`);var c=a.$$.ptrType.registeredClass,u=cr(a.$$.ptr,c,this.registeredClass);return u}function xr(n){return this.fromWireType(I[n>>2])}var Rt=()=>{Object.assign(Ve.prototype,{getPointee(n){return this.rawGetPointee&&(n=this.rawGetPointee(n)),n},destructor(n){var a;(a=this.rawDestructor)===null||a===void 0||a.call(this,n)},argPackAdvance:ge,readValueFromPointer:xr,deleteObject(n){n!==null&&n.delete()},fromWireType:Ar})};function Ve(n,a,c,u,m,g,$,T,_,O,M){this.name=n,this.registeredClass=a,this.isReference=c,this.isConst=u,this.isSmartPointer=m,this.pointeeType=g,this.sharingPolicy=$,this.rawGetPointee=T,this.rawConstructor=_,this.rawShare=O,this.rawDestructor=M,!m&&a.baseClass===void 0?u?(this.toWireType=kt,this.destructorFunction=null):(this.toWireType=ft,this.destructorFunction=null):this.toWireType=An}var ur=(n,a,c)=>{o.hasOwnProperty(n)||xt("Replacing nonexistant public symbol"),o[n].overloadTable!==void 0&&c!==void 0?o[n].overloadTable[c]=a:(o[n]=a,o[n].argCount=c)},lr=(n,a,c)=>{var u=o["dynCall_"+n];return c&&c.length?u.apply(null,[a].concat(c)):u.call(null,a)},Ft=[],jr,ee=n=>{var a=Ft[n];return a||(n>=Ft.length&&(Ft.length=n+1),Ft[n]=a=jr.get(n)),a},xn=(n,a,c)=>{if(n.includes("j"))return lr(n,a,c);var u=ee(a).apply(null,c);return u},dr=(n,a)=>{var c=[];return function(){return c.length=0,Object.assign(c,arguments),xn(n,a,c)}},_e=(n,a)=>{n=se(n);function c(){return n.includes("j")?dr(n,a):ee(a)}var u=c();return typeof u!="function"&&z(`unknown function pointer with signature ${n}: ${a}`),u},jn=(n,a)=>{var c=ke(a,function(u){this.name=a,this.message=u;var m=new Error(u).stack;m!==void 0&&(this.stack=this.toString()+`
`+m.replace(/^Error(:[^\n]*)?\n/,""))});return c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},c},Dr,Mr=n=>{var a=qr(n),c=se(a);return Ie(a),c},Qe=(n,a)=>{var c=[],u={};function m(g){if(!u[g]&&!Ae[g]){if(rt[g]){rt[g].forEach(m);return}c.push(g),u[g]=!0}}throw a.forEach(m),new Dr(`${n}: `+c.map(Mr).join([", "]))},kr=(n,a,c,u,m,g,$,T,_,O,M,e,t)=>{M=se(M),g=_e(m,g),T&&(T=_e($,T)),O&&(O=_e(_,O)),t=_e(e,t);var s=dt(M);Xe(s,function(){Qe(`Cannot construct ${M} due to unbound types`,[u])}),Ge([n,a,c],u?[u]:[],function(l){l=l[0];var p,v;u?(p=l.registeredClass,v=p.instancePrototype):v=Dt.prototype;var b=ke(M,function(){if(Object.getPrototypeOf(this)!==f)throw new He("Use 'new' to construct "+M);if(y.constructor_body===void 0)throw new He(M+" has no accessible constructor");var X=y.constructor_body[arguments.length];if(X===void 0)throw new He(`Tried to invoke ctor of ${M} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(y.constructor_body).toString()}) parameters instead!`);return X.apply(this,arguments)}),f=Object.create(v,{constructor:{value:b}});b.prototype=f;var y=new On(M,b,f,t,p,g,T,O);if(y.baseClass){var E,x;(x=(E=y.baseClass).__derivedClasses)!==null&&x!==void 0||(E.__derivedClasses=[]),y.baseClass.__derivedClasses.push(y)}var k=new Ve(M,y,!0,!1,!1),L=new Ve(M+"*",y,!1,!1,!1),V=new Ve(M+" const*",y,!1,!0,!1);return Je[n]={pointerType:L,constPointerType:V},ur(s,b),[k,L,V]})},fr=(n,a)=>{for(var c=[],u=0;u<n;u++)c.push(I[a+u*4>>2]);return c};function It(n){for(var a=1;a<n.length;++a)if(n[a]!==null&&n[a].destructorFunction===void 0)return!0;return!1}function Wt(n,a,c,u,m,g){var $=a.length;$<2&&z("argTypes array size mismatch! Must at least get return value and 'this' types!");var T=a[1]!==null&&c!==null,_=It(a),O=a[0].name!=="void",M=$-2,e=new Array(M),t=[],s=[],l=function(){arguments.length!==M&&z(`function ${n} called with ${arguments.length} arguments, expected ${M}`),s.length=0;var p;t.length=T?2:1,t[0]=m,T&&(p=a[1].toWireType(s,this),t[1]=p);for(var v=0;v<M;++v)e[v]=a[v+2].toWireType(s,arguments[v]),t.push(e[v]);var b=u.apply(null,t);function f(y){if(_)ar(s);else for(var E=T?1:2;E<a.length;E++){var x=E===1?p:e[E-2];a[E].destructorFunction!==null&&a[E].destructorFunction(x)}if(O)return a[0].fromWireType(y)}return f(b)};return ke(n,l)}var te=(n,a,c,u,m,g)=>{var $=fr(a,c);m=_e(u,m),Ge([],[n],function(T){T=T[0];var _=`constructor ${T.name}`;if(T.registeredClass.constructor_body===void 0&&(T.registeredClass.constructor_body=[]),T.registeredClass.constructor_body[a-1]!==void 0)throw new He(`Cannot register multiple constructors with identical number of parameters (${a-1}) for class '${T.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return T.registeredClass.constructor_body[a-1]=()=>{Qe(`Cannot construct ${T.name} due to unbound types`,$)},Ge([],$,O=>(O.splice(1,0,null),T.registeredClass.constructor_body[a-1]=Wt(_,O,null,m,g),[])),[]})},Rr=n=>{n=n.trim();const a=n.indexOf("(");return a!==-1?n.substr(0,a):n},Dn=(n,a,c,u,m,g,$,T,_)=>{var O=fr(c,u);a=se(a),a=Rr(a),g=_e(m,g),Ge([],[n],function(M){M=M[0];var e=`${M.name}.${a}`;a.startsWith("@@")&&(a=Symbol[a.substring(2)]),T&&M.registeredClass.pureVirtualFunctions.push(a);function t(){Qe(`Cannot call ${e} due to unbound types`,O)}var s=M.registeredClass.instancePrototype,l=s[a];return l===void 0||l.overloadTable===void 0&&l.className!==M.name&&l.argCount===c-2?(t.argCount=c-2,t.className=M.name,s[a]=t):(Mt(s,a,e),s[a].overloadTable[c-2]=t),Ge([],O,function(p){var v=Wt(e,p,M,g,$);return s[a].overloadTable===void 0?(v.argCount=c-2,s[a]=v):s[a].overloadTable[c-2]=v,[]}),[]})};function Ee(){Object.assign(Fr.prototype,{get(n){return this.allocated[n]},has(n){return this.allocated[n]!==void 0},allocate(n){var a=this.freelist.pop()||this.allocated.length;return this.allocated[a]=n,a},free(n){this.allocated[n]=void 0,this.freelist.push(n)}})}function Fr(){this.allocated=[void 0],this.freelist=[]}var ye=new Fr,Lt=n=>{n>=ye.reserved&&--ye.get(n).refcount===0&&ye.free(n)},Ut=()=>{for(var n=0,a=ye.reserved;a<ye.allocated.length;++a)ye.allocated[a]!==void 0&&++n;return n},Mn=()=>{ye.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),ye.reserved=ye.allocated.length,o.count_emval_handles=Ut},Oe={toValue:n=>(n||z("Cannot use deleted val. handle = "+n),ye.get(n).value),toHandle:n=>{switch(n){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return ye.allocate({refcount:1,value:n})}}},kn=(n,a)=>{a=se(a),he(n,{name:a,fromWireType:c=>{var u=Oe.toValue(c);return Lt(c),u},toWireType:(c,u)=>Oe.toHandle(u),argPackAdvance:ge,readValueFromPointer:ct,destructorFunction:null})},hr=(n,a,c)=>{switch(a){case 1:return c?function(u){return this.fromWireType(G[u>>0])}:function(u){return this.fromWireType(J[u>>0])};case 2:return c?function(u){return this.fromWireType(Le[u>>1])}:function(u){return this.fromWireType(H[u>>1])};case 4:return c?function(u){return this.fromWireType(F[u>>2])}:function(u){return this.fromWireType(I[u>>2])};default:throw new TypeError(`invalid integer width (${a}): ${n}`)}},Rn=(n,a,c,u)=>{a=se(a);function m(){}m.values={},he(n,{name:a,constructor:m,fromWireType:function(g){return this.constructor.values[g]},toWireType:(g,$)=>$.value,argPackAdvance:ge,readValueFromPointer:hr(a,c,u),destructorFunction:null}),Xe(a,m)},zt=(n,a)=>{var c=Ae[n];return c===void 0&&z(a+" has unknown type "+Mr(n)),c},Fn=(n,a,c)=>{var u=zt(n,"enum");a=se(a);var m=u.constructor,g=Object.create(u.constructor.prototype,{value:{value:c},constructor:{value:ke(`${u.name}_${a}`,function(){})}});m.values[c]=g,m[a]=g},ht=n=>{if(n===null)return"null";var a=typeof n;return a==="object"||a==="array"||a==="function"?n.toString():""+n},Re=(n,a)=>{switch(a){case 4:return function(c){return this.fromWireType(xe[c>>2])};case 8:return function(c){return this.fromWireType(ce[c>>3])};default:throw new TypeError(`invalid float width (${a}): ${n}`)}},pr=(n,a,c)=>{a=se(a),he(n,{name:a,fromWireType:u=>u,toWireType:(u,m)=>m,argPackAdvance:ge,readValueFromPointer:Re(a,c),destructorFunction:null})},In=(n,a,c,u,m,g,$)=>{var T=fr(a,c);n=se(n),n=Rr(n),m=_e(u,m),Xe(n,function(){Qe(`Cannot call ${n} due to unbound types`,T)},a-1),Ge([],T,function(_){var O=[_[0],null].concat(_.slice(1));return ur(n,Wt(n,O,null,m,g),a-1),[]})},Wn=(n,a,c)=>{switch(a){case 1:return c?u=>G[u>>0]:u=>J[u>>0];case 2:return c?u=>Le[u>>1]:u=>H[u>>1];case 4:return c?u=>F[u>>2]:u=>I[u>>2];default:throw new TypeError(`invalid integer width (${a}): ${n}`)}},Fe=(n,a,c,u,m)=>{a=se(a);var g=M=>M;if(u===0){var $=32-8*c;g=M=>M<<$>>>$}var T=a.includes("unsigned"),_=(M,e)=>{},O;T?O=function(M,e){return _(e,this.name),e>>>0}:O=function(M,e){return _(e,this.name),e},he(n,{name:a,fromWireType:g,toWireType:O,argPackAdvance:ge,readValueFromPointer:Wn(a,c,u!==0),destructorFunction:null})},Ir=(n,a,c)=>{var u=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],m=u[a];function g($){var T=I[$>>2],_=I[$+4>>2];return new m(G.buffer,_,T)}c=se(c),he(n,{name:c,fromWireType:g,argPackAdvance:ge,readValueFromPointer:g},{ignoreDuplicateRegistrations:!0})},Wr=(n,a,c,u)=>{if(!(u>0))return 0;for(var m=c,g=c+u-1,$=0;$<n.length;++$){var T=n.charCodeAt($);if(T>=55296&&T<=57343){var _=n.charCodeAt(++$);T=65536+((T&1023)<<10)|_&1023}if(T<=127){if(c>=g)break;a[c++]=T}else if(T<=2047){if(c+1>=g)break;a[c++]=192|T>>6,a[c++]=128|T&63}else if(T<=65535){if(c+2>=g)break;a[c++]=224|T>>12,a[c++]=128|T>>6&63,a[c++]=128|T&63}else{if(c+3>=g)break;a[c++]=240|T>>18,a[c++]=128|T>>12&63,a[c++]=128|T>>6&63,a[c++]=128|T&63}}return a[c]=0,c-m},Ln=(n,a,c)=>Wr(n,J,a,c),Lr=n=>{for(var a=0,c=0;c<n.length;++c){var u=n.charCodeAt(c);u<=127?a++:u<=2047?a+=2:u>=55296&&u<=57343?(a+=4,++c):a+=3}return a},Ht=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Un=(n,a,c)=>{for(var u=a+c,m=a;n[m]&&!(m>=u);)++m;if(m-a>16&&n.buffer&&Ht)return Ht.decode(n.subarray(a,m));for(var g="";a<m;){var $=n[a++];if(!($&128)){g+=String.fromCharCode($);continue}var T=n[a++]&63;if(($&224)==192){g+=String.fromCharCode(($&31)<<6|T);continue}var _=n[a++]&63;if(($&240)==224?$=($&15)<<12|T<<6|_:$=($&7)<<18|T<<12|_<<6|n[a++]&63,$<65536)g+=String.fromCharCode($);else{var O=$-65536;g+=String.fromCharCode(55296|O>>10,56320|O&1023)}}return g},pt=(n,a)=>n?Un(J,n,a):"",zn=(n,a)=>{a=se(a);var c=a==="std::string";he(n,{name:a,fromWireType(u){var m=I[u>>2],g=u+4,$;if(c)for(var T=g,_=0;_<=m;++_){var O=g+_;if(_==m||J[O]==0){var M=O-T,e=pt(T,M);$===void 0?$=e:($+="\0",$+=e),T=O+1}}else{for(var t=new Array(m),_=0;_<m;++_)t[_]=String.fromCharCode(J[g+_]);$=t.join("")}return Ie(u),$},toWireType(u,m){m instanceof ArrayBuffer&&(m=new Uint8Array(m));var g,$=typeof m=="string";$||m instanceof Uint8Array||m instanceof Uint8ClampedArray||m instanceof Int8Array||z("Cannot pass non-string to std::string"),c&&$?g=Lr(m):g=m.length;var T=gr(4+g+1),_=T+4;if(I[T>>2]=g,c&&$)Ln(m,_,g+1);else if($)for(var O=0;O<g;++O){var M=m.charCodeAt(O);M>255&&(Ie(_),z("String has UTF-16 code units that do not fit in 8 bits")),J[_+O]=M}else for(var O=0;O<g;++O)J[_+O]=m[O];return u!==null&&u.push(Ie,T),T},argPackAdvance:ge,readValueFromPointer:xr,destructorFunction(u){Ie(u)}})},Ur=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Hn=(n,a)=>{for(var c=n,u=c>>1,m=u+a/2;!(u>=m)&&H[u];)++u;if(c=u<<1,c-n>32&&Ur)return Ur.decode(J.subarray(n,c));for(var g="",$=0;!($>=a/2);++$){var T=Le[n+$*2>>1];if(T==0)break;g+=String.fromCharCode(T)}return g},Vn=(n,a,c)=>{var u;if((u=c)!==null&&u!==void 0||(c=2147483647),c<2)return 0;c-=2;for(var m=a,g=c<n.length*2?c/2:n.length,$=0;$<g;++$){var T=n.charCodeAt($);Le[a>>1]=T,a+=2}return Le[a>>1]=0,a-m},Bn=n=>n.length*2,Nn=(n,a)=>{for(var c=0,u="";!(c>=a/4);){var m=F[n+c*4>>2];if(m==0)break;if(++c,m>=65536){var g=m-65536;u+=String.fromCharCode(55296|g>>10,56320|g&1023)}else u+=String.fromCharCode(m)}return u},qn=(n,a,c)=>{var u;if((u=c)!==null&&u!==void 0||(c=2147483647),c<4)return 0;for(var m=a,g=m+c-4,$=0;$<n.length;++$){var T=n.charCodeAt($);if(T>=55296&&T<=57343){var _=n.charCodeAt(++$);T=65536+((T&1023)<<10)|_&1023}if(F[a>>2]=T,a+=4,a+4>g)break}return F[a>>2]=0,a-m},Gn=n=>{for(var a=0,c=0;c<n.length;++c){var u=n.charCodeAt(c);u>=55296&&u<=57343&&++c,a+=4}return a},Jn=(n,a,c)=>{c=se(c);var u,m,g,$,T;a===2?(u=Hn,m=Vn,$=Bn,g=()=>H,T=1):a===4&&(u=Nn,m=qn,$=Gn,g=()=>I,T=2),he(n,{name:c,fromWireType:_=>{for(var O=I[_>>2],M=g(),e,t=_+4,s=0;s<=O;++s){var l=_+4+s*a;if(s==O||M[l>>T]==0){var p=l-t,v=u(t,p);e===void 0?e=v:(e+="\0",e+=v),t=l+a}}return Ie(_),e},toWireType:(_,O)=>{typeof O!="string"&&z(`Cannot pass non-string to C++ string type ${c}`);var M=$(O),e=gr(4+M+a);return I[e>>2]=M>>T,m(O,e+4,M+a),_!==null&&_.push(Ie,e),e},argPackAdvance:ge,readValueFromPointer:ct,destructorFunction(_){Ie(_)}})},mt=(n,a,c,u,m,g)=>{we[n]={name:se(a),rawConstructor:_e(c,u),rawDestructor:_e(m,g),fields:[]}},Yn=(n,a,c,u,m,g,$,T,_,O)=>{we[n].fields.push({fieldName:se(a),getterReturnType:c,getter:_e(u,m),getterContext:g,setterArgumentType:$,setter:_e(T,_),setterContext:O})},zr=(n,a)=>{a=se(a),he(n,{isVoid:!0,name:a,argPackAdvance:0,fromWireType:()=>{},toWireType:(c,u)=>{}})},Vt=[],Xn=(n,a,c,u)=>(n=Vt[n],a=Oe.toValue(a),n(null,a,c,u)),Qn={},Hr=n=>{var a=Qn[n];return a===void 0?se(n):a},Vr=()=>{if(typeof globalThis=="object")return globalThis;function n(a){a.$$$embind_global$$$=a;var c=typeof $$$embind_global$$$=="object"&&a.$$$embind_global$$$==a;return c||delete a.$$$embind_global$$$,c}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&n(global)?$$$embind_global$$$=global:typeof self=="object"&&n(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Zn=n=>n===0?Oe.toHandle(Vr()):(n=Hr(n),Oe.toHandle(Vr()[n])),Kn=n=>{var a=Vt.length;return Vt.push(n),a},ea=(n,a)=>{for(var c=new Array(n),u=0;u<n;++u)c[u]=zt(I[a+u*4>>2],"parameter "+u);return c},ta=Reflect.construct,ra=(n,a,c)=>{var u=[],m=n.toWireType(u,c);return u.length&&(I[a>>2]=Oe.toHandle(u)),m},na=(n,a,c)=>{var u=ea(n,a),m=u.shift();n--;var g=new Array(n),$=(_,O,M,e)=>{for(var t=0,s=0;s<n;++s)g[s]=u[s].readValueFromPointer(e+t),t+=u[s].argPackAdvance;for(var l=c===1?ta(O,g):O.apply(_,g),s=0;s<n;++s){var p,v;(p=(v=u[s]).deleteObject)===null||p===void 0||p.call(v,g[s])}return ra(m,M,l)},T=`methodCaller<(${u.map(_=>_.name).join(", ")}) => ${m.name}>`;return Kn(ke(T,$))},aa=n=>{n>4&&(ye.get(n).refcount+=1)},oa=n=>{var a=Oe.toValue(n);ar(a),Lt(n)},ia=(n,a)=>{n=zt(n,"_emval_take_value");var c=n.readValueFromPointer(a);return Oe.toHandle(c)},sa=()=>{ve("")},mr=(n,a,c)=>J.copyWithin(n,a,a+c),ca=()=>2147483648,ua=n=>{var a=U.buffer,c=(n-a.byteLength+65535)/65536;try{return U.grow(c),ae(),1}catch{}},la=n=>{var a=J.length;n>>>=0;var c=ca();if(n>c)return!1;for(var u=(_,O)=>_+(O-_%O)%O,m=1;m<=4;m*=2){var g=a*(1+.2/m);g=Math.min(g,n+100663296);var $=Math.min(c,u(Math.max(n,g),65536)),T=ua($);if(T)return!0}return!1},Bt={},da=()=>P||"./this.program",vt=()=>{if(!vt.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:da()};for(var c in Bt)Bt[c]===void 0?delete a[c]:a[c]=Bt[c];var u=[];for(var c in a)u.push(`${c}=${a[c]}`);vt.strings=u}return vt.strings},fa=(n,a)=>{for(var c=0;c<n.length;++c)G[a++>>0]=n.charCodeAt(c);G[a>>0]=0},ha=(n,a)=>{var c=0;return vt().forEach((u,m)=>{var g=a+c;I[n+m*4>>2]=g,fa(u,g),c+=u.length+1}),0},pa=(n,a)=>{var c=vt();I[n>>2]=c.length;var u=0;return c.forEach(m=>u+=m.length+1),I[a>>2]=u,0},ma=n=>n,Nt=n=>n%4===0&&(n%100!==0||n%400===0),va=(n,a)=>{for(var c=0,u=0;u<=a;c+=n[u++]);return c},Br=[31,29,31,30,31,30,31,31,30,31,30,31],Nr=[31,28,31,30,31,30,31,31,30,31,30,31],ga=(n,a)=>{for(var c=new Date(n.getTime());a>0;){var u=Nt(c.getFullYear()),m=c.getMonth(),g=(u?Br:Nr)[m];if(a>g-c.getDate())a-=g-c.getDate()+1,c.setDate(1),m<11?c.setMonth(m+1):(c.setMonth(0),c.setFullYear(c.getFullYear()+1));else return c.setDate(c.getDate()+a),c}return c};function ya(n,a,c){var u=Lr(n)+1,m=new Array(u);return Wr(n,m,0,m.length),m}var ba=(n,a)=>{G.set(n,a)},wa=(n,a,c,u)=>{var m=I[u+40>>2],g={tm_sec:F[u>>2],tm_min:F[u+4>>2],tm_hour:F[u+8>>2],tm_mday:F[u+12>>2],tm_mon:F[u+16>>2],tm_year:F[u+20>>2],tm_wday:F[u+24>>2],tm_yday:F[u+28>>2],tm_isdst:F[u+32>>2],tm_gmtoff:F[u+36>>2],tm_zone:m?pt(m):""},$=pt(c),T={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var _ in T)$=$.replace(new RegExp(_,"g"),T[_]);var O=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=["January","February","March","April","May","June","July","August","September","October","November","December"];function e(f,y,E){for(var x=typeof f=="number"?f.toString():f||"";x.length<y;)x=E[0]+x;return x}function t(f,y){return e(f,y,"0")}function s(f,y){function E(k){return k<0?-1:k>0?1:0}var x;return(x=E(f.getFullYear()-y.getFullYear()))===0&&(x=E(f.getMonth()-y.getMonth()))===0&&(x=E(f.getDate()-y.getDate())),x}function l(f){switch(f.getDay()){case 0:return new Date(f.getFullYear()-1,11,29);case 1:return f;case 2:return new Date(f.getFullYear(),0,3);case 3:return new Date(f.getFullYear(),0,2);case 4:return new Date(f.getFullYear(),0,1);case 5:return new Date(f.getFullYear()-1,11,31);case 6:return new Date(f.getFullYear()-1,11,30)}}function p(f){var y=ga(new Date(f.tm_year+1900,0,1),f.tm_yday),E=new Date(y.getFullYear(),0,4),x=new Date(y.getFullYear()+1,0,4),k=l(E),L=l(x);return s(k,y)<=0?s(L,y)<=0?y.getFullYear()+1:y.getFullYear():y.getFullYear()-1}var v={"%a":f=>O[f.tm_wday].substring(0,3),"%A":f=>O[f.tm_wday],"%b":f=>M[f.tm_mon].substring(0,3),"%B":f=>M[f.tm_mon],"%C":f=>{var y=f.tm_year+1900;return t(y/100|0,2)},"%d":f=>t(f.tm_mday,2),"%e":f=>e(f.tm_mday,2," "),"%g":f=>p(f).toString().substring(2),"%G":f=>p(f),"%H":f=>t(f.tm_hour,2),"%I":f=>{var y=f.tm_hour;return y==0?y=12:y>12&&(y-=12),t(y,2)},"%j":f=>t(f.tm_mday+va(Nt(f.tm_year+1900)?Br:Nr,f.tm_mon-1),3),"%m":f=>t(f.tm_mon+1,2),"%M":f=>t(f.tm_min,2),"%n":()=>`
`,"%p":f=>f.tm_hour>=0&&f.tm_hour<12?"AM":"PM","%S":f=>t(f.tm_sec,2),"%t":()=>"	","%u":f=>f.tm_wday||7,"%U":f=>{var y=f.tm_yday+7-f.tm_wday;return t(Math.floor(y/7),2)},"%V":f=>{var y=Math.floor((f.tm_yday+7-(f.tm_wday+6)%7)/7);if((f.tm_wday+371-f.tm_yday-2)%7<=2&&y++,y){if(y==53){var E=(f.tm_wday+371-f.tm_yday)%7;E!=4&&(E!=3||!Nt(f.tm_year))&&(y=1)}}else{y=52;var x=(f.tm_wday+7-f.tm_yday-1)%7;(x==4||x==5&&Nt(f.tm_year%400-1))&&y++}return t(y,2)},"%w":f=>f.tm_wday,"%W":f=>{var y=f.tm_yday+7-(f.tm_wday+6)%7;return t(Math.floor(y/7),2)},"%y":f=>(f.tm_year+1900).toString().substring(2),"%Y":f=>f.tm_year+1900,"%z":f=>{var y=f.tm_gmtoff,E=y>=0;return y=Math.abs(y)/60,y=y/60*100+y%60,(E?"+":"-")+("0000"+y).slice(-4)},"%Z":f=>f.tm_zone,"%%":()=>"%"};$=$.replace(/%%/g,"\0\0");for(var _ in v)$.includes(_)&&($=$.replace(new RegExp(_,"g"),v[_](g)));$=$.replace(/\0\0/g,"%");var b=ya($);return b.length>a?0:(ba(b,n),b.length-1)},vr=(n,a,c,u,m)=>wa(n,a,c,u);Pr=o.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},wn(),He=o.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},Sn(),sr(),Rt(),Dr=o.UnboundTypeError=jn(Error,"UnboundTypeError"),Ee(),Mn();var $a={s:Cr,u:Tr,b:nr,g:oe,q:ie,J:Ot,f:At,V:gn,d:vn,da:yn,Q:bn,_:_r,ca:kr,ba:te,w:Dn,Y:kn,x:Rn,h:Fn,L:pr,M:In,t:Fe,o:Ir,K:zn,C:Jn,A:mt,ea:Yn,$:zr,R:Xn,ha:Lt,fa:Zn,Z:na,N:aa,O:oa,aa:ia,B:sa,X:mr,W:la,T:ha,U:pa,E:_a,D:Qr,F:Sa,n:Ea,a:We,e:Kr,m:Xr,k:tn,H:Ta,v:nn,G:Pa,z:Aa,P:ja,l:en,j:Zr,c:K,p:br,I:Ca,r:Oa,i:rn,y:xa,ga:ma,S:vr},Y=mn(),Ie=o._free=n=>(Ie=o._free=Y.ka)(n),gr=o._malloc=n=>(gr=o._malloc=Y.la)(n),qr=n=>(qr=Y.na)(n),Q=(n,a)=>(Q=Y.oa)(n,a),gt=n=>(gt=Y.pa)(n),re=()=>(re=Y.qa)(),ne=n=>(ne=Y.ra)(n),Gr=n=>(Gr=Y.sa)(n),Jr=n=>(Jr=Y.ta)(n),Yr=(n,a,c)=>(Yr=Y.ua)(n,a,c),Z=n=>(Z=Y.va)(n);o.dynCall_viijii=(n,a,c,u,m,g,$)=>(o.dynCall_viijii=Y.wa)(n,a,c,u,m,g,$);var yr=o.dynCall_jiiii=(n,a,c,u,m)=>(yr=o.dynCall_jiiii=Y.xa)(n,a,c,u,m);o.dynCall_iiiiij=(n,a,c,u,m,g,$)=>(o.dynCall_iiiiij=Y.ya)(n,a,c,u,m,g,$),o.dynCall_iiiiijj=(n,a,c,u,m,g,$,T,_)=>(o.dynCall_iiiiijj=Y.za)(n,a,c,u,m,g,$,T,_),o.dynCall_iiiiiijj=(n,a,c,u,m,g,$,T,_,O)=>(o.dynCall_iiiiiijj=Y.Aa)(n,a,c,u,m,g,$,T,_,O);function We(n,a){var c=re();try{return ee(n)(a)}catch(u){if(ne(c),u!==u+0)throw u;Q(1,0)}}function br(n,a,c,u){var m=re();try{ee(n)(a,c,u)}catch(g){if(ne(m),g!==g+0)throw g;Q(1,0)}}function K(n,a,c){var u=re();try{ee(n)(a,c)}catch(m){if(ne(u),m!==m+0)throw m;Q(1,0)}}function Xr(n,a,c,u){var m=re();try{return ee(n)(a,c,u)}catch(g){if(ne(m),g!==g+0)throw g;Q(1,0)}}function Qr(n,a,c,u,m){var g=re();try{return ee(n)(a,c,u,m)}catch($){if(ne(g),$!==$+0)throw $;Q(1,0)}}function Zr(n,a){var c=re();try{ee(n)(a)}catch(u){if(ne(c),u!==u+0)throw u;Q(1,0)}}function Kr(n,a,c){var u=re();try{return ee(n)(a,c)}catch(m){if(ne(u),m!==m+0)throw m;Q(1,0)}}function en(n){var a=re();try{ee(n)()}catch(c){if(ne(a),c!==c+0)throw c;Q(1,0)}}function tn(n,a,c,u,m){var g=re();try{return ee(n)(a,c,u,m)}catch($){if(ne(g),$!==$+0)throw $;Q(1,0)}}function rn(n,a,c,u,m,g,$,T,_,O,M){var e=re();try{ee(n)(a,c,u,m,g,$,T,_,O,M)}catch(t){if(ne(e),t!==t+0)throw t;Q(1,0)}}function nn(n,a,c,u,m,g,$){var T=re();try{return ee(n)(a,c,u,m,g,$)}catch(_){if(ne(T),_!==_+0)throw _;Q(1,0)}}function Ca(n,a,c,u,m){var g=re();try{ee(n)(a,c,u,m)}catch($){if(ne(g),$!==$+0)throw $;Q(1,0)}}function Ta(n,a,c,u,m,g){var $=re();try{return ee(n)(a,c,u,m,g)}catch(T){if(ne($),T!==T+0)throw T;Q(1,0)}}function Pa(n,a,c,u,m,g,$,T){var _=re();try{return ee(n)(a,c,u,m,g,$,T)}catch(O){if(ne(_),O!==O+0)throw O;Q(1,0)}}function Sa(n,a,c,u){var m=re();try{return ee(n)(a,c,u)}catch(g){if(ne(m),g!==g+0)throw g;Q(1,0)}}function _a(n,a,c,u){var m=re();try{return ee(n)(a,c,u)}catch(g){if(ne(m),g!==g+0)throw g;Q(1,0)}}function Ea(n){var a=re();try{return ee(n)()}catch(c){if(ne(a),c!==c+0)throw c;Q(1,0)}}function Oa(n,a,c,u,m,g,$,T){var _=re();try{ee(n)(a,c,u,m,g,$,T)}catch(O){if(ne(_),O!==O+0)throw O;Q(1,0)}}function Aa(n,a,c,u,m,g,$,T,_,O,M,e){var t=re();try{return ee(n)(a,c,u,m,g,$,T,_,O,M,e)}catch(s){if(ne(t),s!==s+0)throw s;Q(1,0)}}function xa(n,a,c,u,m,g,$,T,_,O,M,e,t,s,l,p){var v=re();try{ee(n)(a,c,u,m,g,$,T,_,O,M,e,t,s,l,p)}catch(b){if(ne(v),b!==b+0)throw b;Q(1,0)}}function ja(n,a,c,u,m){var g=re();try{return yr(n,a,c,u,m)}catch($){if(ne(g),$!==$+0)throw $;Q(1,0)}}var qt;Ne=function n(){qt||an(),qt||(Ne=n)};function an(){if(Se>0||(q(),Se>0))return;function n(){qt||(qt=!0,o.calledRun=!0,!N&&(wt(),h(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),$t()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),n()},1)):n()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return an(),i.ready}})();function Ai(r){return Ra(Fa,r)}async function xi(r,i){return Ei(Fa,r,i)}async function ji(r,i){return Oi(Fa,r,i)}var $r;class Ja extends EventTarget{constructor(i={}){var o;super(),ni(this,$r,void 0);try{const h=(o=i==null?void 0:i.formats)==null?void 0:o.filter(d=>d!=="unknown");if((h==null?void 0:h.length)===0)throw new TypeError("Hint option provided, but is empty.");h==null||h.forEach(d=>{if(!dn.has(d))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${d}' is not a valid enum value of type BarcodeFormat.`)}),ai(this,$r,h??[]),Ai().then(d=>{this.dispatchEvent(new CustomEvent("load",{detail:d}))}).catch(d=>{this.dispatchEvent(new CustomEvent("error",{detail:d}))})}catch(h){throw Ba(h,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return oi.filter(i=>i!=="unknown")}async detect(i){try{const o=await fi(i);if(o===null)return[];let h;try{po(o)?h=await xi(o,{tryHarder:!0,formats:Va(this,$r).map(d=>dn.get(d))}):h=await ji(o,{tryHarder:!0,formats:Va(this,$r).map(d=>dn.get(d))})}catch(d){throw console.error(d),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return h.map(d=>{const{topLeft:{x:w,y:P},topRight:{x:j,y:C},bottomLeft:{x:S,y:A},bottomRight:{x:D,y:W}}=d.position,R=Math.min(w,j,S,D),U=Math.min(P,C,A,W),N=Math.max(w,j,S,D),G=Math.max(P,C,A,W);return{boundingBox:new DOMRectReadOnly(R,U,N-R,G-U),rawValue:d.text,format:ii(d.format),cornerPoints:[{x:w,y:P},{x:j,y:C},{x:D,y:W},{x:S,y:A}]}})}catch(o){throw Ba(o,"Failed to execute 'detect' on 'BarcodeDetector'")}}}$r=new WeakMap;const yo=(r,i,o="error")=>{let h,d;const w=new Promise((P,j)=>{h=P,d=j,r.addEventListener(i,h),r.addEventListener(o,d)});return w.finally(()=>{r.removeEventListener(i,h),r.removeEventListener(o,d)}),w},Ya=r=>new Promise(i=>setTimeout(i,r));class bo extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Di extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class Mi extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let wo;async function ki(r){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new Ja({formats:r});const i=await window.BarcodeDetector.getSupportedFormats(),o=r.filter(h=>!i.includes(h));return o.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(o)}. Will use polyfill.`),new Ja({formats:r})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:r}))}async function $o(r){wo=await ki(r)}const Ri=async(r,{detectHandler:i,locateHandler:o,minDelay:h,formats:d})=>{console.debug("[vue-qrcode-reader] start scanning"),await $o(d);const w=P=>async j=>{if(r.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:C,contentBefore:S,lastScanHadContent:A}=P;if(j-C<h)window.requestAnimationFrame(w(P));else{const D=await wo.detect(r),W=D.some(N=>!S.includes(N.rawValue));W&&i(D);const R=D.length>0;R&&o(D),!R&&A&&o(D);const U={lastScanned:j,lastScanHadContent:R,contentBefore:W?D.map(N=>N.rawValue):S};window.requestAnimationFrame(w(U))}}};w({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var Co={},Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.compactObject=So;Ce.deprecated=Bi;var Fi=Ce.detectBrowser=Ni;Ce.disableLog=zi;Ce.disableWarnings=Hi;Ce.extractVersion=fn;Ce.filterStats=qi;Ce.log=Vi;Ce.walkStats=pn;Ce.wrapPeerConnectionEvent=Ui;function Ii(r,i,o){return i=Wi(i),i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r}function Wi(r){var i=Li(r,"string");return it(i)==="symbol"?i:String(i)}function Li(r,i){if(it(r)!=="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var h=o.call(r,i||"default");if(it(h)!=="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function it(r){"@babel/helpers - typeof";return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},it(r)}var To=!0,Po=!0;function fn(r,i,o){var h=r.match(i);return h&&h.length>=o&&parseInt(h[o],10)}function Ui(r,i,o){if(r.RTCPeerConnection){var h=r.RTCPeerConnection.prototype,d=h.addEventListener;h.addEventListener=function(P,j){if(P!==i)return d.apply(this,arguments);var C=function(S){var A=o(S);A&&(j.handleEvent?j.handleEvent(A):j(A))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(j,C),d.apply(this,[P,C])};var w=h.removeEventListener;h.removeEventListener=function(P,j){if(P!==i||!this._eventMap||!this._eventMap[i])return w.apply(this,arguments);if(!this._eventMap[i].has(j))return w.apply(this,arguments);var C=this._eventMap[i].get(j);return this._eventMap[i].delete(j),this._eventMap[i].size===0&&delete this._eventMap[i],Object.keys(this._eventMap).length===0&&delete this._eventMap,w.apply(this,[P,C])},Object.defineProperty(h,"on"+i,{get:function(){return this["_on"+i]},set:function(P){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),P&&this.addEventListener(i,this["_on"+i]=P)},enumerable:!0,configurable:!0})}}function zi(r){return typeof r!="boolean"?new Error("Argument type: "+it(r)+". Please use a boolean."):(To=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function Hi(r){return typeof r!="boolean"?new Error("Argument type: "+it(r)+". Please use a boolean."):(Po=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function Vi(){if((typeof window>"u"?"undefined":it(window))==="object"){if(To)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Bi(r,i){Po&&console.warn(r+" is deprecated, please use "+i+" instead.")}function Ni(r){var i={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return i.browser="Not a browser.",i;var o=r.navigator;if(o.mozGetUserMedia)i.browser="firefox",i.version=fn(o.userAgent,/Firefox\/(\d+)\./,1);else if(o.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)i.browser="chrome",i.version=fn(o.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.RTCPeerConnection&&o.userAgent.match(/AppleWebKit\/(\d+)\./))i.browser="safari",i.version=fn(o.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return i.browser="Not a supported browser.",i;return i}function Xa(r){return Object.prototype.toString.call(r)==="[object Object]"}function So(r){return Xa(r)?Object.keys(r).reduce(function(i,o){var h=Xa(r[o]),d=h?So(r[o]):r[o],w=h&&!Object.keys(d).length;return d===void 0||w?i:Object.assign(i,Ii({},o,d))},{}):r}function pn(r,i,o){!i||o.has(i.id)||(o.set(i.id,i),Object.keys(i).forEach(function(h){h.endsWith("Id")?pn(r,r.get(i[h]),o):h.endsWith("Ids")&&i[h].forEach(function(d){pn(r,r.get(d),o)})}))}function qi(r,i,o){var h=o?"outbound-rtp":"inbound-rtp",d=new Map;if(i===null)return d;var w=[];return r.forEach(function(P){P.type==="track"&&P.trackIdentifier===i.id&&w.push(P)}),w.forEach(function(P){r.forEach(function(j){j.type===h&&j.trackId===P.id&&pn(r,j,d)})}),d}Object.defineProperty(Co,"__esModule",{value:!0});var Gi=Co.shimGetUserMedia=Xi,Ji=Yi(Ce);function _o(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(_o=function(h){return h?o:i})(r)}function Yi(r,i){if(r&&r.__esModule)return r;if(r===null||ot(r)!=="object"&&typeof r!="function")return{default:r};var o=_o(i);if(o&&o.has(r))return o.get(r);var h={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in r)if(w!=="default"&&Object.prototype.hasOwnProperty.call(r,w)){var P=d?Object.getOwnPropertyDescriptor(r,w):null;P&&(P.get||P.set)?Object.defineProperty(h,w,P):h[w]=r[w]}return h.default=r,o&&o.set(r,h),h}function ot(r){"@babel/helpers - typeof";return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ot(r)}var Qa=Ji.log;function Xi(r,i){var o=r&&r.navigator;if(o.mediaDevices){var h=function(C){if(ot(C)!=="object"||C.mandatory||C.optional)return C;var S={};return Object.keys(C).forEach(function(A){if(!(A==="require"||A==="advanced"||A==="mediaSource")){var D=ot(C[A])==="object"?C[A]:{ideal:C[A]};D.exact!==void 0&&typeof D.exact=="number"&&(D.min=D.max=D.exact);var W=function(U,N){return U?U+N.charAt(0).toUpperCase()+N.slice(1):N==="deviceId"?"sourceId":N};if(D.ideal!==void 0){S.optional=S.optional||[];var R={};typeof D.ideal=="number"?(R[W("min",A)]=D.ideal,S.optional.push(R),R={},R[W("max",A)]=D.ideal,S.optional.push(R)):(R[W("",A)]=D.ideal,S.optional.push(R))}D.exact!==void 0&&typeof D.exact!="number"?(S.mandatory=S.mandatory||{},S.mandatory[W("",A)]=D.exact):["min","max"].forEach(function(U){D[U]!==void 0&&(S.mandatory=S.mandatory||{},S.mandatory[W(U,A)]=D[U])})}}),C.advanced&&(S.optional=(S.optional||[]).concat(C.advanced)),S},d=function(C,S){if(i.version>=61)return S(C);if(C=JSON.parse(JSON.stringify(C)),C&&ot(C.audio)==="object"){var A=function(U,N,G){N in U&&!(G in U)&&(U[G]=U[N],delete U[N])};C=JSON.parse(JSON.stringify(C)),A(C.audio,"autoGainControl","googAutoGainControl"),A(C.audio,"noiseSuppression","googNoiseSuppression"),C.audio=h(C.audio)}if(C&&ot(C.video)==="object"){var D=C.video.facingMode;D=D&&(ot(D)==="object"?D:{ideal:D});var W=i.version<66;if(D&&(D.exact==="user"||D.exact==="environment"||D.ideal==="user"||D.ideal==="environment")&&!(o.mediaDevices.getSupportedConstraints&&o.mediaDevices.getSupportedConstraints().facingMode&&!W)){delete C.video.facingMode;var R;if(D.exact==="environment"||D.ideal==="environment"?R=["back","rear"]:(D.exact==="user"||D.ideal==="user")&&(R=["front"]),R)return o.mediaDevices.enumerateDevices().then(function(U){U=U.filter(function(G){return G.kind==="videoinput"});var N=U.find(function(G){return R.some(function(J){return G.label.toLowerCase().includes(J)})});return!N&&U.length&&R.includes("back")&&(N=U[U.length-1]),N&&(C.video.deviceId=D.exact?{exact:N.deviceId}:{ideal:N.deviceId}),C.video=h(C.video),Qa("chrome: "+JSON.stringify(C)),S(C)})}C.video=h(C.video)}return Qa("chrome: "+JSON.stringify(C)),S(C)},w=function(C){return i.version>=64?C:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[C.name]||C.name,message:C.message,constraint:C.constraint||C.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},P=function(C,S,A){d(C,function(D){o.webkitGetUserMedia(D,S,function(W){A&&A(w(W))})})};if(o.getUserMedia=P.bind(o),o.mediaDevices.getUserMedia){var j=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(C){return d(C,function(S){return j(S).then(function(A){if(S.audio&&!A.getAudioTracks().length||S.video&&!A.getVideoTracks().length)throw A.getTracks().forEach(function(D){D.stop()}),new DOMException("","NotFoundError");return A},function(A){return Promise.reject(w(A))})})}}}}var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});var Qi=Eo.shimGetUserMedia=es,Zi=Ki(Ce);function Oo(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(Oo=function(h){return h?o:i})(r)}function Ki(r,i){if(r&&r.__esModule)return r;if(r===null||Gt(r)!=="object"&&typeof r!="function")return{default:r};var o=Oo(i);if(o&&o.has(r))return o.get(r);var h={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in r)if(w!=="default"&&Object.prototype.hasOwnProperty.call(r,w)){var P=d?Object.getOwnPropertyDescriptor(r,w):null;P&&(P.get||P.set)?Object.defineProperty(h,w,P):h[w]=r[w]}return h.default=r,o&&o.set(r,h),h}function Gt(r){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Gt(r)}function es(r,i){var o=r&&r.navigator,h=r&&r.MediaStreamTrack;if(o.getUserMedia=function(C,S,A){Zi.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(C).then(S,A)},!(i.version>55&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){var d=function(C,S,A){S in C&&!(A in C)&&(C[A]=C[S],delete C[S])},w=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(C){return Gt(C)==="object"&&Gt(C.audio)==="object"&&(C=JSON.parse(JSON.stringify(C)),d(C.audio,"autoGainControl","mozAutoGainControl"),d(C.audio,"noiseSuppression","mozNoiseSuppression")),w(C)},h&&h.prototype.getSettings){var P=h.prototype.getSettings;h.prototype.getSettings=function(){var C=P.apply(this,arguments);return d(C,"mozAutoGainControl","autoGainControl"),d(C,"mozNoiseSuppression","noiseSuppression"),C}}if(h&&h.prototype.applyConstraints){var j=h.prototype.applyConstraints;h.prototype.applyConstraints=function(C){return this.kind==="audio"&&Gt(C)==="object"&&(C=JSON.parse(JSON.stringify(C)),d(C,"autoGainControl","mozAutoGainControl"),d(C,"noiseSuppression","mozNoiseSuppression")),j.apply(this,[C])}}}}var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.shimAudioContext=ls;Be.shimCallbacksAPI=os;Be.shimConstraints=jo;Be.shimCreateOfferLegacy=us;var ts=Be.shimGetUserMedia=is;Be.shimLocalStreamsAPI=ns;Be.shimRTCIceServerUrls=ss;Be.shimRemoteStreamsAPI=as;Be.shimTrackEventTransceiver=cs;var Ao=rs(Ce);function xo(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,o=new WeakMap;return(xo=function(h){return h?o:i})(r)}function rs(r,i){if(r&&r.__esModule)return r;if(r===null||st(r)!=="object"&&typeof r!="function")return{default:r};var o=xo(i);if(o&&o.has(r))return o.get(r);var h={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in r)if(w!=="default"&&Object.prototype.hasOwnProperty.call(r,w)){var P=d?Object.getOwnPropertyDescriptor(r,w):null;P&&(P.get||P.set)?Object.defineProperty(h,w,P):h[w]=r[w]}return h.default=r,o&&o.set(r,h),h}function st(r){"@babel/helpers - typeof";return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},st(r)}function ns(r){if(!(st(r)!=="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){var i=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(o){var h=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(function(d){return i.call(h,d,o)}),o.getVideoTracks().forEach(function(d){return i.call(h,d,o)})},r.RTCPeerConnection.prototype.addTrack=function(o){for(var h=this,d=arguments.length,w=new Array(d>1?d-1:0),P=1;P<d;P++)w[P-1]=arguments[P];return w&&w.forEach(function(j){h._localStreams?h._localStreams.includes(j)||h._localStreams.push(j):h._localStreams=[j]}),i.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(o){var h=this;this._localStreams||(this._localStreams=[]);var d=this._localStreams.indexOf(o);if(d!==-1){this._localStreams.splice(d,1);var w=o.getTracks();this.getSenders().forEach(function(P){w.includes(P.track)&&h.removeTrack(P)})}})}}function as(r){if(!(st(r)!=="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(o){var h=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=function(d){d.streams.forEach(function(w){if(h._remoteStreams||(h._remoteStreams=[]),!h._remoteStreams.includes(w)){h._remoteStreams.push(w);var P=new Event("addstream");P.stream=w,h.dispatchEvent(P)}})})}});var i=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){var o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(h){h.streams.forEach(function(d){if(o._remoteStreams||(o._remoteStreams=[]),!(o._remoteStreams.indexOf(d)>=0)){o._remoteStreams.push(d);var w=new Event("addstream");w.stream=d,o.dispatchEvent(w)}})}),i.apply(o,arguments)}}}function os(r){if(!(st(r)!=="object"||!r.RTCPeerConnection)){var i=r.RTCPeerConnection.prototype,o=i.createOffer,h=i.createAnswer,d=i.setLocalDescription,w=i.setRemoteDescription,P=i.addIceCandidate;i.createOffer=function(C,S){var A=arguments.length>=2?arguments[2]:arguments[0],D=o.apply(this,[A]);return S?(D.then(C,S),Promise.resolve()):D},i.createAnswer=function(C,S){var A=arguments.length>=2?arguments[2]:arguments[0],D=h.apply(this,[A]);return S?(D.then(C,S),Promise.resolve()):D};var j=function(C,S,A){var D=d.apply(this,[C]);return A?(D.then(S,A),Promise.resolve()):D};i.setLocalDescription=j,j=function(C,S,A){var D=w.apply(this,[C]);return A?(D.then(S,A),Promise.resolve()):D},i.setRemoteDescription=j,j=function(C,S,A){var D=P.apply(this,[C]);return A?(D.then(S,A),Promise.resolve()):D},i.addIceCandidate=j}}function is(r){var i=r&&r.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){var o=i.mediaDevices,h=o.getUserMedia.bind(o);i.mediaDevices.getUserMedia=function(d){return h(jo(d))}}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=(function(d,w,P){i.mediaDevices.getUserMedia(d).then(w,P)}).bind(i))}function jo(r){return r&&r.video!==void 0?Object.assign({},r,{video:Ao.compactObject(r.video)}):r}function ss(r){if(r.RTCPeerConnection){var i=r.RTCPeerConnection;r.RTCPeerConnection=function(o,h){if(o&&o.iceServers){for(var d=[],w=0;w<o.iceServers.length;w++){var P=o.iceServers[w];P.urls===void 0&&P.url?(Ao.deprecated("RTCIceServer.url","RTCIceServer.urls"),P=JSON.parse(JSON.stringify(P)),P.urls=P.url,delete P.url,d.push(P)):d.push(o.iceServers[w])}o.iceServers=d}return new i(o,h)},r.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return i.generateCertificate}})}}function cs(r){st(r)==="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function us(r){var i=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(o){if(o){typeof o.offerToReceiveAudio<"u"&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);var h=this.getTransceivers().find(function(w){return w.receiver.track.kind==="audio"});o.offerToReceiveAudio===!1&&h?h.direction==="sendrecv"?h.setDirection?h.setDirection("sendonly"):h.direction="sendonly":h.direction==="recvonly"&&(h.setDirection?h.setDirection("inactive"):h.direction="inactive"):o.offerToReceiveAudio===!0&&!h&&this.addTransceiver("audio",{direction:"recvonly"}),typeof o.offerToReceiveVideo<"u"&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo);var d=this.getTransceivers().find(function(w){return w.receiver.track.kind==="video"});o.offerToReceiveVideo===!1&&d?d.direction==="sendrecv"?d.setDirection?d.setDirection("sendonly"):d.direction="sendonly":d.direction==="recvonly"&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive"):o.offerToReceiveVideo===!0&&!d&&this.addTransceiver("video",{direction:"recvonly"})}return i.apply(this,arguments)}}function ls(r){st(r)!=="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const ds=r=>{let i=!1,o;return(...h)=>(i||(o=r(h),i=!0),o)};function Ke(r,i){if(r===!1)throw new Error(i??"assertion failure")}function Za(r){throw new Error("this code should be unreachable")}const fs=ds(()=>{const r=Fi(window);switch(r.browser){case"chrome":Gi(window,r);break;case"firefox":Qi(window,r);break;case"safari":ts(window,r);break;default:throw new bo}});let Jt=Promise.resolve({type:"stop",data:{}});async function Ka(r,i,o){var h,d,w;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(i)),window.isSecureContext!==!0)throw new Di;if(((h=navigator==null?void 0:navigator.mediaDevices)==null?void 0:h.getUserMedia)===void 0)throw new bo;fs(),console.debug("[vue-qrcode-reader] calling getUserMedia");const P=await navigator.mediaDevices.getUserMedia({audio:!1,video:i});r.srcObject!==void 0?r.srcObject=P:r.mozSrcObject!==void 0?r.mozSrcObject=P:window.URL.createObjectURL?r.src=window.URL.createObjectURL(P):window.webkitURL?r.src=window.webkitURL.createObjectURL(P):r.src=P.id,r.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([yo(r,"loadeddata"),Ya(6e3).then(()=>{throw new Mi})]),console.debug("[vue-qrcode-reader] video element loaded"),await Ya(500);const[j]=P.getVideoTracks(),C=(w=(d=j==null?void 0:j.getCapabilities)==null?void 0:d.call(j))!=null?w:{};let S=!1;return o&&C.torch&&(await j.applyConstraints({advanced:[{torch:!0}]}),S=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:r,stream:P,capabilities:C,constraints:i,isTorchOn:S}}}async function hs(r,{constraints:i,torch:o,restart:h=!1}){Jt=Jt.then(w=>{if(w.type==="start"){const{data:{videoEl:P,stream:j,constraints:C,isTorchOn:S}}=w;return!h&&r===P&&i===C&&o===S?w:Do(P,j,S).then(()=>Ka(r,i,o))}else if(w.type==="stop"||w.type==="failed")return Ka(r,i,o);Za()}).catch(w=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${w}"`),{type:"failed",error:w}));const d=await Jt;if(d.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(d.type==="failed")throw d.error;if(d.type==="start")return d.data.capabilities;Za()}async function Do(r,i,o){console.debug("[vue-qrcode-reader] stopping camera"),r.src="",r.srcObject=null,r.load(),await yo(r,"error");for(const h of i.getTracks())o!=null||await h.applyConstraints({advanced:[{torch:!1}]}),i.removeTrack(h),h.stop();return{type:"stop",data:{}}}async function ln(){if(Jt=Jt.then(r=>{if(r.type==="stop"||r.type==="failed")return r;const{data:{videoEl:i,stream:o,isTorchOn:h}}=r;return Do(i,o,h)}),(await Jt).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const Js=Jo({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(r,{emit:i}){const o=r,h=i,d=bt(o.constraints),w=bt(o.formats);wr(()=>o.constraints,(H,F)=>{JSON.stringify(H)!==JSON.stringify(F)&&(d.value=H)},{deep:!0}),wr(()=>o.formats,(H,F)=>{JSON.stringify(H)!==JSON.stringify(F)&&(w.value=H)},{deep:!0});const P=bt(),j=bt(),C=bt(),S=bt(!1),A=bt(!1);Yo(()=>{A.value=!0}),Xo(()=>{ln()});const D=Da(()=>({torch:o.torch,constraints:d.value,shouldStream:A.value&&!o.paused}));wr(D,async H=>{const F=C.value;Ke(F!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const I=P.value;Ke(I!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const xe=I.getContext("2d");if(Ke(xe!==null,"if cavnas is defined, canvas 2d context should also be non-null"),H.shouldStream){ln(),S.value=!1;try{const ce=await hs(F,H);A.value?(S.value=!0,h("camera-on",ce)):await ln()}catch(ce){h("error",ce)}}else I.width=F.videoWidth,I.height=F.videoHeight,xe.drawImage(F,0,0,F.videoWidth,F.videoHeight),ln(),S.value=!1,h("camera-off")},{deep:!0}),wr(w,async H=>{A.value&&await $o(H)});const W=Da(()=>D.value.shouldStream&&S.value);wr(W,H=>{if(H){Ke(P.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),R(P.value),Ke(j.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),R(j.value);const F=()=>o.track===void 0?500:40;Ke(C.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),Ri(C.value,{detectHandler:I=>h("detect",I),formats:w.value,locateHandler:U,minDelay:F()})}});const R=H=>{const F=H.getContext("2d");Ke(F!==null,"canvas 2d context should always be non-null"),F.clearRect(0,0,H.width,H.height)},U=H=>{const F=j.value;Ke(F!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const I=C.value;if(Ke(I!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),H.length===0||o.track===void 0)R(F);else{const xe=I.offsetWidth,ce=I.offsetHeight,ae=I.videoWidth,Te=I.videoHeight,je=Math.max(xe/ae,ce/Te),Pe=ae*je,q=Te*je,wt=Pe/ae,$t=q/Te,Ct=(xe-Pe)/2,Tt=(ce-q)/2,et=({x:Ue,y:ve})=>({x:Math.floor(Ue*wt),y:Math.floor(ve*$t)}),Se=({x:Ue,y:ve})=>({x:Math.floor(Ue+Ct),y:Math.floor(ve+Tt)}),Ne=H.map(Ue=>{const{boundingBox:ve,cornerPoints:Zt}=Ue,{x:Pt,y:me}=Se(et({x:ve.x,y:ve.y})),{x:ze,y:Kt}=et({x:ve.width,y:ve.height});return{...Ue,cornerPoints:Zt.map(St=>Se(et(St))),boundingBox:DOMRectReadOnly.fromRect({x:Pt,y:me,width:ze,height:Kt})}});F.width=I.offsetWidth,F.height=I.offsetHeight;const Qt=F.getContext("2d");o.track(Ne,Qt)}},N={width:"100%",height:"100%",position:"relative","z-index":"0"},G={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},J={width:"100%",height:"100%","object-fit":"cover"},Le=Da(()=>W.value?J:{...J,visibility:"hidden",position:"absolute"});return(H,F)=>(Qo(),Zo("div",{style:N},[un("video",{ref_key:"videoRef",ref:C,style:Ko(Le.value),autoplay:"",muted:"",playsinline:""},null,4),ei(un("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:P,style:J},null,512),[[ti,!W.value]]),un("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:j,style:G},null,512),un("div",{style:G},[ri(H.$slots,"default")])]))}});var Mo=r=>{throw TypeError(r)},ko=(r,i,o)=>i.has(r)||Mo("Cannot "+o),ps=(r,i,o)=>(ko(r,i,"read from private field"),o?o.call(r):i.get(r)),ms=(r,i,o)=>i.has(r)?Mo("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(r):i.set(r,o),vs=(r,i,o,h)=>(ko(r,i,"write to private field"),i.set(r,o),o);const eo=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function gs(r){return r.join("|")}function ys(r){const i=to(r);let o=0,h=eo.length-1;for(;o<=h;){const d=Math.floor((o+h)/2),w=eo[d],P=to(w);if(P===i)return w;P<i?o=d+1:h=d-1}return"None"}function to(r){return r.toLowerCase().replace(/_-\[\]/g,"")}function bs(r,i){return r.Binarizer[i]}function ws(r,i){return r.CharacterSet[i]}const $s=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Cs(r){return $s[r.value]}function Ts(r,i){return r.EanAddOnSymbol[i]}function Ps(r,i){return r.TextMode[i]}const Xt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Ro(r,i){return{...i,formats:gs(i.formats),binarizer:bs(r,i.binarizer),eanAddOnSymbol:Ts(r,i.eanAddOnSymbol),textMode:Ps(r,i.textMode),characterSet:ws(r,i.characterSet)}}function Fo(r){return{...r,format:ys(r.format),eccLevel:r.eccLevel,contentType:Cs(r.contentType)}}const Ss={locateFile:(r,i)=>{const o=r.match(/_(.+?)\.wasm$/);return o?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.2.14/dist/${o[1]}/${r}`:i+r}};let ro=new WeakMap;function Ia(r,i){var o;const h=ro.get(r);if(h!=null&&h.modulePromise&&i===void 0)return h.modulePromise;const d=(o=h==null?void 0:h.moduleOverrides)!=null?o:Ss,w=r({...d});return ro.set(r,{moduleOverrides:d,modulePromise:w}),w}async function _s(r,i,o=Xt){const h={...Xt,...o},d=await Ia(r),{size:w}=i,P=new Uint8Array(await i.arrayBuffer()),j=d._malloc(w);d.HEAPU8.set(P,j);const C=d.readBarcodesFromImage(j,w,Ro(d,h));d._free(j);const S=[];for(let A=0;A<C.size();++A)S.push(Fo(C.get(A)));return S}async function Es(r,i,o=Xt){const h={...Xt,...o},d=await Ia(r),{data:w,width:P,height:j,data:{byteLength:C}}=i,S=d._malloc(C);d.HEAPU8.set(w,S);const A=d.readBarcodesFromPixmap(S,P,j,Ro(d,h));d._free(S);const D=[];for(let W=0;W<A.size();++W)D.push(Fo(A.get(W)));return D}({...Xt,formats:[...Xt.formats]});var Wa=(()=>{var r,i=typeof document<"u"&&((r=document.currentScript)==null?void 0:r.tagName.toUpperCase())==="SCRIPT"?document.currentScript.src:void 0;return function(o={}){var h,d=o,w,P,j=new Promise((e,t)=>{w=e,P=t}),C=typeof window=="object",S=typeof Bun<"u",A=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var D=Object.assign({},d),W="./this.program",R="";function U(e){return d.locateFile?d.locateFile(e,R):R+e}var N,G;if(C||A||S){var J;A?R=self.location.href:typeof document<"u"&&((J=document.currentScript)===null||J===void 0?void 0:J.tagName.toUpperCase())==="SCRIPT"&&(R=document.currentScript.src),i&&(R=i),R.startsWith("blob:")?R="":R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1),A&&(G=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),N=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url)))}var Le=d.print||console.log.bind(console),H=d.printErr||console.error.bind(console);Object.assign(d,D),D=null,d.arguments&&d.arguments,d.thisProgram&&(W=d.thisProgram);var F=d.wasmBinary,I,xe=!1,ce,ae,Te,je,Pe,q,wt,$t;function Ct(){var e=I.buffer;d.HEAP8=ce=new Int8Array(e),d.HEAP16=Te=new Int16Array(e),d.HEAPU8=ae=new Uint8Array(e),d.HEAPU16=je=new Uint16Array(e),d.HEAP32=Pe=new Int32Array(e),d.HEAPU32=q=new Uint32Array(e),d.HEAPF32=wt=new Float32Array(e),d.HEAPF64=$t=new Float64Array(e)}var Tt=[],et=[],Se=[];function Ne(){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)ve(d.preRun.shift());nr(Tt)}function Qt(){nr(et)}function Ue(){if(d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;)Pt(d.postRun.shift());nr(Se)}function ve(e){Tt.unshift(e)}function Zt(e){et.unshift(e)}function Pt(e){Se.unshift(e)}var me=0,ze=null;function Kt(e){var t;me++,(t=d.monitorRunDependencies)===null||t===void 0||t.call(d,me)}function St(e){var t;if(me--,(t=d.monitorRunDependencies)===null||t===void 0||t.call(d,me),me==0&&ze){var s=ze;ze=null,s()}}function er(e){var t;(t=d.onAbort)===null||t===void 0||t.call(d,e),e="Aborted("+e+")",H(e),xe=!0,e+=". Build with -sASSERTIONS for more info.";var s=new WebAssembly.RuntimeError(e);throw P(s),s}var mn="data:application/octet-stream;base64,",_t=e=>e.startsWith(mn);function Et(){var e="zxing_reader.wasm";return _t(e)?e:U(e)}var qe;function Cr(e){if(e==qe&&F)return new Uint8Array(F);if(G)return G(e);throw"both async and sync fetching of the wasm failed"}function De(e){return F?Promise.resolve().then(()=>Cr(e)):N(e).then(t=>new Uint8Array(t),()=>Cr(e))}function Tr(e,t,s){return De(e).then(l=>WebAssembly.instantiate(l,t)).then(s,l=>{H(`failed to asynchronously prepare wasm: ${l}`),er(l)})}function tr(e,t,s,l){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!_t(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(p=>{var v=WebAssembly.instantiateStreaming(p,s);return v.then(l,function(b){return H(`wasm streaming compile failed: ${b}`),H("falling back to ArrayBuffer instantiation"),Tr(t,s,l)})}):Tr(t,s,l)}function vn(){return{a:Yr}}function rr(){var e,t=vn();function s(p,v){return Z=p.exports,I=Z.ma,Ct(),Wt=Z.qa,Zt(Z.na),St(),Z}Kt();function l(p){s(p.instance)}if(d.instantiateWasm)try{return d.instantiateWasm(t,s)}catch(p){H(`Module.instantiateWasm callback failed with error: ${p}`),P(p)}return(e=qe)!==null&&e!==void 0||(qe=Et()),tr(F,qe,t,l).catch(P),{}}var nr=e=>{for(;e.length>0;)e.shift()(d)};d.noExitRuntime;var oe=e=>Qr(e),ie=()=>Zr(),Ot=[],At=0,gn=e=>{var t=new ct(e);return t.get_caught()||(t.set_caught(!0),At--),t.set_rethrown(!1),Ot.push(t),en(e),rn(e)},we=0,ar=()=>{K(0,0);var e=Ot.pop();Kr(e.excPtr),we=0};class ct{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){q[this.ptr+4>>2]=t}get_type(){return q[this.ptr+4>>2]}set_destructor(t){q[this.ptr+8>>2]=t}get_destructor(){return q[this.ptr+8>>2]}set_caught(t){t=t?1:0,ce[this.ptr+12]=t}get_caught(){return ce[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,ce[this.ptr+13]=t}get_rethrown(){return ce[this.ptr+13]!=0}init(t,s){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(s)}set_adjusted_ptr(t){q[this.ptr+16>>2]=t}get_adjusted_ptr(){return q[this.ptr+16>>2]}}var tt=e=>{throw we||(we=e),we},Ae=e=>Xr(e),rt=e=>{var t=we;if(!t)return Ae(0),0;var s=new ct(t);s.set_adjusted_ptr(t);var l=s.get_type();if(!l)return Ae(0),t;for(var p of e){if(p===0||p===l)break;var v=s.ptr+16;if(tn(p,l,v))return Ae(p),t}return Ae(l),t},Pr=()=>rt([]),xt=e=>rt([e]),Ge=(e,t)=>rt([e,t]),yn=()=>{var e=Ot.pop();e||er("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(Ot.push(e),e.set_rethrown(!0),e.set_caught(!1),At++),we=t,we},bn=(e,t,s)=>{var l=new ct(e);throw l.init(t,s),we=e,At++,we},wn=()=>At,Sr=()=>{er("")},se={},He=e=>{for(;e.length;){var t=e.pop(),s=e.pop();s(t)}};function z(e){return this.fromWireType(q[e>>2])}var nt={},he={},ge={},_r,jt=e=>{throw new _r(e)},Me=(e,t,s)=>{e.forEach(f=>ge[f]=t);function l(f){var y=s(f);y.length!==e.length&&jt("Mismatched type converter count");for(var E=0;E<e.length;++E)pe(e[E],y[E])}var p=new Array(t.length),v=[],b=0;t.forEach((f,y)=>{he.hasOwnProperty(f)?p[y]=he[f]:(v.push(f),nt.hasOwnProperty(f)||(nt[f]=[]),nt[f].push(()=>{p[y]=he[f],++b,b===v.length&&l(p)}))}),v.length===0&&l(p)},or=e=>{var t=se[e];delete se[e];var s=t.rawConstructor,l=t.rawDestructor,p=t.fields,v=p.map(b=>b.getterReturnType).concat(p.map(b=>b.setterArgumentType));Me([e],v,b=>{var f={};return p.forEach((y,E)=>{var x=y.fieldName,k=b[E],L=y.getter,V=y.getterContext,X=b[E+p.length],fe=y.setter,le=y.setterContext;f[x]={read:de=>k.fromWireType(L(V,de)),write:(de,yt)=>{var be=[];fe(le,de,X.toWireType(be,yt)),He(be)}}}),[{name:t.name,fromWireType:y=>{var E={};for(var x in f)E[x]=f[x].read(y);return l(y),E},toWireType:(y,E)=>{for(var x in f)if(!(x in E))throw new TypeError(`Missing field: "${x}"`);var k=s();for(x in f)f[x].write(k,E[x]);return y!==null&&y.push(l,k),k},argPackAdvance:$e,readValueFromPointer:z,destructorFunction:l}]})},Er=(e,t,s,l,p)=>{},$n=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ir=e},ir,ue=e=>{for(var t="",s=e;ae[s];)t+=ir[ae[s++]];return t},Je,B=e=>{throw new Je(e)};function Cn(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var l=t.name;if(e||B(`type "${l}" must have a positive integer typeid pointer`),he.hasOwnProperty(e)){if(s.ignoreDuplicateRegistrations)return;B(`Cannot register type '${l}' twice`)}if(he[e]=t,delete ge[e],nt.hasOwnProperty(e)){var p=nt[e];delete nt[e],p.forEach(v=>v())}}function pe(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Cn(e,t,s)}var $e=8,ut=(e,t,s,l)=>{t=ue(t),pe(e,{name:t,fromWireType:function(p){return!!p},toWireType:function(p,v){return v?s:l},argPackAdvance:$e,readValueFromPointer:function(p){return this.fromWireType(ae[p])},destructorFunction:null})},Tn=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),sr=e=>{function t(s){return s.$$.ptrType.registeredClass.name}B(t(e)+" instance already deleted")},Ye=!1,Or=e=>{},Pn=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},lt=e=>{e.count.value-=1;var t=e.count.value===0;t&&Pn(e)},Ar=(e,t,s)=>{if(t===s)return e;if(s.baseClass===void 0)return null;var l=Ar(e,t,s.baseClass);return l===null?null:s.downcast(l)},at={},Sn=()=>Object.keys(dt).length,Dt=()=>{var e=[];for(var t in dt)dt.hasOwnProperty(t)&&e.push(dt[t]);return e},ke=[],Mt=()=>{for(;ke.length;){var e=ke.pop();e.$$.deleteScheduled=!1,e.delete()}},Xe,_n=e=>{Xe=e,ke.length&&Xe&&Xe(Mt)},En=()=>{d.getInheritedInstanceCount=Sn,d.getLiveInheritedInstances=Dt,d.flushPendingDeletes=Mt,d.setDelayFunction=_n},dt={},On=(e,t)=>{for(t===void 0&&B("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},cr=(e,t)=>(t=On(e,t),dt[t]),kt=(e,t)=>{(!t.ptrType||!t.ptr)&&jt("makeClassHandle requires ptr and ptrType");var s=!!t.smartPtrType,l=!!t.smartPtr;return s!==l&&jt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ft(Object.create(e,{$$:{value:t,writable:!0}}))};function An(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var s=cr(this.registeredClass,t);if(s!==void 0){if(s.$$.count.value===0)return s.$$.ptr=t,s.$$.smartPtr=e,s.clone();var l=s.clone();return this.destructor(e),l}function p(){return this.isSmartPointer?kt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):kt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var v=this.registeredClass.getActualType(t),b=at[v];if(!b)return p.call(this);var f;this.isConst?f=b.constPointerType:f=b.pointerType;var y=Ar(t,this.registeredClass,f.registeredClass);return y===null?p.call(this):this.isSmartPointer?kt(f.registeredClass.instancePrototype,{ptrType:f,ptr:y,smartPtrType:this,smartPtr:e}):kt(f.registeredClass.instancePrototype,{ptrType:f,ptr:y})}var ft=e=>typeof FinalizationRegistry>"u"?(ft=t=>t,e):(Ye=new FinalizationRegistry(t=>{lt(t.$$)}),ft=t=>{var s=t.$$,l=!!s.smartPtr;if(l){var p={$$:s};Ye.register(t,p,t)}return t},Or=t=>Ye.unregister(t),ft(e)),xr=()=>{Object.assign(Rt.prototype,{isAliasOf(e){if(!(this instanceof Rt)||!(e instanceof Rt))return!1;var t=this.$$.ptrType.registeredClass,s=this.$$.ptr;e.$$=e.$$;for(var l=e.$$.ptrType.registeredClass,p=e.$$.ptr;t.baseClass;)s=t.upcast(s),t=t.baseClass;for(;l.baseClass;)p=l.upcast(p),l=l.baseClass;return t===l&&s===p},clone(){if(this.$$.ptr||sr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=ft(Object.create(Object.getPrototypeOf(this),{$$:{value:Tn(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||sr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&B("Object already scheduled for deletion"),Or(this),lt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||sr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&B("Object already scheduled for deletion"),ke.push(this),ke.length===1&&Xe&&Xe(Mt),this.$$.deleteScheduled=!0,this}})};function Rt(){}var Ve=(e,t)=>Object.defineProperty(t,"name",{value:e}),ur=(e,t,s)=>{if(e[t].overloadTable===void 0){var l=e[t];e[t]=function(){for(var p=arguments.length,v=new Array(p),b=0;b<p;b++)v[b]=arguments[b];return e[t].overloadTable.hasOwnProperty(v.length)||B(`Function '${s}' called with an invalid number of arguments (${v.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[v.length].apply(this,v)},e[t].overloadTable=[],e[t].overloadTable[l.argCount]=l}},lr=(e,t,s)=>{d.hasOwnProperty(e)?((s===void 0||d[e].overloadTable!==void 0&&d[e].overloadTable[s]!==void 0)&&B(`Cannot register public name '${e}' twice`),ur(d,e,e),d.hasOwnProperty(s)&&B(`Cannot register multiple overloads of a function with the same number of arguments (${s})!`),d[e].overloadTable[s]=t):(d[e]=t,s!==void 0&&(d[e].numArguments=s))},Ft=48,jr=57,ee=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Ft&&t<=jr?`_${e}`:e};function xn(e,t,s,l,p,v,b,f){this.name=e,this.constructor=t,this.instancePrototype=s,this.rawDestructor=l,this.baseClass=p,this.getActualType=v,this.upcast=b,this.downcast=f,this.pureVirtualFunctions=[]}var dr=(e,t,s)=>{for(;t!==s;)t.upcast||B(`Expected null or instance of ${s.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function _e(e,t){if(t===null)return this.isReference&&B(`null is not a valid ${this.name}`),0;t.$$||B(`Cannot pass "${pt(t)}" as a ${this.name}`),t.$$.ptr||B(`Cannot pass deleted object as a pointer of type ${this.name}`);var s=t.$$.ptrType.registeredClass,l=dr(t.$$.ptr,s,this.registeredClass);return l}function jn(e,t){var s;if(t===null)return this.isReference&&B(`null is not a valid ${this.name}`),this.isSmartPointer?(s=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,s),s):0;(!t||!t.$$)&&B(`Cannot pass "${pt(t)}" as a ${this.name}`),t.$$.ptr||B(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&B(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var l=t.$$.ptrType.registeredClass;if(s=dr(t.$$.ptr,l,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&B("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?s=t.$$.smartPtr:B(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:s=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)s=t.$$.smartPtr;else{var p=t.clone();s=this.rawShare(s,Fe.toHandle(()=>p.delete())),e!==null&&e.push(this.rawDestructor,s)}break;default:B("Unsupporting sharing policy")}return s}function Dr(e,t){if(t===null)return this.isReference&&B(`null is not a valid ${this.name}`),0;t.$$||B(`Cannot pass "${pt(t)}" as a ${this.name}`),t.$$.ptr||B(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&B(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var s=t.$$.ptrType.registeredClass,l=dr(t.$$.ptr,s,this.registeredClass);return l}var Mr=()=>{Object.assign(Qe.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:$e,readValueFromPointer:z,fromWireType:An})};function Qe(e,t,s,l,p,v,b,f,y,E,x){this.name=e,this.registeredClass=t,this.isReference=s,this.isConst=l,this.isSmartPointer=p,this.pointeeType=v,this.sharingPolicy=b,this.rawGetPointee=f,this.rawConstructor=y,this.rawShare=E,this.rawDestructor=x,!p&&t.baseClass===void 0?l?(this.toWireType=_e,this.destructorFunction=null):(this.toWireType=Dr,this.destructorFunction=null):this.toWireType=jn}var kr=(e,t,s)=>{d.hasOwnProperty(e)||jt("Replacing nonexistent public symbol"),d[e].overloadTable!==void 0&&s!==void 0?d[e].overloadTable[s]=t:(d[e]=t,d[e].argCount=s)},fr=(e,t,s)=>{e=e.replace(/p/g,"i");var l=d["dynCall_"+e];return l(t,...s)},It=[],Wt,te=e=>{var t=It[e];return t||(e>=It.length&&(It.length=e+1),It[e]=t=Wt.get(e)),t},Rr=function(e,t){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(e.includes("j"))return fr(e,t,s);var l=te(t)(...s);return l},Dn=(e,t)=>function(){for(var s=arguments.length,l=new Array(s),p=0;p<s;p++)l[p]=arguments[p];return Rr(e,t,l)},Ee=(e,t)=>{e=ue(e);function s(){return e.includes("j")?Dn(e,t):te(t)}var l=s();return typeof l!="function"&&B(`unknown function pointer with signature ${e}: ${t}`),l},Fr=(e,t)=>{var s=Ve(t,function(l){this.name=t,this.message=l;var p=new Error(l).stack;p!==void 0&&(this.stack=this.toString()+`
`+p.replace(/^Error(:[^\n]*)?\n/,""))});return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},s},ye,Lt=e=>{var t=yr(e),s=ue(t);return We(t),s},Ut=(e,t)=>{var s=[],l={};function p(v){if(!l[v]&&!he[v]){if(ge[v]){ge[v].forEach(p);return}s.push(v),l[v]=!0}}throw t.forEach(p),new ye(`${e}: `+s.map(Lt).join([", "]))},Mn=(e,t,s,l,p,v,b,f,y,E,x,k,L)=>{x=ue(x),v=Ee(p,v),f&&(f=Ee(b,f)),E&&(E=Ee(y,E)),L=Ee(k,L);var V=ee(x);lr(V,function(){Ut(`Cannot construct ${x} due to unbound types`,[l])}),Me([e,t,s],l?[l]:[],X=>{X=X[0];var fe,le;l?(fe=X.registeredClass,le=fe.instancePrototype):le=Rt.prototype;var de=Ve(x,function(){if(Object.getPrototypeOf(this)!==yt)throw new Je("Use 'new' to construct "+x);if(be.constructor_body===void 0)throw new Je(x+" has no accessible constructor");for(var za=arguments.length,sn=new Array(za),cn=0;cn<za;cn++)sn[cn]=arguments[cn];var Ha=be.constructor_body[sn.length];if(Ha===void 0)throw new Je(`Tried to invoke ctor of ${x} with invalid number of parameters (${sn.length}) - expected (${Object.keys(be.constructor_body).toString()}) parameters instead!`);return Ha.apply(this,sn)}),yt=Object.create(le,{constructor:{value:de}});de.prototype=yt;var be=new xn(x,de,yt,L,fe,v,f,E);if(be.baseClass){var Ze,on;(on=(Ze=be.baseClass).__derivedClasses)!==null&&on!==void 0||(Ze.__derivedClasses=[]),be.baseClass.__derivedClasses.push(be)}var Go=new Qe(x,be,!0,!1,!1),La=new Qe(x+"*",be,!1,!1,!1),Ua=new Qe(x+" const*",be,!1,!0,!1);return at[e]={pointerType:La,constPointerType:Ua},kr(V,de),[Go,La,Ua]})},Oe=(e,t)=>{for(var s=[],l=0;l<e;l++)s.push(q[t+l*4>>2]);return s};function kn(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function hr(e,t,s,l,p,v){var b=t.length;b<2&&B("argTypes array size mismatch! Must at least get return value and 'this' types!");var f=t[1]!==null&&s!==null,y=kn(t),E=t[0].name!=="void",x=b-2,k=new Array(x),L=[],V=[],X=function(){V.length=0;var fe;L.length=f?2:1,L[0]=p,f&&(fe=t[1].toWireType(V,this),L[1]=fe);for(var le=0;le<x;++le)k[le]=t[le+2].toWireType(V,le<0||arguments.length<=le?void 0:arguments[le]),L.push(k[le]);var de=l(...L);function yt(be){if(y)He(V);else for(var Ze=f?1:2;Ze<t.length;Ze++){var on=Ze===1?fe:k[Ze-2];t[Ze].destructorFunction!==null&&t[Ze].destructorFunction(on)}if(E)return t[0].fromWireType(be)}return yt(de)};return Ve(e,X)}var Rn=(e,t,s,l,p,v)=>{var b=Oe(t,s);p=Ee(l,p),Me([],[e],f=>{f=f[0];var y=`constructor ${f.name}`;if(f.registeredClass.constructor_body===void 0&&(f.registeredClass.constructor_body=[]),f.registeredClass.constructor_body[t-1]!==void 0)throw new Je(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${f.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return f.registeredClass.constructor_body[t-1]=()=>{Ut(`Cannot construct ${f.name} due to unbound types`,b)},Me([],b,E=>(E.splice(1,0,null),f.registeredClass.constructor_body[t-1]=hr(y,E,null,p,v),[])),[]})},zt=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},Fn=(e,t,s,l,p,v,b,f,y,E)=>{var x=Oe(s,l);t=ue(t),t=zt(t),v=Ee(p,v),Me([],[e],k=>{k=k[0];var L=`${k.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),f&&k.registeredClass.pureVirtualFunctions.push(t);function V(){Ut(`Cannot call ${L} due to unbound types`,x)}var X=k.registeredClass.instancePrototype,fe=X[t];return fe===void 0||fe.overloadTable===void 0&&fe.className!==k.name&&fe.argCount===s-2?(V.argCount=s-2,V.className=k.name,X[t]=V):(ur(X,t,L),X[t].overloadTable[s-2]=V),Me([],x,le=>{var de=hr(L,le,k,v,b);return X[t].overloadTable===void 0?(de.argCount=s-2,X[t]=de):X[t].overloadTable[s-2]=de,[]}),[]})},ht=[],Re=[],pr=e=>{e>9&&--Re[e+1]===0&&(Re[e]=void 0,ht.push(e))},In=()=>Re.length/2-5-ht.length,Wn=()=>{Re.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=In},Fe={toValue:e=>(e||B("Cannot use deleted val. handle = "+e),Re[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=ht.pop()||Re.length;return Re[t]=e,Re[t+1]=1,t}}}},Ir={name:"emscripten::val",fromWireType:e=>{var t=Fe.toValue(e);return pr(e),t},toWireType:(e,t)=>Fe.toHandle(t),argPackAdvance:$e,readValueFromPointer:z,destructorFunction:null},Wr=e=>pe(e,Ir),Ln=(e,t,s)=>{switch(t){case 1:return s?function(l){return this.fromWireType(ce[l])}:function(l){return this.fromWireType(ae[l])};case 2:return s?function(l){return this.fromWireType(Te[l>>1])}:function(l){return this.fromWireType(je[l>>1])};case 4:return s?function(l){return this.fromWireType(Pe[l>>2])}:function(l){return this.fromWireType(q[l>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Lr=(e,t,s,l)=>{t=ue(t);function p(){}p.values={},pe(e,{name:t,constructor:p,fromWireType:function(v){return this.constructor.values[v]},toWireType:(v,b)=>b.value,argPackAdvance:$e,readValueFromPointer:Ln(t,s,l),destructorFunction:null}),lr(t,p)},Ht=(e,t)=>{var s=he[e];return s===void 0&&B(`${t} has unknown type ${Lt(e)}`),s},Un=(e,t,s)=>{var l=Ht(e,"enum");t=ue(t);var p=l.constructor,v=Object.create(l.constructor.prototype,{value:{value:s},constructor:{value:Ve(`${l.name}_${t}`,function(){})}});p.values[s]=v,p[t]=v},pt=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},zn=(e,t)=>{switch(t){case 4:return function(s){return this.fromWireType(wt[s>>2])};case 8:return function(s){return this.fromWireType($t[s>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Ur=(e,t,s)=>{t=ue(t),pe(e,{name:t,fromWireType:l=>l,toWireType:(l,p)=>p,argPackAdvance:$e,readValueFromPointer:zn(t,s),destructorFunction:null})},Hn=(e,t,s,l,p,v,b,f)=>{var y=Oe(t,s);e=ue(e),e=zt(e),p=Ee(l,p),lr(e,function(){Ut(`Cannot call ${e} due to unbound types`,y)},t-1),Me([],y,E=>{var x=[E[0],null].concat(E.slice(1));return kr(e,hr(e,x,null,p,v),t-1),[]})},Vn=(e,t,s)=>{switch(t){case 1:return s?l=>ce[l]:l=>ae[l];case 2:return s?l=>Te[l>>1]:l=>je[l>>1];case 4:return s?l=>Pe[l>>2]:l=>q[l>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Bn=(e,t,s,l,p)=>{t=ue(t);var v=x=>x;if(l===0){var b=32-8*s;v=x=>x<<b>>>b}var f=t.includes("unsigned"),y=(x,k)=>{},E;f?E=function(x,k){return y(k,this.name),k>>>0}:E=function(x,k){return y(k,this.name),k},pe(e,{name:t,fromWireType:v,toWireType:E,argPackAdvance:$e,readValueFromPointer:Vn(t,s,l!==0),destructorFunction:null})},Nn=(e,t,s)=>{var l=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],p=l[t];function v(b){var f=q[b>>2],y=q[b+4>>2];return new p(ce.buffer,y,f)}s=ue(s),pe(e,{name:s,fromWireType:v,argPackAdvance:$e,readValueFromPointer:v},{ignoreDuplicateRegistrations:!0})},qn=Object.assign({optional:!0},Ir),Gn=(e,t)=>{pe(e,qn)},Jn=(e,t,s,l)=>{if(!(l>0))return 0;for(var p=s,v=s+l-1,b=0;b<e.length;++b){var f=e.charCodeAt(b);if(f>=55296&&f<=57343){var y=e.charCodeAt(++b);f=65536+((f&1023)<<10)|y&1023}if(f<=127){if(s>=v)break;t[s++]=f}else if(f<=2047){if(s+1>=v)break;t[s++]=192|f>>6,t[s++]=128|f&63}else if(f<=65535){if(s+2>=v)break;t[s++]=224|f>>12,t[s++]=128|f>>6&63,t[s++]=128|f&63}else{if(s+3>=v)break;t[s++]=240|f>>18,t[s++]=128|f>>12&63,t[s++]=128|f>>6&63,t[s++]=128|f&63}}return t[s]=0,s-p},mt=(e,t,s)=>Jn(e,ae,t,s),Yn=e=>{for(var t=0,s=0;s<e.length;++s){var l=e.charCodeAt(s);l<=127?t++:l<=2047?t+=2:l>=55296&&l<=57343?(t+=4,++s):t+=3}return t},zr=typeof TextDecoder<"u"?new TextDecoder:void 0,Vt=(e,t,s)=>{for(var l=t+s,p=t;e[p]&&!(p>=l);)++p;if(p-t>16&&e.buffer&&zr)return zr.decode(e.subarray(t,p));for(var v="";t<p;){var b=e[t++];if(!(b&128)){v+=String.fromCharCode(b);continue}var f=e[t++]&63;if((b&224)==192){v+=String.fromCharCode((b&31)<<6|f);continue}var y=e[t++]&63;if((b&240)==224?b=(b&15)<<12|f<<6|y:b=(b&7)<<18|f<<12|y<<6|e[t++]&63,b<65536)v+=String.fromCharCode(b);else{var E=b-65536;v+=String.fromCharCode(55296|E>>10,56320|E&1023)}}return v},Xn=(e,t)=>e?Vt(ae,e,t):"",Qn=(e,t)=>{t=ue(t);var s=t==="std::string";pe(e,{name:t,fromWireType(l){var p=q[l>>2],v=l+4,b;if(s)for(var f=v,y=0;y<=p;++y){var E=v+y;if(y==p||ae[E]==0){var x=E-f,k=Xn(f,x);b===void 0?b=k:(b+="\0",b+=k),f=E+1}}else{for(var L=new Array(p),y=0;y<p;++y)L[y]=String.fromCharCode(ae[v+y]);b=L.join("")}return We(l),b},toWireType(l,p){p instanceof ArrayBuffer&&(p=new Uint8Array(p));var v,b=typeof p=="string";b||p instanceof Uint8Array||p instanceof Uint8ClampedArray||p instanceof Int8Array||B("Cannot pass non-string to std::string"),s&&b?v=Yn(p):v=p.length;var f=br(4+v+1),y=f+4;if(q[f>>2]=v,s&&b)mt(p,y,v+1);else if(b)for(var E=0;E<v;++E){var x=p.charCodeAt(E);x>255&&(We(y),B("String has UTF-16 code units that do not fit in 8 bits")),ae[y+E]=x}else for(var E=0;E<v;++E)ae[y+E]=p[E];return l!==null&&l.push(We,f),f},argPackAdvance:$e,readValueFromPointer:z,destructorFunction(l){We(l)}})},Hr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Vr=(e,t)=>{for(var s=e,l=s>>1,p=l+t/2;!(l>=p)&&je[l];)++l;if(s=l<<1,s-e>32&&Hr)return Hr.decode(ae.subarray(e,s));for(var v="",b=0;!(b>=t/2);++b){var f=Te[e+b*2>>1];if(f==0)break;v+=String.fromCharCode(f)}return v},Zn=(e,t,s)=>{var l;if((l=s)!==null&&l!==void 0||(s=2147483647),s<2)return 0;s-=2;for(var p=t,v=s<e.length*2?s/2:e.length,b=0;b<v;++b){var f=e.charCodeAt(b);Te[t>>1]=f,t+=2}return Te[t>>1]=0,t-p},Kn=e=>e.length*2,ea=(e,t)=>{for(var s=0,l="";!(s>=t/4);){var p=Pe[e+s*4>>2];if(p==0)break;if(++s,p>=65536){var v=p-65536;l+=String.fromCharCode(55296|v>>10,56320|v&1023)}else l+=String.fromCharCode(p)}return l},ta=(e,t,s)=>{var l;if((l=s)!==null&&l!==void 0||(s=2147483647),s<4)return 0;for(var p=t,v=p+s-4,b=0;b<e.length;++b){var f=e.charCodeAt(b);if(f>=55296&&f<=57343){var y=e.charCodeAt(++b);f=65536+((f&1023)<<10)|y&1023}if(Pe[t>>2]=f,t+=4,t+4>v)break}return Pe[t>>2]=0,t-p},ra=e=>{for(var t=0,s=0;s<e.length;++s){var l=e.charCodeAt(s);l>=55296&&l<=57343&&++s,t+=4}return t},na=(e,t,s)=>{s=ue(s);var l,p,v,b;t===2?(l=Vr,p=Zn,b=Kn,v=f=>je[f>>1]):t===4&&(l=ea,p=ta,b=ra,v=f=>q[f>>2]),pe(e,{name:s,fromWireType:f=>{for(var y=q[f>>2],E,x=f+4,k=0;k<=y;++k){var L=f+4+k*t;if(k==y||v(L)==0){var V=L-x,X=l(x,V);E===void 0?E=X:(E+="\0",E+=X),x=L+t}}return We(f),E},toWireType:(f,y)=>{typeof y!="string"&&B(`Cannot pass non-string to C++ string type ${s}`);var E=b(y),x=br(4+E+t);return q[x>>2]=E/t,p(y,x+4,E+t),f!==null&&f.push(We,x),x},argPackAdvance:$e,readValueFromPointer:z,destructorFunction(f){We(f)}})},aa=(e,t,s,l,p,v)=>{se[e]={name:ue(t),rawConstructor:Ee(s,l),rawDestructor:Ee(p,v),fields:[]}},oa=(e,t,s,l,p,v,b,f,y,E)=>{se[e].fields.push({fieldName:ue(t),getterReturnType:s,getter:Ee(l,p),getterContext:v,setterArgumentType:b,setter:Ee(f,y),setterContext:E})},ia=(e,t)=>{t=ue(t),pe(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(s,l)=>{}})},sa=(e,t,s)=>ae.copyWithin(e,t,t+s),mr=[],ca=(e,t,s,l)=>(e=mr[e],t=Fe.toValue(t),e(null,t,s,l)),ua={},la=e=>{var t=ua[e];return t===void 0?ue(e):t},Bt=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var s=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return s||delete t.$$$embind_global$$$,s}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},da=e=>e===0?Fe.toHandle(Bt()):(e=la(e),Fe.toHandle(Bt()[e])),vt=e=>{var t=mr.length;return mr.push(e),t},fa=(e,t)=>{for(var s=new Array(e),l=0;l<e;++l)s[l]=Ht(q[t+l*4>>2],"parameter "+l);return s},ha=Reflect.construct,pa=(e,t,s)=>{var l=[],p=e.toWireType(l,s);return l.length&&(q[t>>2]=Fe.toHandle(l)),p},ma=(e,t,s)=>{var l=fa(e,t),p=l.shift();e--;var v=new Array(e),b=(y,E,x,k)=>{for(var L=0,V=0;V<e;++V)v[V]=l[V].readValueFromPointer(k+L),L+=l[V].argPackAdvance;var X=s===1?ha(E,v):E.apply(y,v);return pa(p,x,X)},f=`methodCaller<(${l.map(y=>y.name).join(", ")}) => ${p.name}>`;return vt(Ve(f,b))},Nt=e=>{e>9&&(Re[e+1]+=1)},va=e=>{var t=Fe.toValue(e);He(t),pr(e)},Br=(e,t)=>{e=Ht(e,"_emval_take_value");var s=e.readValueFromPointer(t);return Fe.toHandle(s)},Nr=(e,t,s,l)=>{var p=new Date().getFullYear(),v=new Date(p,0,1),b=new Date(p,6,1),f=v.getTimezoneOffset(),y=b.getTimezoneOffset(),E=Math.max(f,y);q[e>>2]=E*60,Pe[t>>2]=+(f!=y);var x=V=>{var X=V>=0?"-":"+",fe=Math.abs(V),le=String(Math.floor(fe/60)).padStart(2,"0"),de=String(fe%60).padStart(2,"0");return`UTC${X}${le}${de}`},k=x(f),L=x(y);y<f?(mt(k,s,17),mt(L,l,17)):(mt(k,l,17),mt(L,s,17))},ga=()=>2147483648,ya=(e,t)=>Math.ceil(e/t)*t,ba=e=>{var t=I.buffer,s=(e-t.byteLength+65535)/65536;try{return I.grow(s),Ct(),1}catch{}},wa=e=>{var t=ae.length;e>>>=0;var s=ga();if(e>s)return!1;for(var l=1;l<=4;l*=2){var p=t*(1+.2/l);p=Math.min(p,e+100663296);var v=Math.min(s,ya(Math.max(e,p),65536)),b=ba(v);if(b)return!0}return!1},vr={},$a=()=>W||"./this.program",Y=()=>{if(!Y.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:$a()};for(var s in vr)vr[s]===void 0?delete t[s]:t[s]=vr[s];var l=[];for(var s in t)l.push(`${s}=${t[s]}`);Y.strings=l}return Y.strings},Ie=(e,t)=>{for(var s=0;s<e.length;++s)ce[t++]=e.charCodeAt(s);ce[t]=0},gr=(e,t)=>{var s=0;return Y().forEach((l,p)=>{var v=t+s;q[e+p*4>>2]=v,Ie(l,v),s+=l.length+1}),0},qr=(e,t)=>{var s=Y();q[e>>2]=s.length;var l=0;return s.forEach(p=>l+=p.length+1),q[t>>2]=l,0},Q=e=>52;function gt(e,t,s,l,p){return 70}var re=[null,[],[]],ne=(e,t)=>{var s=re[e];t===0||t===10?((e===1?Le:H)(Vt(s,0)),s.length=0):s.push(t)},Gr=(e,t,s,l)=>{for(var p=0,v=0;v<s;v++){var b=q[t>>2],f=q[t+4>>2];t+=8;for(var y=0;y<f;y++)ne(e,ae[b+y]);p+=f}return q[l>>2]=p,0},Jr=e=>e;_r=d.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},$n(),Je=d.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},xr(),En(),Mr(),ye=d.UnboundTypeError=Fr(Error,"UnboundTypeError"),Wn();var Yr={s:gn,v:ar,b:Pr,g:xt,q:Ge,Y:yn,f:bn,X:wn,e:tt,T:Sr,ha:or,S:Er,ba:ut,fa:Mn,ea:Rn,w:Fn,aa:Wr,x:Lr,h:Un,M:Ur,N:Hn,t:Bn,o:Nn,ga:Gn,L:Qn,C:na,B:aa,ia:oa,ca:ia,$:sa,E:ca,ka:pr,la:da,K:ma,O:Nt,P:va,da:Br,U:Nr,Z:wa,V:gr,W:qr,_:Q,R:gt,J:Gr,F:u,D:_a,G:c,n:m,a:Ca,d:Oa,p:Sa,j:a,I:an,u:qt,H:n,z:$,Q:_,l:Aa,k:Ea,c:Pa,m:Ta,A:ja,r:g,i:xa,y:T,ja:Jr},Z=rr(),yr=e=>(yr=Z.oa)(e),We=d._free=e=>(We=d._free=Z.pa)(e),br=d._malloc=e=>(br=d._malloc=Z.ra)(e),K=(e,t)=>(K=Z.sa)(e,t),Xr=e=>(Xr=Z.ta)(e),Qr=e=>(Qr=Z.ua)(e),Zr=()=>(Zr=Z.va)(),Kr=e=>(Kr=Z.wa)(e),en=e=>(en=Z.xa)(e),tn=(e,t,s)=>(tn=Z.ya)(e,t,s),rn=e=>(rn=Z.za)(e);d.dynCall_viijii=(e,t,s,l,p,v,b)=>(d.dynCall_viijii=Z.Aa)(e,t,s,l,p,v,b),d.dynCall_jiji=(e,t,s,l,p)=>(d.dynCall_jiji=Z.Ba)(e,t,s,l,p);var nn=d.dynCall_jiiii=(e,t,s,l,p)=>(nn=d.dynCall_jiiii=Z.Ca)(e,t,s,l,p);d.dynCall_iiiiij=(e,t,s,l,p,v,b)=>(d.dynCall_iiiiij=Z.Da)(e,t,s,l,p,v,b),d.dynCall_iiiiijj=(e,t,s,l,p,v,b,f,y)=>(d.dynCall_iiiiijj=Z.Ea)(e,t,s,l,p,v,b,f,y),d.dynCall_iiiiiijj=(e,t,s,l,p,v,b,f,y,E)=>(d.dynCall_iiiiiijj=Z.Fa)(e,t,s,l,p,v,b,f,y,E);function Ca(e,t){var s=ie();try{return te(e)(t)}catch(l){if(oe(s),l!==l+0)throw l;K(1,0)}}function Ta(e,t,s,l){var p=ie();try{te(e)(t,s,l)}catch(v){if(oe(p),v!==v+0)throw v;K(1,0)}}function Pa(e,t,s){var l=ie();try{te(e)(t,s)}catch(p){if(oe(l),p!==p+0)throw p;K(1,0)}}function Sa(e,t,s,l){var p=ie();try{return te(e)(t,s,l)}catch(v){if(oe(p),v!==v+0)throw v;K(1,0)}}function _a(e,t,s,l,p){var v=ie();try{return te(e)(t,s,l,p)}catch(b){if(oe(v),b!==b+0)throw b;K(1,0)}}function Ea(e,t){var s=ie();try{te(e)(t)}catch(l){if(oe(s),l!==l+0)throw l;K(1,0)}}function Oa(e,t,s){var l=ie();try{return te(e)(t,s)}catch(p){if(oe(l),p!==p+0)throw p;K(1,0)}}function Aa(e){var t=ie();try{te(e)()}catch(s){if(oe(t),s!==s+0)throw s;K(1,0)}}function xa(e,t,s,l,p,v,b,f,y,E,x){var k=ie();try{te(e)(t,s,l,p,v,b,f,y,E,x)}catch(L){if(oe(k),L!==L+0)throw L;K(1,0)}}function ja(e,t,s,l,p){var v=ie();try{te(e)(t,s,l,p)}catch(b){if(oe(v),b!==b+0)throw b;K(1,0)}}function qt(e,t,s,l,p,v,b){var f=ie();try{return te(e)(t,s,l,p,v,b)}catch(y){if(oe(f),y!==y+0)throw y;K(1,0)}}function an(e,t,s,l,p,v){var b=ie();try{return te(e)(t,s,l,p,v)}catch(f){if(oe(b),f!==f+0)throw f;K(1,0)}}function n(e,t,s,l,p,v,b,f){var y=ie();try{return te(e)(t,s,l,p,v,b,f)}catch(E){if(oe(y),E!==E+0)throw E;K(1,0)}}function a(e,t,s,l,p){var v=ie();try{return te(e)(t,s,l,p)}catch(b){if(oe(v),b!==b+0)throw b;K(1,0)}}function c(e,t,s,l){var p=ie();try{return te(e)(t,s,l)}catch(v){if(oe(p),v!==v+0)throw v;K(1,0)}}function u(e,t,s,l){var p=ie();try{return te(e)(t,s,l)}catch(v){if(oe(p),v!==v+0)throw v;K(1,0)}}function m(e){var t=ie();try{return te(e)()}catch(s){if(oe(t),s!==s+0)throw s;K(1,0)}}function g(e,t,s,l,p,v,b,f){var y=ie();try{te(e)(t,s,l,p,v,b,f)}catch(E){if(oe(y),E!==E+0)throw E;K(1,0)}}function $(e,t,s,l,p,v,b,f,y,E,x,k){var L=ie();try{return te(e)(t,s,l,p,v,b,f,y,E,x,k)}catch(V){if(oe(L),V!==V+0)throw V;K(1,0)}}function T(e,t,s,l,p,v,b,f,y,E,x,k,L,V,X,fe){var le=ie();try{te(e)(t,s,l,p,v,b,f,y,E,x,k,L,V,X,fe)}catch(de){if(oe(le),de!==de+0)throw de;K(1,0)}}function _(e,t,s,l,p){var v=ie();try{return nn(e,t,s,l,p)}catch(b){if(oe(v),b!==b+0)throw b;K(1,0)}}var O;ze=function e(){O||M(),O||(ze=e)};function M(){if(me>0||(Ne(),me>0))return;function e(){var t;O||(O=!0,d.calledRun=!0,!xe&&(Qt(),w(d),(t=d.onRuntimeInitialized)===null||t===void 0||t.call(d),Ue()))}d.setStatus?(d.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>d.setStatus(""),1),e()},1)):e()}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();return M(),h=j,h}})();function Os(r){return Ia(Wa,r)}async function As(r,i){return _s(Wa,r,i)}async function xs(r,i){return Es(Wa,r,i)}const Io=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],js=[...Io,["unknown"]].map(r=>r[0]),ka=new Map(Io);function Ds(r){for(const[i,o]of ka)if(r===o)return i;return"unknown"}function Ms(r){if(Wo(r))return{width:r.naturalWidth,height:r.naturalHeight};if(Lo(r))return{width:r.width.baseVal.value,height:r.height.baseVal.value};if(Uo(r))return{width:r.videoWidth,height:r.videoHeight};if(Ho(r))return{width:r.width,height:r.height};if(Bo(r))return{width:r.displayWidth,height:r.displayHeight};if(zo(r))return{width:r.width,height:r.height};if(Vo(r))return{width:r.width,height:r.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function Wo(r){var i,o;try{return r instanceof((o=(i=r==null?void 0:r.ownerDocument)==null?void 0:i.defaultView)==null?void 0:o.HTMLImageElement)}catch{return!1}}function Lo(r){var i,o;try{return r instanceof((o=(i=r==null?void 0:r.ownerDocument)==null?void 0:i.defaultView)==null?void 0:o.SVGImageElement)}catch{return!1}}function Uo(r){var i,o;try{return r instanceof((o=(i=r==null?void 0:r.ownerDocument)==null?void 0:i.defaultView)==null?void 0:o.HTMLVideoElement)}catch{return!1}}function zo(r){var i,o;try{return r instanceof((o=(i=r==null?void 0:r.ownerDocument)==null?void 0:i.defaultView)==null?void 0:o.HTMLCanvasElement)}catch{return!1}}function Ho(r){try{return r instanceof ImageBitmap||Object.prototype.toString.call(r)==="[object ImageBitmap]"}catch{return!1}}function Vo(r){try{return r instanceof OffscreenCanvas||Object.prototype.toString.call(r)==="[object OffscreenCanvas]"}catch{return!1}}function Bo(r){try{return r instanceof VideoFrame||Object.prototype.toString.call(r)==="[object VideoFrame]"}catch{return!1}}function No(r){try{return r instanceof Blob||Object.prototype.toString.call(r)==="[object Blob]"}catch{return!1}}function ks(r){try{return r instanceof ImageData||Object.prototype.toString.call(r)==="[object ImageData]"}catch{return!1}}function Rs(r,i){try{const o=new OffscreenCanvas(r,i);if(o.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return o;throw void 0}catch{const o=document.createElement("canvas");return o.width=r,o.height=i,o}}async function qo(r){if(Wo(r)&&!await Ls(r))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Lo(r)&&!await Us(r))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Bo(r)&&zs(r))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Uo(r)&&(r.readyState===0||r.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Ho(r)&&Vs(r))throw new DOMException("The image source is detached.","InvalidStateError");const{width:i,height:o}=Ms(r);if(i===0||o===0)return null;const h=Rs(i,o).getContext("2d");h.drawImage(r,0,0);try{return h.getImageData(0,0,i,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Fs(r){let i;try{if(globalThis.createImageBitmap)i=await createImageBitmap(r);else if(globalThis.Image){i=new Image;let o="";try{o=URL.createObjectURL(r),i.src=o,await i.decode()}finally{URL.revokeObjectURL(o)}}else return r}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await qo(i)}function Is(r){const{width:i,height:o}=r;if(i===0||o===0)return null;const h=r.getContext("2d");try{return h.getImageData(0,0,i,o)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Ws(r){if(No(r))return await Fs(r);if(ks(r)){if(Hs(r))throw new DOMException("The image data has been detached.","InvalidStateError");return r}return zo(r)||Vo(r)?Is(r):await qo(r)}async function Ls(r){try{return await r.decode(),!0}catch{return!1}}async function Us(r){var i;try{return await((i=r.decode)==null?void 0:i.call(r)),!0}catch{return!1}}function zs(r){return r.format===null}function Hs(r){return r.data.buffer.byteLength===0}function Vs(r){return r.width===0&&r.height===0}function no(r,i){return Bs(r)?new DOMException(`${i}: ${r.message}`,r.name):Ns(r)?new r.constructor(`${i}: ${r.message}`):new Error(`${i}: ${r}`)}function Bs(r){return r instanceof DOMException||Object.prototype.toString.call(r)==="[object DOMException]"}function Ns(r){return r instanceof Error||Object.prototype.toString.call(r)==="[object Error]"}var hn;class Ys extends EventTarget{constructor(i={}){var o;super(),ms(this,hn);try{const h=(o=i==null?void 0:i.formats)==null?void 0:o.filter(d=>d!=="unknown");if((h==null?void 0:h.length)===0)throw new TypeError("Hint option provided, but is empty.");for(const d of h??[])if(!ka.has(d))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${d}' is not a valid enum value of type BarcodeFormat.`);vs(this,hn,h??[]),Os().then(d=>{this.dispatchEvent(new CustomEvent("load",{detail:d}))}).catch(d=>{this.dispatchEvent(new CustomEvent("error",{detail:d}))})}catch(h){throw no(h,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return js.filter(i=>i!=="unknown")}async detect(i){try{const o=await Ws(i);if(o===null)return[];let h;const d={tryHarder:!0,returnCodabarStartEnd:!0,formats:ps(this,hn).map(w=>ka.get(w))};try{No(o)?h=await As(o,d):h=await xs(o,d)}catch(w){throw console.error(w),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return h.map(w=>{const{topLeft:{x:P,y:j},topRight:{x:C,y:S},bottomLeft:{x:A,y:D},bottomRight:{x:W,y:R}}=w.position,U=Math.min(P,C,A,W),N=Math.min(j,S,D,R),G=Math.max(P,C,A,W),J=Math.max(j,S,D,R);return{boundingBox:new DOMRectReadOnly(U,N,G-U,J-N),rawValue:w.text,format:Ds(w.format),cornerPoints:[{x:P,y:j},{x:C,y:S},{x:W,y:R},{x:A,y:D}]}})}catch(o){throw no(o,"Failed to execute 'detect' on 'BarcodeDetector'")}}}hn=new WeakMap;export{Js as F,Gs as S,Ys as T};
